var L_=Object.create;var Tf=Object.defineProperty;var F_=Object.getOwnPropertyDescriptor;var U_=Object.getOwnPropertyNames;var q_=Object.getPrototypeOf,N_=Object.prototype.hasOwnProperty;var ba=(r,e)=>()=>(r&&(e=r(r=0)),e);var z=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ke=(r,e)=>{for(var t in e)Tf(r,t,{get:e[t],enumerable:!0})},W_=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of U_(e))!N_.call(r,i)&&i!==t&&Tf(r,i,{get:()=>e[i],enumerable:!(n=F_(e,i))||n.enumerable});return r};var M=(r,e,t)=>(t=r!=null?L_(q_(r)):{},W_(e||!r||!r.__esModule?Tf(t,"default",{value:r,enumerable:!0}):t,r));var Yd=z((MA,Vd)=>{function dt(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Vd.exports=dt;dt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};dt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};dt.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t),this._options.unref&&this._timer.unref(),!0};dt.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};dt.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};dt.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};dt.prototype.start=dt.prototype.try;dt.prototype.errors=function(){return this._errors};dt.prototype.attempts=function(){return this._attempts};dt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,n=0;n<this._errors.length;n++){var i=this._errors[n],u=i.message,f=(r[u]||0)+1;r[u]=f,f>=t&&(e=i,t=f)}return e}});var Gd=z(eo=>{var H_=Yd();eo.operation=function(r){var e=eo.timeouts(r);return new H_(e,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})};eo.timeouts=function(r){if(r instanceof Array)return[].concat(r);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var t in r)e[t]=r[t];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return r&&r.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort(function(u,f){return u-f}),n};eo.createTimeout=function(r,e){var t=e.randomize?Math.random()+1:1,n=Math.round(t*Math.max(e.minTimeout,1)*Math.pow(e.factor,r));return n=Math.min(n,e.maxTimeout),n};eo.wrap=function(r,e,t){if(e instanceof Array&&(t=e,e=null),!t){t=[];for(var n in r)typeof r[n]=="function"&&t.push(n)}for(var i=0;i<t.length;i++){var u=t[i],f=r[u];r[u]=function(h){var m=eo.operation(e),b=Array.prototype.slice.call(arguments,1),S=b.pop();b.push(function(_){m.retry(_)||(_&&(arguments[0]=m.mainError()),S.apply(this,arguments))}),m.attempt(function(){h.apply(r,b)})}.bind(r,f),r[u].options=e}}});var Kd=z(($A,Qd)=>{Qd.exports=Gd()});var Xd=z((HA,Js)=>{"use strict";var V_=Kd(),Y_=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],Ks=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},G_=(r,e,t)=>{let n=t.retries-(e-1);return r.attemptNumber=e,r.retriesLeft=n,r},Q_=r=>Y_.includes(r),Jd=(r,e)=>new Promise((t,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};let i=V_.operation(e);i.attempt(async u=>{try{t(await r(u))}catch(f){if(!(f instanceof Error)){n(new TypeError(`Non-error was thrown: "${f}". You should only throw errors.`));return}if(f instanceof Ks)i.stop(),n(f.originalError);else if(f instanceof TypeError&&!Q_(f.message))i.stop(),n(f);else{G_(f,u,e);try{await e.onFailedAttempt(f)}catch(d){n(d);return}i.retry(f)||n(i.mainError())}}})});Js.exports=Jd;Js.exports.default=Jd;Js.exports.AbortError=Ks});var th=z((VA,eh)=>{eh.exports=Af;var Zd=128,K_=127,J_=~K_,X_=Math.pow(2,31);function Af(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw Af.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=X_;)e[t++]=r&255|Zd,r/=128;for(;r&J_;)e[t++]=r&255|Zd,r>>>=7;return e[t]=r|0,Af.bytes=t-n+1,e}});var oh=z((YA,nh)=>{nh.exports=Cf;var Z_=128,rh=127;function Cf(r,n){var t=0,n=n||0,i=0,u=n,f,d=r.length;do{if(u>=d||i>49)throw Cf.bytes=0,new RangeError("Could not decode varint");f=r[u++],t+=i<28?(f&rh)<<i:(f&rh)*Math.pow(2,i),i+=7}while(f>=Z_);return Cf.bytes=u-n,t}});var ah=z((GA,ih)=>{var eS=Math.pow(2,7),tS=Math.pow(2,14),rS=Math.pow(2,21),nS=Math.pow(2,28),oS=Math.pow(2,35),iS=Math.pow(2,42),aS=Math.pow(2,49),sS=Math.pow(2,56),uS=Math.pow(2,63);ih.exports=function(r){return r<eS?1:r<tS?2:r<rS?3:r<nS?4:r<oS?5:r<iS?6:r<aS?7:r<sS?8:r<uS?9:10}});var xf=z((QA,sh)=>{sh.exports={encode:th(),decode:oh(),encodingLength:ah()}});var Xp=z((fx,Jp)=>{"use strict";var hv=async r=>{let e;for await(let t of r)e=t;return e};Jp.exports=hv});var tm=z((cx,yi)=>{var Zp=(...r)=>{let e;for(;r.length;)e=r.shift()(e);return e},oc=r=>r&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),gu=r=>r&&typeof r.sink=="function"&&oc(r.source),pv=r=>e=>(r.sink(e),r.source),em=(...r)=>{if(gu(r[0])){let e=r[0];r[0]=()=>e.source}else if(oc(r[0])){let e=r[0];r[0]=()=>e}if(r.length>1&&gu(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let e=1;e<r.length-1;e++)gu(r[e])&&(r[e]=pv(r[e]));return Zp(...r)};yi.exports=em;yi.exports.pipe=em;yi.exports.rawPipe=Zp;yi.exports.isIterable=oc;yi.exports.isDuplex=gu});var wu=z((dx,rm)=>{"use strict";async function*mv(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length;)yield t.slice(0,e),t=t.slice(e)}rm.exports=mv});var ic=z((hx,nm)=>{"use strict";var yv=wu();async function*bv(r,e=1){for await(let t of yv(r,e)){let n=t.map(i=>i().then(u=>({ok:!0,value:u}),u=>({ok:!1,err:u})));for(let i=0;i<n.length;i++){let u=await n[i];if(u.ok)yield u.value;else throw u.err}}}nm.exports=bv});var im=z((px,om)=>{"use strict";om.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var cm=z((lm,fm)=>{"use strict";var _u=im(),{hasOwnProperty:sm}=Object.prototype,{propertyIsEnumerable:gv}=Object,bi=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),wv=lm,am={concatArrays:!1,ignoreUndefined:!1},Su=r=>{let e=[];for(let t in r)sm.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)gv.call(r,n)&&e.push(n)}return e};function gi(r){return Array.isArray(r)?_v(r):_u(r)?Sv(r):r}function _v(r){let e=r.slice(0,0);return Su(r).forEach(t=>{bi(e,t,gi(r[t]))}),e}function Sv(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return Su(r).forEach(t=>{bi(e,t,gi(r[t]))}),e}var um=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?bi(r,i,ac(r[i],e[i],n)):bi(r,i,gi(e[i])))}),r),vv=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(u=>{let f=[];for(let d=0;d<u.length;d++)!sm.call(u,d)||(f.push(String(d)),u===r?bi(n,i++,u[d]):bi(n,i++,gi(u[d])));n=um(n,u,Su(u).filter(d=>!f.includes(d)),t)}),n};function ac(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?vv(r,e,t):!_u(e)||!_u(r)?gi(e):um(r,e,Su(e),t)}fm.exports=function(...r){let e=ac(gi(am),this!==wv&&this||{},am),t={_:{}};for(let n of r)if(n!==void 0){if(!_u(n))throw new TypeError("`"+n+"` is not an Option Object");t=ac(t,{_:n},e)}return t._}});var pm=z((Ua,vu)=>{(function(r,e){"use strict";var t={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(p){if(!Array.isArray(p)&&!ArrayBuffer.isView(p))return!1;for(var g=0;g<p.length;g++)if(!Number.isInteger(p[g])||p[g]<0||p[g]>255)return!1;return!0}function i(p,g){return(p&65535)*g+(((p>>>16)*g&65535)<<16)}function u(p,g){return p<<g|p>>>32-g}function f(p){return p^=p>>>16,p=i(p,2246822507),p^=p>>>13,p=i(p,3266489909),p^=p>>>16,p}function d(p,g){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var v=[0,0,0,0];return v[3]+=p[3]+g[3],v[2]+=v[3]>>>16,v[3]&=65535,v[2]+=p[2]+g[2],v[1]+=v[2]>>>16,v[2]&=65535,v[1]+=p[1]+g[1],v[0]+=v[1]>>>16,v[1]&=65535,v[0]+=p[0]+g[0],v[0]&=65535,[v[0]<<16|v[1],v[2]<<16|v[3]]}function h(p,g){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var v=[0,0,0,0];return v[3]+=p[3]*g[3],v[2]+=v[3]>>>16,v[3]&=65535,v[2]+=p[2]*g[3],v[1]+=v[2]>>>16,v[2]&=65535,v[2]+=p[3]*g[2],v[1]+=v[2]>>>16,v[2]&=65535,v[1]+=p[1]*g[3],v[0]+=v[1]>>>16,v[1]&=65535,v[1]+=p[2]*g[2],v[0]+=v[1]>>>16,v[1]&=65535,v[1]+=p[3]*g[1],v[0]+=v[1]>>>16,v[1]&=65535,v[0]+=p[0]*g[3]+p[1]*g[2]+p[2]*g[1]+p[3]*g[0],v[0]&=65535,[v[0]<<16|v[1],v[2]<<16|v[3]]}function m(p,g){return g%=64,g===32?[p[1],p[0]]:g<32?[p[0]<<g|p[1]>>>32-g,p[1]<<g|p[0]>>>32-g]:(g-=32,[p[1]<<g|p[0]>>>32-g,p[0]<<g|p[1]>>>32-g])}function b(p,g){return g%=64,g===0?p:g<32?[p[0]<<g|p[1]>>>32-g,p[1]<<g]:[p[1]<<g-32,0]}function S(p,g){return[p[0]^g[0],p[1]^g[1]]}function _(p){return p=S(p,[0,p[0]>>>1]),p=h(p,[4283543511,3981806797]),p=S(p,[0,p[0]>>>1]),p=h(p,[3301882366,444984403]),p=S(p,[0,p[0]>>>1]),p}t.x86.hash32=function(p,g){if(t.inputValidation&&!n(p))return e;g=g||0;for(var v=p.length%4,P=p.length-v,R=g,T=0,B=3432918353,C=461845907,O=0;O<P;O=O+4)T=p[O]|p[O+1]<<8|p[O+2]<<16|p[O+3]<<24,T=i(T,B),T=u(T,15),T=i(T,C),R^=T,R=u(R,13),R=i(R,5)+3864292196;switch(T=0,v){case 3:T^=p[O+2]<<16;case 2:T^=p[O+1]<<8;case 1:T^=p[O],T=i(T,B),T=u(T,15),T=i(T,C),R^=T}return R^=p.length,R=f(R),R>>>0},t.x86.hash128=function(p,g){if(t.inputValidation&&!n(p))return e;g=g||0;for(var v=p.length%16,P=p.length-v,R=g,T=g,B=g,C=g,O=0,A=0,x=0,D=0,G=597399067,ee=2869860233,Z=951274213,ae=2716044179,K=0;K<P;K=K+16)O=p[K]|p[K+1]<<8|p[K+2]<<16|p[K+3]<<24,A=p[K+4]|p[K+5]<<8|p[K+6]<<16|p[K+7]<<24,x=p[K+8]|p[K+9]<<8|p[K+10]<<16|p[K+11]<<24,D=p[K+12]|p[K+13]<<8|p[K+14]<<16|p[K+15]<<24,O=i(O,G),O=u(O,15),O=i(O,ee),R^=O,R=u(R,19),R+=T,R=i(R,5)+1444728091,A=i(A,ee),A=u(A,16),A=i(A,Z),T^=A,T=u(T,17),T+=B,T=i(T,5)+197830471,x=i(x,Z),x=u(x,17),x=i(x,ae),B^=x,B=u(B,15),B+=C,B=i(B,5)+2530024501,D=i(D,ae),D=u(D,18),D=i(D,G),C^=D,C=u(C,13),C+=R,C=i(C,5)+850148119;switch(O=0,A=0,x=0,D=0,v){case 15:D^=p[K+14]<<16;case 14:D^=p[K+13]<<8;case 13:D^=p[K+12],D=i(D,ae),D=u(D,18),D=i(D,G),C^=D;case 12:x^=p[K+11]<<24;case 11:x^=p[K+10]<<16;case 10:x^=p[K+9]<<8;case 9:x^=p[K+8],x=i(x,Z),x=u(x,17),x=i(x,ae),B^=x;case 8:A^=p[K+7]<<24;case 7:A^=p[K+6]<<16;case 6:A^=p[K+5]<<8;case 5:A^=p[K+4],A=i(A,ee),A=u(A,16),A=i(A,Z),T^=A;case 4:O^=p[K+3]<<24;case 3:O^=p[K+2]<<16;case 2:O^=p[K+1]<<8;case 1:O^=p[K],O=i(O,G),O=u(O,15),O=i(O,ee),R^=O}return R^=p.length,T^=p.length,B^=p.length,C^=p.length,R+=T,R+=B,R+=C,T+=R,B+=R,C+=R,R=f(R),T=f(T),B=f(B),C=f(C),R+=T,R+=B,R+=C,T+=R,B+=R,C+=R,("00000000"+(R>>>0).toString(16)).slice(-8)+("00000000"+(T>>>0).toString(16)).slice(-8)+("00000000"+(B>>>0).toString(16)).slice(-8)+("00000000"+(C>>>0).toString(16)).slice(-8)},t.x64.hash128=function(p,g){if(t.inputValidation&&!n(p))return e;g=g||0;for(var v=p.length%16,P=p.length-v,R=[0,g],T=[0,g],B=[0,0],C=[0,0],O=[2277735313,289559509],A=[1291169091,658871167],x=0;x<P;x=x+16)B=[p[x+4]|p[x+5]<<8|p[x+6]<<16|p[x+7]<<24,p[x]|p[x+1]<<8|p[x+2]<<16|p[x+3]<<24],C=[p[x+12]|p[x+13]<<8|p[x+14]<<16|p[x+15]<<24,p[x+8]|p[x+9]<<8|p[x+10]<<16|p[x+11]<<24],B=h(B,O),B=m(B,31),B=h(B,A),R=S(R,B),R=m(R,27),R=d(R,T),R=d(h(R,[0,5]),[0,1390208809]),C=h(C,A),C=m(C,33),C=h(C,O),T=S(T,C),T=m(T,31),T=d(T,R),T=d(h(T,[0,5]),[0,944331445]);switch(B=[0,0],C=[0,0],v){case 15:C=S(C,b([0,p[x+14]],48));case 14:C=S(C,b([0,p[x+13]],40));case 13:C=S(C,b([0,p[x+12]],32));case 12:C=S(C,b([0,p[x+11]],24));case 11:C=S(C,b([0,p[x+10]],16));case 10:C=S(C,b([0,p[x+9]],8));case 9:C=S(C,[0,p[x+8]]),C=h(C,A),C=m(C,33),C=h(C,O),T=S(T,C);case 8:B=S(B,b([0,p[x+7]],56));case 7:B=S(B,b([0,p[x+6]],48));case 6:B=S(B,b([0,p[x+5]],40));case 5:B=S(B,b([0,p[x+4]],32));case 4:B=S(B,b([0,p[x+3]],24));case 3:B=S(B,b([0,p[x+2]],16));case 2:B=S(B,b([0,p[x+1]],8));case 1:B=S(B,[0,p[x]]),B=h(B,O),B=m(B,31),B=h(B,A),R=S(R,B)}return R=S(R,[0,p.length]),T=S(T,[0,p.length]),R=d(R,T),T=d(T,R),R=_(R),T=_(T),R=d(R,T),T=d(T,R),("00000000"+(R[0]>>>0).toString(16)).slice(-8)+("00000000"+(R[1]>>>0).toString(16)).slice(-8)+("00000000"+(T[0]>>>0).toString(16)).slice(-8)+("00000000"+(T[1]>>>0).toString(16)).slice(-8)},typeof Ua<"u"?(typeof vu<"u"&&vu.exports&&(Ua=vu.exports=t),Ua.murmurHash3=t):typeof define=="function"&&define.amd?define([],function(){return t}):(t._murmurHash3=r.murmurHash3,t.noConflict=function(){return r.murmurHash3=t._murmurHash3,t._murmurHash3=e,t.noConflict=e,t},r.murmurHash3=t)})(Ua)});var ym=z((gx,mm)=>{mm.exports=pm()});var ir=z((Cx,_m)=>{"use strict";function wm(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function Cv(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return wm(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),wm(new i,t)}}_m.exports=Cv});var vm=z((xx,Sm)=>{"use strict";Sm.exports=xv;function xv(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,u=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(d,h){t[n]=function(b){if(u)if(u=!1,b)h(b);else{for(var S=new Array(arguments.length-1),_=0;_<S.length;)S[_++]=arguments[_];d.apply(null,S)}};try{r.apply(e||null,t)}catch(m){u&&(u=!1,h(m))}})}});var Am=z(Tm=>{"use strict";var Eu=Tm;Eu.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var wi=new Array(64),Rm=new Array(123);for(Pt=0;Pt<64;)Rm[wi[Pt]=Pt<26?Pt+65:Pt<52?Pt+71:Pt<62?Pt-4:Pt-59|43]=Pt++;var Pt;Eu.encode=function(e,t,n){for(var i=null,u=[],f=0,d=0,h;t<n;){var m=e[t++];switch(d){case 0:u[f++]=wi[m>>2],h=(m&3)<<4,d=1;break;case 1:u[f++]=wi[h|m>>4],h=(m&15)<<2,d=2;break;case 2:u[f++]=wi[h|m>>6],u[f++]=wi[m&63],d=0;break}f>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,u)),f=0)}return d&&(u[f++]=wi[h],u[f++]=61,d===1&&(u[f++]=61)),i?(f&&i.push(String.fromCharCode.apply(String,u.slice(0,f))),i.join("")):String.fromCharCode.apply(String,u.slice(0,f))};var Em="invalid encoding";Eu.decode=function(e,t,n){for(var i=n,u=0,f,d=0;d<e.length;){var h=e.charCodeAt(d++);if(h===61&&u>1)break;if((h=Rm[h])===void 0)throw Error(Em);switch(u){case 0:f=h,u=1;break;case 1:t[n++]=f<<2|(h&48)>>4,f=h,u=2;break;case 2:t[n++]=(f&15)<<4|(h&60)>>2,f=h,u=3;break;case 3:t[n++]=(f&3)<<6|h,u=0;break}}if(u===1)throw Error(Em);return n-i};Eu.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var xm=z((Bx,Cm)=>{"use strict";Cm.exports=Ru;function Ru(){this._listeners={}}Ru.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Ru.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};Ru.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var zm=z((Px,Om)=>{"use strict";Om.exports=km(km);function km(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(h,m,b){e[0]=h,m[b]=t[0],m[b+1]=t[1],m[b+2]=t[2],m[b+3]=t[3]}function u(h,m,b){e[0]=h,m[b]=t[3],m[b+1]=t[2],m[b+2]=t[1],m[b+3]=t[0]}r.writeFloatLE=n?i:u,r.writeFloatBE=n?u:i;function f(h,m){return t[0]=h[m],t[1]=h[m+1],t[2]=h[m+2],t[3]=h[m+3],e[0]}function d(h,m){return t[3]=h[m],t[2]=h[m+1],t[1]=h[m+2],t[0]=h[m+3],e[0]}r.readFloatLE=n?f:d,r.readFloatBE=n?d:f}():function(){function e(n,i,u,f){var d=i<0?1:0;if(d&&(i=-i),i===0)n(1/i>0?0:2147483648,u,f);else if(isNaN(i))n(2143289344,u,f);else if(i>34028234663852886e22)n((d<<31|2139095040)>>>0,u,f);else if(i<11754943508222875e-54)n((d<<31|Math.round(i/1401298464324817e-60))>>>0,u,f);else{var h=Math.floor(Math.log(i)/Math.LN2),m=Math.round(i*Math.pow(2,-h)*8388608)&8388607;n((d<<31|h+127<<23|m)>>>0,u,f)}}r.writeFloatLE=e.bind(null,Bm),r.writeFloatBE=e.bind(null,Pm);function t(n,i,u){var f=n(i,u),d=(f>>31)*2+1,h=f>>>23&255,m=f&8388607;return h===255?m?NaN:d*(1/0):h===0?d*1401298464324817e-60*m:d*Math.pow(2,h-150)*(m+8388608)}r.readFloatLE=t.bind(null,Im),r.readFloatBE=t.bind(null,Dm)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(h,m,b){e[0]=h,m[b]=t[0],m[b+1]=t[1],m[b+2]=t[2],m[b+3]=t[3],m[b+4]=t[4],m[b+5]=t[5],m[b+6]=t[6],m[b+7]=t[7]}function u(h,m,b){e[0]=h,m[b]=t[7],m[b+1]=t[6],m[b+2]=t[5],m[b+3]=t[4],m[b+4]=t[3],m[b+5]=t[2],m[b+6]=t[1],m[b+7]=t[0]}r.writeDoubleLE=n?i:u,r.writeDoubleBE=n?u:i;function f(h,m){return t[0]=h[m],t[1]=h[m+1],t[2]=h[m+2],t[3]=h[m+3],t[4]=h[m+4],t[5]=h[m+5],t[6]=h[m+6],t[7]=h[m+7],e[0]}function d(h,m){return t[7]=h[m],t[6]=h[m+1],t[5]=h[m+2],t[4]=h[m+3],t[3]=h[m+4],t[2]=h[m+5],t[1]=h[m+6],t[0]=h[m+7],e[0]}r.readDoubleLE=n?f:d,r.readDoubleBE=n?d:f}():function(){function e(n,i,u,f,d,h){var m=f<0?1:0;if(m&&(f=-f),f===0)n(0,d,h+i),n(1/f>0?0:2147483648,d,h+u);else if(isNaN(f))n(0,d,h+i),n(2146959360,d,h+u);else if(f>17976931348623157e292)n(0,d,h+i),n((m<<31|2146435072)>>>0,d,h+u);else{var b;if(f<22250738585072014e-324)b=f/5e-324,n(b>>>0,d,h+i),n((m<<31|b/4294967296)>>>0,d,h+u);else{var S=Math.floor(Math.log(f)/Math.LN2);S===1024&&(S=1023),b=f*Math.pow(2,-S),n(b*4503599627370496>>>0,d,h+i),n((m<<31|S+1023<<20|b*1048576&1048575)>>>0,d,h+u)}}}r.writeDoubleLE=e.bind(null,Bm,0,4),r.writeDoubleBE=e.bind(null,Pm,4,0);function t(n,i,u,f,d){var h=n(f,d+i),m=n(f,d+u),b=(m>>31)*2+1,S=m>>>20&2047,_=4294967296*(m&1048575)+h;return S===2047?_?NaN:b*(1/0):S===0?b*5e-324*_:b*Math.pow(2,S-1075)*(_+4503599627370496)}r.readDoubleLE=t.bind(null,Im,0,4),r.readDoubleBE=t.bind(null,Dm,4,0)}(),r}function Bm(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function Pm(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function Im(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function Dm(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var Lm=z((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var Um=z(Fm=>{"use strict";var fc=Fm;fc.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};fc.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var u=null,f=[],d=0,h;t<n;)h=e[t++],h<128?f[d++]=h:h>191&&h<224?f[d++]=(h&31)<<6|e[t++]&63:h>239&&h<365?(h=((h&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,f[d++]=55296+(h>>10),f[d++]=56320+(h&1023)):f[d++]=(h&15)<<12|(e[t++]&63)<<6|e[t++]&63,d>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,f)),d=0);return u?(d&&u.push(String.fromCharCode.apply(String,f.slice(0,d))),u.join("")):String.fromCharCode.apply(String,f.slice(0,d))};fc.write=function(e,t,n){for(var i=n,u,f,d=0;d<e.length;++d)u=e.charCodeAt(d),u<128?t[n++]=u:u<2048?(t[n++]=u>>6|192,t[n++]=u&63|128):(u&64512)===55296&&((f=e.charCodeAt(d+1))&64512)===56320?(u=65536+((u&1023)<<10)+(f&1023),++d,t[n++]=u>>18|240,t[n++]=u>>12&63|128,t[n++]=u>>6&63|128,t[n++]=u&63|128):(t[n++]=u>>12|224,t[n++]=u>>6&63|128,t[n++]=u&63|128);return n-i}});var Nm=z((Dx,qm)=>{"use strict";qm.exports=kv;function kv(r,e,t){var n=t||8192,i=n>>>1,u=null,f=n;return function(h){if(h<1||h>i)return r(h);f+h>n&&(u=r(n),f=0);var m=e.call(u,f,f+=h);return f&7&&(f=(f|7)+1),m}}});var Mm=z((Ox,Wm)=>{"use strict";Wm.exports=ve;var qa=pn();function ve(r,e){this.lo=r>>>0,this.hi=e>>>0}var so=ve.zero=new ve(0,0);so.toNumber=function(){return 0};so.zzEncode=so.zzDecode=function(){return this};so.length=function(){return 1};var Bv=ve.zeroHash="\0\0\0\0\0\0\0\0";ve.fromNumber=function(e){if(e===0)return so;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new ve(n,i)};ve.from=function(e){if(typeof e=="number")return ve.fromNumber(e);if(qa.isString(e))if(qa.Long)e=qa.Long.fromString(e);else return ve.fromNumber(parseInt(e,10));return e.low||e.high?new ve(e.low>>>0,e.high>>>0):so};ve.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};ve.prototype.toLong=function(e){return qa.Long?new qa.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var hn=String.prototype.charCodeAt;ve.fromHash=function(e){return e===Bv?so:new ve((hn.call(e,0)|hn.call(e,1)<<8|hn.call(e,2)<<16|hn.call(e,3)<<24)>>>0,(hn.call(e,4)|hn.call(e,5)<<8|hn.call(e,6)<<16|hn.call(e,7)<<24)>>>0)};ve.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};ve.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};ve.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};ve.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var pn=z(cc=>{"use strict";var H=cc;H.asPromise=vm();H.base64=Am();H.EventEmitter=xm();H.float=zm();H.inquire=Lm();H.utf8=Um();H.pool=Nm();H.LongBits=Mm();H.isNode=Boolean(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);H.global=H.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||cc;H.emptyArray=Object.freeze?Object.freeze([]):[];H.emptyObject=Object.freeze?Object.freeze({}):{};H.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};H.isString=function(e){return typeof e=="string"||e instanceof String};H.isObject=function(e){return e&&typeof e=="object"};H.isset=H.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};H.Buffer=function(){try{var r=H.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();H._Buffer_from=null;H._Buffer_allocUnsafe=null;H.newBuffer=function(e){return typeof e=="number"?H.Buffer?H._Buffer_allocUnsafe(e):new H.Array(e):H.Buffer?H._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};H.Array=typeof Uint8Array<"u"?Uint8Array:Array;H.Long=H.global.dcodeIO&&H.global.dcodeIO.Long||H.global.Long||H.inquire("long");H.key2Re=/^true|false|0|1$/;H.key32Re=/^-?(?:0|[1-9][0-9]*)$/;H.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;H.longToHash=function(e){return e?H.LongBits.from(e).toHash():H.LongBits.zeroHash};H.longFromHash=function(e,t){var n=H.LongBits.fromHash(e);return H.Long?H.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function jm(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}H.merge=jm;H.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function $m(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&jm(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return r}}),e.prototype.toString=function(){return this.name+": "+this.message},e}H.newError=$m;H.ProtocolError=$m("ProtocolError");H.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),u=i.length-1;u>-1;--u)if(t[i[u]]===1&&this[i[u]]!==void 0&&this[i[u]]!==null)return i[u]}};H.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};H.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};H._configure=function(){var r=H.Buffer;if(!r){H._Buffer_from=H._Buffer_allocUnsafe=null;return}H._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},H._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var gc=z((Lx,Gm)=>{"use strict";Gm.exports=te;var bt=pn(),dc,Tu=bt.LongBits,Hm=bt.base64,Vm=bt.utf8;function Na(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function pc(){}function Pv(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function te(){this.len=0,this.head=new Na(pc,0,0),this.tail=this.head,this.states=null}var Ym=function(){return bt.Buffer?function(){return(te.create=function(){return new dc})()}:function(){return new te}};te.create=Ym();te.alloc=function(e){return new bt.Array(e)};bt.Array!==Array&&(te.alloc=bt.pool(te.alloc,bt.Array.prototype.subarray));te.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Na(e,t,n),this.len+=t,this};function mc(r,e,t){e[t]=r&255}function Iv(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function yc(r,e){this.len=r,this.next=void 0,this.val=e}yc.prototype=Object.create(Na.prototype);yc.prototype.fn=Iv;te.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new yc((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};te.prototype.int32=function(e){return e<0?this._push(bc,10,Tu.fromNumber(e)):this.uint32(e)};te.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function bc(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}te.prototype.uint64=function(e){var t=Tu.from(e);return this._push(bc,t.length(),t)};te.prototype.int64=te.prototype.uint64;te.prototype.sint64=function(e){var t=Tu.from(e).zzEncode();return this._push(bc,t.length(),t)};te.prototype.bool=function(e){return this._push(mc,1,e?1:0)};function hc(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}te.prototype.fixed32=function(e){return this._push(hc,4,e>>>0)};te.prototype.sfixed32=te.prototype.fixed32;te.prototype.fixed64=function(e){var t=Tu.from(e);return this._push(hc,4,t.lo)._push(hc,4,t.hi)};te.prototype.sfixed64=te.prototype.fixed64;te.prototype.float=function(e){return this._push(bt.float.writeFloatLE,4,e)};te.prototype.double=function(e){return this._push(bt.float.writeDoubleLE,8,e)};var Dv=bt.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};te.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(mc,1,0);if(bt.isString(e)){var n=te.alloc(t=Hm.length(e));Hm.decode(e,n,0),e=n}return this.uint32(t)._push(Dv,t,e)};te.prototype.string=function(e){var t=Vm.length(e);return t?this.uint32(t)._push(Vm.write,t,e):this._push(mc,1,0)};te.prototype.fork=function(){return this.states=new Pv(this),this.head=this.tail=new Na(pc,0,0),this.len=0,this};te.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Na(pc,0,0),this.len=0),this};te.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};te.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};te._configure=function(r){dc=r,te.create=Ym(),dc._configure()}});var Jm=z((Fx,Km)=>{"use strict";Km.exports=ar;var Qm=gc();(ar.prototype=Object.create(Qm.prototype)).constructor=ar;var mn=pn();function ar(){Qm.call(this)}ar._configure=function(){ar.alloc=mn._Buffer_allocUnsafe,ar.writeBytesBuffer=mn.Buffer&&mn.Buffer.prototype instanceof Uint8Array&&mn.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};ar.prototype.bytes=function(e){mn.isString(e)&&(e=mn._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(ar.writeBytesBuffer,t,e),this};function Ov(r,e,t){r.length<40?mn.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}ar.prototype.string=function(e){var t=mn.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Ov,t,e),this};ar._configure()});var Sc=z((Ux,ry)=>{"use strict";ry.exports=pe;var sr=pn(),_c,ey=sr.LongBits,zv=sr.utf8;function It(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function pe(r){this.buf=r,this.pos=0,this.len=r.length}var Xm=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new pe(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new pe(e);throw Error("illegal buffer")},ty=function(){return sr.Buffer?function(t){return(pe.create=function(i){return sr.Buffer.isBuffer(i)?new _c(i):Xm(i)})(t)}:Xm};pe.create=ty();pe.prototype._slice=sr.Array.prototype.subarray||sr.Array.prototype.slice;pe.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,It(this,10);return e}}();pe.prototype.int32=function(){return this.uint32()|0};pe.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function wc(){var r=new ey(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw It(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw It(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}pe.prototype.bool=function(){return this.uint32()!==0};function Au(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}pe.prototype.fixed32=function(){if(this.pos+4>this.len)throw It(this,4);return Au(this.buf,this.pos+=4)};pe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw It(this,4);return Au(this.buf,this.pos+=4)|0};function Zm(){if(this.pos+8>this.len)throw It(this,8);return new ey(Au(this.buf,this.pos+=4),Au(this.buf,this.pos+=4))}pe.prototype.float=function(){if(this.pos+4>this.len)throw It(this,4);var e=sr.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};pe.prototype.double=function(){if(this.pos+8>this.len)throw It(this,4);var e=sr.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};pe.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw It(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};pe.prototype.string=function(){var e=this.bytes();return zv.read(e,0,e.length)};pe.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw It(this,e);this.pos+=e}else do if(this.pos>=this.len)throw It(this);while(this.buf[this.pos++]&128);return this};pe.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};pe._configure=function(r){_c=r,pe.create=ty(),_c._configure();var e=sr.Long?"toLong":"toNumber";sr.merge(pe.prototype,{int64:function(){return wc.call(this)[e](!1)},uint64:function(){return wc.call(this)[e](!0)},sint64:function(){return wc.call(this).zzDecode()[e](!1)},fixed64:function(){return Zm.call(this)[e](!0)},sfixed64:function(){return Zm.call(this)[e](!1)}})}});var ay=z((qx,iy)=>{"use strict";iy.exports=uo;var oy=Sc();(uo.prototype=Object.create(oy.prototype)).constructor=uo;var ny=pn();function uo(r){oy.call(this,r)}uo._configure=function(){ny.Buffer&&(uo.prototype._slice=ny.Buffer.prototype.slice)};uo.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};uo._configure()});var uy=z((Nx,sy)=>{"use strict";sy.exports=Wa;var vc=pn();(Wa.prototype=Object.create(vc.EventEmitter.prototype)).constructor=Wa;function Wa(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");vc.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Wa.prototype.rpcCall=function r(e,t,n,i,u){if(!i)throw TypeError("request must be specified");var f=this;if(!u)return vc.asPromise(r,f,e,t,n,i);if(!f.rpcImpl){setTimeout(function(){u(Error("already ended"))},0);return}try{return f.rpcImpl(e,t[f.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(h,m){if(h)return f.emit("error",h,e),u(h);if(m===null){f.end(!0);return}if(!(m instanceof n))try{m=n[f.responseDelimited?"decodeDelimited":"decode"](m)}catch(b){return f.emit("error",b,e),u(b)}return f.emit("data",m,e),u(null,m)})}catch(d){f.emit("error",d,e),setTimeout(function(){u(d)},0);return}};Wa.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var fy=z(ly=>{"use strict";var Lv=ly;Lv.Service=uy()});var dy=z((Mx,cy)=>{"use strict";cy.exports={}});var my=z(py=>{"use strict";var $e=py;$e.build="minimal";$e.Writer=gc();$e.BufferWriter=Jm();$e.Reader=Sc();$e.BufferReader=ay();$e.util=pn();$e.rpc=fy();$e.roots=dy();$e.configure=hy;function hy(){$e.util._configure(),$e.Writer._configure($e.BufferWriter),$e.Reader._configure($e.BufferReader)}hy()});var by=z(($x,yy)=>{"use strict";yy.exports=my()});var xu=z((tk,Ey)=>{"use strict";var Wv=async r=>{let e=[];for await(let t of r)e.push(t);return e};Ey.exports=Wv});var Tc=z((yk,Ly)=>{"use strict";var{Buffer:Ot}=require("buffer"),zy=Symbol.for("BufferList");function ue(r){if(!(this instanceof ue))return new ue(r);ue._init.call(this,r)}ue._init=function(e){Object.defineProperty(this,zy,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};ue.prototype._new=function(e){return new ue(e)};ue.prototype._offset=function(e){if(e===0)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){let i=t+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-t];t=i}};ue.prototype._reverseOffset=function(r){let e=r[0],t=r[1];for(let n=0;n<e;n++)t+=this._bufs[n].length;return t};ue.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]};ue.prototype.slice=function(e,t){return typeof e=="number"&&e<0&&(e+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,e,t)};ue.prototype.copy=function(e,t,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||Ot.alloc(0);let u=!!e,f=this._offset(n),d=i-n,h=d,m=u&&t||0,b=f[1];if(n===0&&i===this.length){if(!u)return this._bufs.length===1?this._bufs[0]:Ot.concat(this._bufs,this.length);for(let S=0;S<this._bufs.length;S++)this._bufs[S].copy(e,m),m+=this._bufs[S].length;return e}if(h<=this._bufs[f[0]].length-b)return u?this._bufs[f[0]].copy(e,t,b,b+h):this._bufs[f[0]].slice(b,b+h);u||(e=Ot.allocUnsafe(d));for(let S=f[0];S<this._bufs.length;S++){let _=this._bufs[S].length-b;if(h>_)this._bufs[S].copy(e,m,b),m+=_;else{this._bufs[S].copy(e,m,b,b+h),m+=_;break}h-=_,b&&(b=0)}return e.length>m?e.slice(0,m):e};ue.prototype.shallowSlice=function(e,t){if(e=e||0,t=typeof t!="number"?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let n=this._offset(e),i=this._offset(t),u=this._bufs.slice(n[0],i[0]+1);return i[1]===0?u.pop():u[u.length-1]=u[u.length-1].slice(0,i[1]),n[1]!==0&&(u[0]=u[0].slice(n[1])),this._new(u)};ue.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)};ue.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};ue.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e};ue.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(Ot.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(Ot.from(e));return this};ue.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};ue.prototype.indexOf=function(r,e,t){if(t===void 0&&typeof e=="string"&&(t=e,e=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=Ot.from([r]):typeof r=="string"?r=Ot.from(r,t):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=Ot.from(r.buffer,r.byteOffset,r.byteLength):Ot.isBuffer(r)||(r=Ot.from(r)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),r.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],u=n[1];for(;i<this._bufs.length;i++){let f=this._bufs[i];for(;u<f.length;)if(f.length-u>=r.length){let h=f.indexOf(r,u);if(h!==-1)return this._reverseOffset([i,h]);u=f.length-r.length+1}else{let h=this._reverseOffset([i,u]);if(this._match(h,r))return h;u++}u=0}return-1};ue.prototype._match=function(r,e){if(this.length-r<e.length)return!1;for(let t=0;t<e.length;t++)if(this.get(r+t)!==e[t])return!1;return!0};(function(){let r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in r)(function(t){r[t]===null?ue.prototype[t]=function(n,i){return this.slice(n,n+i)[t](0,i)}:ue.prototype[t]=function(n=0){return this.slice(n,n+r[t])[t](0)}})(e)})();ue.prototype._isBufferList=function(e){return e instanceof ue||ue.isBufferList(e)};ue.isBufferList=function(e){return e!=null&&e[zy]};Ly.exports=ue});var Uy=z((bk,Fy)=>{var Ac=class{constructor(e,t=12,n=8*1024,i=32*1024,u=64,f){this.bits=t,this.min=n,this.max=i,this.asModule=e,this.rabin=new e.Rabin(t,n,i,u,f),this.polynomial=f}fingerprint(e){let{__retain:t,__release:n,__allocArray:i,__getInt32Array:u,Int32Array_ID:f,Uint8Array_ID:d}=this.asModule,h=new Int32Array(Math.ceil(e.length/this.min)),m=t(i(f,h)),b=t(i(d,e)),S=this.rabin.fingerprint(b,m),_=u(S);n(b),n(m);let p=_.indexOf(0);return p>=0?_.subarray(0,p):_}};Fy.exports=Ac});var $y=z($a=>{"use strict";var Kv=typeof BigUint64Array<"u",Ma=Symbol(),ja=1024;function qy(r,e){let t=new Uint32Array(r),n=new Uint16Array(r);var i=t[e+-4>>>2]>>>1,u=e>>>1;if(i<=ja)return String.fromCharCode.apply(String,n.subarray(u,u+i));let f=[];do{let d=n[u+ja-1],h=d>=55296&&d<56320?ja-1:ja;f.push(String.fromCharCode.apply(String,n.subarray(u,u+=h))),i-=h}while(i>ja);return f.join("")+String.fromCharCode.apply(String,n.subarray(u,u+i))}function Cc(r){let e={};function t(i,u){return i?qy(i.buffer,u):"<yet unknown>"}let n=r.env=r.env||{};return n.abort=n.abort||function(u,f,d,h){let m=e.memory||n.memory;throw Error("abort: "+t(m,u)+" at "+t(m,f)+":"+d+":"+h)},n.trace=n.trace||function(u,f){let d=e.memory||n.memory;console.log("trace: "+t(d,u)+(f?" ":"")+Array.prototype.slice.call(arguments,2,2+f).join(", "))},r.Math=r.Math||Math,r.Date=r.Date||Date,e}function xc(r,e){let t=e.exports,n=t.memory,i=t.table,u=t.__alloc,f=t.__retain,d=t.__rtti_base||-1;function h(A){let x=new Uint32Array(n.buffer),D=x[d>>>2];if((A>>>=0)>=D)throw Error("invalid id: "+A);return x[(d+4>>>2)+A*2]}function m(A){let x=new Uint32Array(n.buffer),D=x[d>>>2];if((A>>>=0)>=D)throw Error("invalid id: "+A);return x[(d+4>>>2)+A*2+1]}function b(A){return 31-Math.clz32(A>>>5&31)}function S(A){return 31-Math.clz32(A>>>14&31)}function _(A){let x=A.length,D=u(x<<1,1),G=new Uint16Array(n.buffer);for(var ee=0,Z=D>>>1;ee<x;++ee)G[Z+ee]=A.charCodeAt(ee);return D}r.__allocString=_;function p(A){let x=n.buffer;if(new Uint32Array(x)[A+-8>>>2]!==1)throw Error("not a string: "+A);return qy(x,A)}r.__getString=p;function g(A,x,D){let G=n.buffer;if(D)switch(A){case 2:return new Float32Array(G);case 3:return new Float64Array(G)}else switch(A){case 0:return new(x?Int8Array:Uint8Array)(G);case 1:return new(x?Int16Array:Uint16Array)(G);case 2:return new(x?Int32Array:Uint32Array)(G);case 3:return new(x?BigInt64Array:BigUint64Array)(G)}throw Error("unsupported align: "+A)}function v(A,x){let D=h(A);if(!(D&3))throw Error("not an array: "+A+" @ "+D);let G=b(D),ee=x.length,Z=u(ee<<G,0),ae=u(D&2?16:12,A),K=new Uint32Array(n.buffer);K[ae+0>>>2]=f(Z),K[ae+4>>>2]=Z,K[ae+8>>>2]=ee<<G,D&2&&(K[ae+12>>>2]=ee);let Vr=g(G,D&1024,D&2048);if(D&8192)for(let Yr=0;Yr<ee;++Yr)Vr[(Z>>>G)+Yr]=f(x[Yr]);else Vr.set(x,Z>>>G);return ae}r.__allocArray=v;function P(A){let x=new Uint32Array(n.buffer),D=x[A+-8>>>2],G=h(D);if(!(G&1))throw Error("not an array: "+D);let ee=b(G);var Z=x[A+4>>>2];let ae=G&2?x[A+12>>>2]:x[Z+-4>>>2]>>>ee;return g(ee,G&1024,G&2048).subarray(Z>>>=ee,Z+ae)}r.__getArrayView=P;function R(A){let x=P(A),D=x.length,G=new Array(D);for(let ee=0;ee<D;ee++)G[ee]=x[ee];return G}r.__getArray=R;function T(A){let x=n.buffer,D=new Uint32Array(x)[A+-4>>>2];return x.slice(A,A+D)}r.__getArrayBuffer=T;function B(A,x,D){return new A(C(A,x,D))}function C(A,x,D){let G=n.buffer,ee=new Uint32Array(G),Z=ee[D+4>>>2];return new A(G,Z,ee[Z+-4>>>2]>>>x)}r.__getInt8Array=B.bind(null,Int8Array,0),r.__getInt8ArrayView=C.bind(null,Int8Array,0),r.__getUint8Array=B.bind(null,Uint8Array,0),r.__getUint8ArrayView=C.bind(null,Uint8Array,0),r.__getUint8ClampedArray=B.bind(null,Uint8ClampedArray,0),r.__getUint8ClampedArrayView=C.bind(null,Uint8ClampedArray,0),r.__getInt16Array=B.bind(null,Int16Array,1),r.__getInt16ArrayView=C.bind(null,Int16Array,1),r.__getUint16Array=B.bind(null,Uint16Array,1),r.__getUint16ArrayView=C.bind(null,Uint16Array,1),r.__getInt32Array=B.bind(null,Int32Array,2),r.__getInt32ArrayView=C.bind(null,Int32Array,2),r.__getUint32Array=B.bind(null,Uint32Array,2),r.__getUint32ArrayView=C.bind(null,Uint32Array,2),Kv&&(r.__getInt64Array=B.bind(null,BigInt64Array,3),r.__getInt64ArrayView=C.bind(null,BigInt64Array,3),r.__getUint64Array=B.bind(null,BigUint64Array,3),r.__getUint64ArrayView=C.bind(null,BigUint64Array,3)),r.__getFloat32Array=B.bind(null,Float32Array,2),r.__getFloat32ArrayView=C.bind(null,Float32Array,2),r.__getFloat64Array=B.bind(null,Float64Array,3),r.__getFloat64ArrayView=C.bind(null,Float64Array,3);function O(A,x){let D=new Uint32Array(n.buffer);var G=D[A+-8>>>2];if(G<=D[d>>>2])do if(G==x)return!0;while(G=m(G));return!1}return r.__instanceof=O,r.memory=r.memory||n,r.table=r.table||i,jy(t,r)}function Ny(r){return typeof Response<"u"&&r instanceof Response}async function Wy(r,e){return Ny(r=await r)?My(r,e):xc(Cc(e||(e={})),await WebAssembly.instantiate(r instanceof WebAssembly.Module?r:await WebAssembly.compile(r),e))}$a.instantiate=Wy;function Jv(r,e){return xc(Cc(e||(e={})),new WebAssembly.Instance(r instanceof WebAssembly.Module?r:new WebAssembly.Module(r),e))}$a.instantiateSync=Jv;async function My(r,e){return WebAssembly.instantiateStreaming?xc(Cc(e||(e={})),(await WebAssembly.instantiateStreaming(r,e)).instance):Wy(Ny(r=await r)?r.arrayBuffer():r,e)}$a.instantiateStreaming=My;function jy(r,e){var t=e?Object.create(e):{},n=r.__argumentsLength?function(i){r.__argumentsLength.value=i}:r.__setArgumentsLength||r.__setargc||function(){};for(let i in r){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let u=r[i],f=i.split("."),d=t;for(;f.length>1;){let b=f.shift();Object.prototype.hasOwnProperty.call(d,b)||(d[b]={}),d=d[b]}let h=f[0],m=h.indexOf("#");if(m>=0){let b=h.substring(0,m),S=d[b];if(typeof S>"u"||!S.prototype){let _=function(...p){return _.wrap(_.prototype.constructor(0,...p))};_.prototype={valueOf:function(){return this[Ma]}},_.wrap=function(p){return Object.create(_.prototype,{[Ma]:{value:p,writable:!1}})},S&&Object.getOwnPropertyNames(S).forEach(p=>Object.defineProperty(_,p,Object.getOwnPropertyDescriptor(S,p))),d[b]=_}if(h=h.substring(m+1),d=d[b].prototype,/^(get|set):/.test(h)){if(!Object.prototype.hasOwnProperty.call(d,h=h.substring(4))){let _=r[i.replace("set:","get:")],p=r[i.replace("get:","set:")];Object.defineProperty(d,h,{get:function(){return _(this[Ma])},set:function(g){p(this[Ma],g)},enumerable:!0})}}else h==="constructor"?(d[h]=(..._)=>(n(_.length),u(..._))).original=u:(d[h]=function(..._){return n(_.length),u(this[Ma],..._)}).original=u}else/^(get|set):/.test(h)?Object.prototype.hasOwnProperty.call(d,h=h.substring(4))||Object.defineProperty(d,h,{get:r[i.replace("set:","get:")],set:r[i.replace("get:","set:")],enumerable:!0}):typeof u=="function"&&u!==n?(d[h]=(...b)=>(n(b.length),u(...b))).original=u:d[h]=u}return t}$a.demangle=jy});var Vy=z((wk,Hy)=>{var{instantiateSync:Xv}=$y(),Zv=require("fs");kc.supported=typeof WebAssembly<"u";async function kc(r={}){return kc.supported?Xv(Zv.readFileSync(__dirname+"/../dist/rabin.wasm"),r):null}Hy.exports=kc});var Qy=z((_k,Gy)=>{var Yy=Uy(),eE=Vy(),tE=async(r,e,t,n,i)=>{let u=await eE();return new Yy(u,r,e,t,n,i)};Gy.exports={Rabin:Yy,create:tE}});var lb=z((rB,ub)=>{"use strict";ub.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,t,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let t=this._internalPositionFor(e,!0);if(t!==-1)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,i=t;for(;n<this.length;){let u=this.get(n);i=e(i,u,n),n++}return i}find(e){let t=0,n,i;for(;t<this.length&&!n;)i=this.get(t),n=e(i),t++;return n?i:void 0}_internalPositionFor(e,t){let n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],u=e-n*7;if(!((i&1<<u)>0))return-1;let d=this._bitArrays.slice(0,n).reduce(CE,0),h=~(4294967295<<u+1),m=sb(i&h);return d+m-1}_bytePosFor(e,t){let n=Math.floor(e/7),i=n+1;for(;!t&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-t*7}_unsetBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-t*7)}_setInternalPos(e,t,n,i){let u=this._data,f=[t,n];if(i)this._sortData(),u[e]=f;else{if(u.length)if(u[u.length-1][0]>=t)u.push(f);else if(u[0][0]<=t)u.unshift(f);else{let d=Math.round(u.length/2);this._data=u.slice(0,d).concat(f).concat(u.slice(d))}else this._data.push(f);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(xE),this._changedData=!1}bitField(){let e=[],t=8,n=0,i=0,u,f=this._bitArrays.slice();for(;f.length||n;){n===0&&(u=f.shift(),n=7);let h=Math.min(n,t),m=~(255<<h);i|=(u&m)<<8-t,u=u>>>h,n-=h,t-=h,(!t||!n&&!f.length)&&(e.push(i),i=0,t=8)}for(var d=e.length-1;d>0&&e[d]===0;d--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(kE)}};function CE(r,e){return r+sb(e)}function sb(r){let e=r;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function xE(r,e){return r[0]-e[0]}function kE(r){return r[1]}});var cb=z((nB,fb)=>{"use strict";function BE(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var u=r.charAt(i),f=u.charCodeAt(0);if(t[f]!==255)throw new TypeError(u+" is ambiguous");t[f]=i}var d=r.length,h=r.charAt(0),m=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function S(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var v=0,P=0,R=0,T=g.length;R!==T&&g[R]===0;)R++,v++;for(var B=(T-R)*b+1>>>0,C=new Uint8Array(B);R!==T;){for(var O=g[R],A=0,x=B-1;(O!==0||A<P)&&x!==-1;x--,A++)O+=256*C[x]>>>0,C[x]=O%d>>>0,O=O/d>>>0;if(O!==0)throw new Error("Non-zero carry");P=A,R++}for(var D=B-P;D!==B&&C[D]===0;)D++;for(var G=h.repeat(v);D<B;++D)G+=r.charAt(C[D]);return G}function _(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var v=0;if(g[v]!==" "){for(var P=0,R=0;g[v]===h;)P++,v++;for(var T=(g.length-v)*m+1>>>0,B=new Uint8Array(T);g[v];){var C=t[g.charCodeAt(v)];if(C===255)return;for(var O=0,A=T-1;(C!==0||O<R)&&A!==-1;A--,O++)C+=d*B[A]>>>0,B[A]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");R=O,v++}if(g[v]!==" "){for(var x=T-R;x!==T&&B[x]===0;)x++;for(var D=new Uint8Array(P+(T-x)),G=P;x!==T;)D[G++]=B[x++];return D}}}function p(g){var v=_(g);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:_,decode:p}}var PE=BE,IE=PE;fb.exports=IE});var lr=z(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});var db=new Uint8Array(0),DE=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),OE=r=>{let e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):db},zE=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},LE=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},FE=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),UE=r=>new TextEncoder().encode(r),qE=r=>new TextDecoder().decode(r);ur.coerce=LE;ur.empty=db;ur.equals=zE;ur.fromHex=OE;ur.fromString=UE;ur.isBinary=FE;ur.toHex=DE;ur.toString=qE});var fr=z(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});var NE=cb(),WE=lr(),Hc=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Vc=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return Gc(this,e)}},Yc=class{constructor(e){this.decoders=e}or(e){return Gc(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Gc=(r,e)=>new Yc({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Iu=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Hc(e,t,n),this.decoder=new Vc(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Qc=({name:r,prefix:e,encode:t,decode:n})=>new Iu(r,e,t,n),ME=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=NE(t,e);return Qc({prefix:r,name:e,encode:n,decode:u=>WE.coerce(i(u))})},jE=(r,e,t,n)=>{let i={};for(let b=0;b<e.length;++b)i[e[b]]=b;let u=r.length;for(;r[u-1]==="=";)--u;let f=new Uint8Array(u*t/8|0),d=0,h=0,m=0;for(let b=0;b<u;++b){let S=i[r[b]];if(S===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<t|S,d+=t,d>=8&&(d-=8,f[m++]=255&h>>d)}if(d>=t||255&h<<8-d)throw new SyntaxError("Unexpected end of data");return f},$E=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,u="",f=0,d=0;for(let h=0;h<r.length;++h)for(d=d<<8|r[h],f+=8;f>t;)f-=t,u+=e[i&d>>f];if(f&&(u+=e[i&d<<t-f]),n)for(;u.length*t&7;)u+="=";return u},HE=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Qc({prefix:e,name:r,encode(i){return $E(i,n,t)},decode(i){return jE(i,n,t,r)}});fo.Codec=Iu;fo.baseX=ME;fo.from=Qc;fo.or=Gc;fo.rfc4648=HE});var pb=z(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var VE=fr(),hb=lr(),YE=VE.from({prefix:"\0",name:"identity",encode:r=>hb.toString(r),decode:r=>hb.fromString(r)});Kc.identity=YE});var mb=z(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var GE=fr(),QE=GE.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});Jc.base2=QE});var yb=z(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});var KE=fr(),JE=KE.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});Xc.base8=JE});var bb=z(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});var XE=fr(),ZE=XE.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});Zc.base10=ZE});var wb=z(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});var gb=fr(),eR=gb.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tR=gb.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});Du.base16=eR;Du.base16upper=tR});var ed=z(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});var Lr=fr(),rR=Lr.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nR=Lr.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),oR=Lr.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iR=Lr.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aR=Lr.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sR=Lr.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),uR=Lr.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lR=Lr.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fR=Lr.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});zt.base32=rR;zt.base32hex=aR;zt.base32hexpad=uR;zt.base32hexpadupper=lR;zt.base32hexupper=sR;zt.base32pad=oR;zt.base32padupper=iR;zt.base32upper=nR;zt.base32z=fR});var Sb=z(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});var _b=fr(),cR=_b.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dR=_b.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});Ou.base36=cR;Ou.base36upper=dR});var td=z(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});var vb=fr(),hR=vb.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pR=vb.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});zu.base58btc=hR;zu.base58flickr=pR});var Eb=z(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});var Lu=fr(),mR=Lu.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yR=Lu.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),bR=Lu.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gR=Lu.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});vi.base64=mR;vi.base64pad=yR;vi.base64url=bR;vi.base64urlpad=gR});var xb=z((mB,Cb)=>{"use strict";var wR=Ab,Rb=128,_R=127,SR=~_R,vR=Math.pow(2,31);function Ab(r,e,t){e=e||[],t=t||0;for(var n=t;r>=vR;)e[t++]=r&255|Rb,r/=128;for(;r&SR;)e[t++]=r&255|Rb,r>>>=7;return e[t]=r|0,Ab.bytes=t-n+1,e}var ER=rd,RR=128,Tb=127;function rd(r,n){var t=0,n=n||0,i=0,u=n,f,d=r.length;do{if(u>=d)throw rd.bytes=0,new RangeError("Could not decode varint");f=r[u++],t+=i<28?(f&Tb)<<i:(f&Tb)*Math.pow(2,i),i+=7}while(f>=RR);return rd.bytes=u-n,t}var TR=Math.pow(2,7),AR=Math.pow(2,14),CR=Math.pow(2,21),xR=Math.pow(2,28),kR=Math.pow(2,35),BR=Math.pow(2,42),PR=Math.pow(2,49),IR=Math.pow(2,56),DR=Math.pow(2,63),OR=function(r){return r<TR?1:r<AR?2:r<CR?3:r<xR?4:r<kR?5:r<BR?6:r<PR?7:r<IR?8:r<DR?9:10},zR={encode:wR,decode:ER,encodingLength:OR},LR=zR,FR=LR;Cb.exports=FR});var Ya=z(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});var Fu=xb(),UR=r=>[Fu.decode(r),Fu.decode.bytes],qR=(r,e,t=0)=>(Fu.encode(r,e,t),e),NR=r=>Fu.encodingLength(r);Va.decode=UR;Va.encodeTo=qR;Va.encodingLength=NR});var Ti=z(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});var kb=lr(),Ei=Ya(),WR=(r,e)=>{let t=e.byteLength,n=Ei.encodingLength(r),i=n+Ei.encodingLength(t),u=new Uint8Array(i+t);return Ei.encodeTo(r,u,0),Ei.encodeTo(t,u,n),u.set(e,i),new Ga(r,t,e,u)},MR=r=>{let e=kb.coerce(r),[t,n]=Ei.decode(e),[i,u]=Ei.decode(e.subarray(n)),f=e.subarray(n+u);if(f.byteLength!==i)throw new Error("Incorrect length");return new Ga(t,i,f,e)},jR=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&kb.equals(r.bytes,e.bytes),Ga=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};Ri.Digest=Ga;Ri.create=WR;Ri.decode=MR;Ri.equals=jR});var Nu=z(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var Bb=Ti(),$R=({name:r,code:e,encode:t})=>new Uu(r,e,t),Uu=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Bb.create(this.code,t):t.then(n=>Bb.create(this.code,n))}else throw Error("Unknown type, must be binary type")}};qu.Hasher=Uu;qu.from=$R});var Ob=z(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var HR=require("crypto"),Pb=Nu(),Ib=lr();function VR(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var Db=VR(HR),YR=Pb.from({name:"sha2-256",code:18,encode:r=>Ib.coerce(Db.default.createHash("sha256").update(r).digest())}),GR=Pb.from({name:"sha2-512",code:19,encode:r=>Ib.coerce(Db.default.createHash("sha512").update(r).digest())});Wu.sha256=YR;Wu.sha512=GR});var Fb=z(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var QR=lr(),KR=Ti(),zb=0,JR="identity",Lb=QR.coerce,XR=r=>KR.create(zb,Lb(r)),ZR={code:zb,name:JR,encode:Lb,digest:XR};nd.identity=ZR});var qb=z(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});var Ub=lr(),e1="raw",t1=85,r1=r=>Ub.coerce(r),n1=r=>Ub.coerce(r);Ai.code=t1;Ai.decode=n1;Ai.encode=r1;Ai.name=e1});var Nb=z(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});var o1=new TextEncoder,i1=new TextDecoder,a1="json",s1=512,u1=r=>o1.encode(JSON.stringify(r)),l1=r=>JSON.parse(i1.decode(r));Ci.code=s1;Ci.decode=l1;Ci.encode=u1;Ci.name=a1});var id=z(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var Ka=Ya(),Mu=Ti(),bn=td(),Hu=ed(),f1=lr(),Ee=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:$u,byteLength:$u,code:ju,version:ju,multihash:ju,bytes:ju,_baseCache:$u,asCID:$u})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Qa)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==p1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ee.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Mu.create(e,t);return Ee.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Mu.equals(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return d1(t,i,e||bn.base58btc.encoder);default:return h1(t,i,e||Hu.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return y1(/^0\.0/,b1),!!(e&&(e[Mb]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ee)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:u}=e;return new Ee(t,n,i,u||Wb(t,n,i.bytes))}else if(e!=null&&e[Mb]===!0){let{version:t,multihash:n,code:i}=e,u=Mu.decode(n);return Ee.create(t,i,u)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Qa)throw new Error(`Version 0 CID must use dag-pb (code: ${Qa}) block encoding`);return new Ee(e,t,n,n.bytes)}case 1:{let i=Wb(e,t,n.bytes);return new Ee(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Ee.create(0,Qa,e)}static createV1(e,t){return Ee.create(1,e,t)}static decode(e){let[t,n]=Ee.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Ee.inspectBytes(e),n=t.size-t.multihashSize,i=f1.coerce(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let u=i.subarray(t.multihashSize-t.digestSize),f=new Mu.Digest(t.multihashCode,t.digestSize,u,i);return[t.version===0?Ee.createV0(f):Ee.createV1(t.codec,f),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[S,_]=Ka.decode(e.subarray(t));return t+=_,S},i=n(),u=Qa;if(i===18?(i=0,t=0):i===1&&(u=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let f=t,d=n(),h=n(),m=t+h,b=m-f;return{version:i,codec:u,multihashCode:d,digestSize:h,multihashSize:b,size:m}}static parse(e,t){let[n,i]=c1(e,t),u=Ee.decode(i);return u._baseCache.set(n,e),u}},c1=(r,e)=>{switch(r[0]){case"Q":{let t=e||bn.base58btc;return[bn.base58btc.prefix,t.decode(`${bn.base58btc.prefix}${r}`)]}case bn.base58btc.prefix:{let t=e||bn.base58btc;return[bn.base58btc.prefix,t.decode(r)]}case Hu.base32.prefix:{let t=e||Hu.base32;return[Hu.base32.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},d1=(r,e,t)=>{let{prefix:n}=t;if(n!==bn.base58btc.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let u=t.encode(r).slice(1);return e.set(n,u),u}else return i},h1=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let u=t.encode(r);return e.set(n,u),u}else return i},Qa=112,p1=18,Wb=(r,e,t)=>{let n=Ka.encodingLength(r),i=n+Ka.encodingLength(e),u=new Uint8Array(i+t.byteLength);return Ka.encodeTo(r,u,0),Ka.encodeTo(e,u,n),u.set(t,i),u},Mb=Symbol.for("@ipld/js-cid/CID"),ju={writable:!1,configurable:!1,enumerable:!0},$u={writable:!1,enumerable:!1,configurable:!1},m1="0.0.0-dev",y1=(r,e)=>{if(r.test(m1))console.warn(e);else throw new Error(e)},b1=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;od.CID=Ee});var jb=z(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});var g1=id(),w1=Ya(),_1=lr(),S1=Nu(),v1=Ti();co.CID=g1.CID;co.varint=w1;co.bytes=_1;co.hasher=S1;co.digest=v1});var $b=z(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});var E1=pb(),R1=mb(),T1=yb(),A1=bb(),C1=wb(),x1=ed(),k1=Sb(),B1=td(),P1=Eb(),I1=Ob(),D1=Fb(),O1=qb(),z1=Nb();jb();var L1=id(),F1=Nu(),U1=Ti(),q1=Ya(),N1=lr(),W1={...E1,...R1,...T1,...A1,...C1,...x1,...k1,...B1,...P1},M1={...I1,...D1},j1={raw:O1,json:z1};cr.CID=L1.CID;cr.hasher=F1;cr.digest=U1;cr.varint=q1;cr.bytes=N1;cr.bases=W1;cr.codecs=j1;cr.hashes=M1});var Qb=z((AB,Gb)=>{"use strict";var Hb=$b();function Yb(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var Vb=Yb("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),ad=Yb("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),$1={utf8:Vb,"utf-8":Vb,hex:Hb.bases.base16,latin1:ad,ascii:ad,binary:ad,...Hb.bases};Gb.exports=$1});var Kb=z(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var H1=Qb();function V1(r,e="utf8"){let t=H1[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}sd.fromString=V1});var Zb=z((xB,Xb)=>{"use strict";var Y1=lb(),{fromString:G1}=Kb(),gt=class{constructor(e,t,n=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new Y1,this.key=null}async put(e,t){let n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){let t=await this._findChild(e);if(t)return t.value}async del(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);n&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce((t,n)=>n instanceof gt?t+n.leafCount():t+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let t of e)t instanceof gt?yield*t.eachLeafSeries():yield t;return[]}serialize(e,t){let n=[];return t(this._children.reduce((i,u,f)=>(u&&(u instanceof gt?i.push(u.serialize(e,t)):i.push(e(u,f))),i),n))}asyncTransform(e,t){return Jb(this,e,t)}toJSON(){return this.serialize(K1,J1)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof gt)&&n&&n.key===e)return n}async _findPlace(e){let t=this._options.hash(typeof e=="string"?G1(e):e),n=await t.take(this._options.bits),i=this._children.get(n);return i instanceof gt?i._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:i}}async _findNewBucketAndPos(e){let t=await this._findPlace(e);if(t.existingChild&&t.existingChild.key!==e){let n=new gt(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,n);let i=await n._findPlace(t.existingChild.hash);return i.bucket._putAt(i,t.existingChild.key,t.existingChild.value),n._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(Q1);if(e&&!(e instanceof gt)){let t=e.hash;t.untake(this._options.bits);let n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function Q1(r){return Boolean(r)}function K1(r,e){return r.key}function J1(r){return r}async function Jb(r,e,t){let n=[];for(let i of r._children.compactArray())if(i instanceof gt)await Jb(i,e,t);else{let u=await e(i);n.push({bitField:r._children.bitField(),children:u})}return t(n)}Xb.exports=gt});var tg=z((BB,eg)=>{"use strict";var X1=[255,254,252,248,240,224,192,128],Z1=[1,3,7,15,31,63,127,255];eg.exports=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e,n=0;for(;t&&this._haveBits();){let i=this._value[this._currentBytePos],u=this._currentBitPos+1,f=Math.min(u,t),d=eT(i,u-f,f);n=(n<<f)+d,t-=f,this._currentBitPos-=f,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function eT(r,e,t){let n=tT(e,t);return(r&n)>>>e}function tT(r,e){return X1[r]&Z1[Math.min(e+r-1,7)]}});var rg=z(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});function rT(r,e){e||(e=r.reduce((i,u)=>i+u.length,0));let t=new Uint8Array(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}ud.concat=rT});var ng=z((IB,ld)=>{"use strict";var nT=tg(),{concat:oT}=rg();function iT(r){function e(t){return t instanceof Ja?t:new Ja(t,r)}return e}var Ja=class{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){let i=this._buffers[this._currentBufferIndex],u=Math.min(i.availableBits(),t),f=i.take(u);n=(n<<u)+f,t-=u,this._availableBits-=u,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),t);n.untake(i),t-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth?oT([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new nT(t);this._buffers.push(n),this._availableBits+=n.availableBits()}};ld.exports=iT;ld.exports.InfiniteHash=Ja});var ag=z((DB,ig)=>{"use strict";var og=Zb(),aT=ng();function sT(r){if(!r||!r.hashFn)throw new Error("please define an options.hashFn");let e={bits:r.bits||8,hash:aT(r.hashFn)};return new og(e)}ig.exports={createHAMT:sT,Bucket:og}});var Xa=z((XB,yg)=>{"use strict";async function*dT(r,e={}){let t=r.getReader();try{for(;;){let n=await t.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&t.cancel(),t.releaseLock()}}yg.exports=dT});var wg=z((ZB,gg)=>{"use strict";var bg=Xa();function hT(r){return typeof r.stream=="function"?bg(r.stream()):bg(new Response(r).body)}gg.exports=hT});var Yu=z((eP,_g)=>{"use strict";function pT(r){let[e,t]=r[Symbol.asyncIterator]?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length?{done:!1,value:n.shift()}:e.next(),[t](){return this}}}_g.exports=pT});var cd=z((tP,Sg)=>{"use strict";var mT=async function*(r,e){for await(let t of r)yield e(t)};Sg.exports=mT});var qg=z((SP,Ug)=>{"use strict";var _T=async r=>{for await(let e of r);};Ug.exports=_T});var Wg=z((vP,Ng)=>{"use strict";var ST=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};Ng.exports=ST});var jg=z((EP,Mg)=>{"use strict";var vT=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};Mg.exports=vT});var Kg=z((gd,Qg)=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});function Gg(r,e,t){t===void 0&&(t=!1),t&&(e=e/r,r=1);var n=[],i=0,u=0,f,d=function(){var h=i+e,m=Date.now();if(m<h){f!==void 0&&clearTimeout(f),f=setTimeout(d,h-m);return}i=m,u=0;for(var b=0,S=n.splice(0,r);b<S.length;b++){var _=S[b];u++,_()}n.length?f=setTimeout(d,e):f=void 0};return function(h){return new Promise(function(m,b){var S=function(){return Promise.resolve().then(h).then(m).catch(b)},_=Date.now();f===void 0&&_-i>e&&(i=_,u=0),u++<r?S():(n.push(S),f===void 0&&(f=setTimeout(d,i+e-_)))})}}Qg.exports=Gg;gd.default=Gg});var Xg=z((HP,Jg)=>{"use strict";function ET(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let e=r.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let t=r.substring(5,e).split(";"),n="",i=!1,u=t[0]||"text/plain",f=u;for(let b=1;b<t.length;b++)t[b]==="base64"?i=!0:(f+=`;${t[b]}`,t[b].indexOf("charset=")===0&&(n=t[b].substring(8)));!t[0]&&!n.length&&(f+=";charset=US-ASCII",n="US-ASCII");let d=i?"base64":"ascii",h=unescape(r.substring(e+1)),m=Buffer.from(h,d);return m.type=u,m.typeFull=f,m.charset=n,m}Jg.exports=ET});var ew=z((tl,Zg)=>{(function(r,e){typeof tl=="object"&&typeof Zg<"u"?e(tl):typeof define=="function"&&define.amd?define(["exports"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.WebStreamsPolyfill={}))})(tl,function(r){"use strict";var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(o){return"Symbol("+o+")"};function t(){}function n(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}var i=n();function u(o){return typeof o=="object"&&o!==null||typeof o=="function"}var f=t,d=Promise,h=Promise.prototype.then,m=Promise.resolve.bind(d),b=Promise.reject.bind(d);function S(o){return new d(o)}function _(o){return m(o)}function p(o){return b(o)}function g(o,a,l){return h.call(o,a,l)}function v(o,a,l){g(g(o,a,l),void 0,f)}function P(o,a){v(o,a)}function R(o,a){v(o,void 0,a)}function T(o,a,l){return g(o,a,l)}function B(o){g(o,void 0,f)}var C=function(){var o=i&&i.queueMicrotask;if(typeof o=="function")return o;var a=_(void 0);return function(l){return g(a,l)}}();function O(o,a,l){if(typeof o!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(o,a,l)}function A(o,a,l){try{return _(O(o,a,l))}catch(c){return p(c)}}var x=16384,D=function(){function o(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(o.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),o.prototype.push=function(a){var l=this._back,c=l;l._elements.length===x-1&&(c={_elements:[],_next:void 0}),l._elements.push(a),c!==l&&(this._back=c,l._next=c),++this._size},o.prototype.shift=function(){var a=this._front,l=a,c=this._cursor,y=c+1,w=a._elements,E=w[c];return y===x&&(l=a._next,y=0),--this._size,this._cursor=y,a!==l&&(this._front=l),w[c]=void 0,E},o.prototype.forEach=function(a){for(var l=this._cursor,c=this._front,y=c._elements;(l!==y.length||c._next!==void 0)&&!(l===y.length&&(c=c._next,y=c._elements,l=0,y.length===0));)a(y[l]),++l},o.prototype.peek=function(){var a=this._front,l=this._cursor;return a._elements[l]},o}();function G(o,a){o._ownerReadableStream=a,a._reader=o,a._state==="readable"?K(o):a._state==="closed"?Yr(o):Vr(o,a._storedError)}function ee(o,a){var l=o._ownerReadableStream;return Ce(l,a)}function Z(o){o._ownerReadableStream._state==="readable"?Rn(o,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Pl(o,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),o._ownerReadableStream._reader=void 0,o._ownerReadableStream=void 0}function ae(o){return new TypeError("Cannot "+o+" a stream using a released reader")}function K(o){o._closedPromise=S(function(a,l){o._closedPromise_resolve=a,o._closedPromise_reject=l})}function Vr(o,a){K(o),Rn(o,a)}function Yr(o){K(o),Fi(o)}function Rn(o,a){o._closedPromise_reject!==void 0&&(B(o._closedPromise),o._closedPromise_reject(a),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0)}function Pl(o,a){Vr(o,a)}function Fi(o){o._closedPromise_resolve!==void 0&&(o._closedPromise_resolve(void 0),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0)}var Ui=e("[[AbortSteps]]"),qi=e("[[ErrorSteps]]"),Tn=e("[[CancelSteps]]"),An=e("[[PullSteps]]"),Ni=Number.isFinite||function(o){return typeof o=="number"&&isFinite(o)},Il=Math.trunc||function(o){return o<0?Math.ceil(o):Math.floor(o)};function Dl(o){return typeof o=="object"||typeof o=="function"}function be(o,a){if(o!==void 0&&!Dl(o))throw new TypeError(a+" is not an object.")}function fe(o,a){if(typeof o!="function")throw new TypeError(a+" is not a function.")}function Ol(o){return typeof o=="object"&&o!==null||typeof o=="function"}function Wi(o,a){if(!Ol(o))throw new TypeError(a+" is not an object.")}function ge(o,a,l){if(o===void 0)throw new TypeError("Parameter "+a+" is required in '"+l+"'.")}function Cn(o,a,l){if(o===void 0)throw new TypeError(a+" is required in '"+l+"'.")}function xn(o){return Number(o)}function Mi(o){return o===0?0:o}function zl(o){return Mi(Il(o))}function ji(o,a){var l=0,c=Number.MAX_SAFE_INTEGER,y=Number(o);if(y=Mi(y),!Ni(y))throw new TypeError(a+" is not a finite number");if(y=zl(y),y<l||y>c)throw new TypeError(a+" is outside the accepted range of "+l+" to "+c+", inclusive");return!Ni(y)||y===0?0:y}function kn(o,a){if(!Ae(o))throw new TypeError(a+" is not a ReadableStream.")}function Ge(o){return new St(o)}function $i(o,a){o._reader._readRequests.push(a)}function Bn(o,a,l){var c=o._reader,y=c._readRequests.shift();l?y._closeSteps():y._chunkSteps(a)}function br(o){return o._reader._readRequests.length}function Hi(o){var a=o._reader;return!(a===void 0||!Te(a))}var St=function(){function o(a){if(ge(a,1,"ReadableStreamDefaultReader"),kn(a,"First parameter"),ye(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");G(this,a),this._readRequests=new D}return Object.defineProperty(o.prototype,"closed",{get:function(){return Te(this)?this._closedPromise:p(gr("closed"))},enumerable:!1,configurable:!0}),o.prototype.cancel=function(a){return a===void 0&&(a=void 0),Te(this)?this._ownerReadableStream===void 0?p(ae("cancel")):ee(this,a):p(gr("cancel"))},o.prototype.read=function(){if(!Te(this))return p(gr("read"));if(this._ownerReadableStream===void 0)return p(ae("read from"));var a,l,c=S(function(w,E){a=w,l=E}),y={_chunkSteps:function(w){return a({value:w,done:!1})},_closeSteps:function(){return a({value:void 0,done:!0})},_errorSteps:function(w){return l(w)}};return vt(this,y),c},o.prototype.releaseLock=function(){if(!Te(this))throw gr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Z(this)}},o}();Object.defineProperties(St.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(St.prototype,e.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Te(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_readRequests")?!1:o instanceof St}function vt(o,a){var l=o._ownerReadableStream;l._disturbed=!0,l._state==="closed"?a._closeSteps():l._state==="errored"?a._errorSteps(l._storedError):l._readableStreamController[An](a)}function gr(o){return new TypeError("ReadableStreamDefaultReader.prototype."+o+" can only be used on a ReadableStreamDefaultReader")}var To,Pn;typeof e.asyncIterator=="symbol"&&(Pn=(To={},To[e.asyncIterator]=function(){return this},To),Object.defineProperty(Pn,e.asyncIterator,{enumerable:!1}));var Vi=function(){function o(a,l){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=l}return o.prototype.next=function(){var a=this,l=function(){return a._nextSteps()};return this._ongoingPromise=this._ongoingPromise?T(this._ongoingPromise,l,l):l(),this._ongoingPromise},o.prototype.return=function(a){var l=this,c=function(){return l._returnSteps(a)};return this._ongoingPromise?T(this._ongoingPromise,c,c):c()},o.prototype._nextSteps=function(){var a=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var l=this._reader;if(l._ownerReadableStream===void 0)return p(ae("iterate"));var c,y,w=S(function(I,F){c=I,y=F}),E={_chunkSteps:function(I){a._ongoingPromise=void 0,C(function(){return c({value:I,done:!1})})},_closeSteps:function(){a._ongoingPromise=void 0,a._isFinished=!0,Z(l),c({value:void 0,done:!0})},_errorSteps:function(I){a._ongoingPromise=void 0,a._isFinished=!0,Z(l),y(I)}};return vt(l,E),w},o.prototype._returnSteps=function(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;var l=this._reader;if(l._ownerReadableStream===void 0)return p(ae("finish iterating"));if(!this._preventCancel){var c=ee(l,a);return Z(l),T(c,function(){return{value:a,done:!0}})}return Z(l),_({value:a,done:!0})},o}(),ps={next:function(){return Yi(this)?this._asyncIteratorImpl.next():p(Gi("next"))},return:function(o){return Yi(this)?this._asyncIteratorImpl.return(o):p(Gi("return"))}};Pn!==void 0&&Object.setPrototypeOf(ps,Pn);function ms(o,a){var l=Ge(o),c=new Vi(l,a),y=Object.create(ps);return y._asyncIteratorImpl=c,y}function Yi(o){if(!u(o)||!Object.prototype.hasOwnProperty.call(o,"_asyncIteratorImpl"))return!1;try{return o._asyncIteratorImpl instanceof Vi}catch{return!1}}function Gi(o){return new TypeError("ReadableStreamAsyncIterator."+o+" can only be used on a ReadableSteamAsyncIterator")}var Gr=Number.isNaN||function(o){return o!==o};function Qr(o){return o.slice()}function Ll(o,a,l,c,y){new Uint8Array(o).set(new Uint8Array(l,c,y),a)}function Qi(o){return o}function In(o){return!1}function ys(o,a,l){if(o.slice)return o.slice(a,l);var c=l-a,y=new ArrayBuffer(c);return Ll(y,0,o,a,c),y}function bs(o){return!(typeof o!="number"||Gr(o)||o<0)}function Ao(o){var a=ys(o.buffer,o.byteOffset,o.byteOffset+o.byteLength);return new Uint8Array(a)}function Dn(o){var a=o._queue.shift();return o._queueTotalSize-=a.size,o._queueTotalSize<0&&(o._queueTotalSize=0),a.value}function Ki(o,a,l){if(!bs(l)||l===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");o._queue.push({value:a,size:l}),o._queueTotalSize+=l}function Ut(o){var a=o._queue.peek();return a.value}function Me(o){o._queue=new D,o._queueTotalSize=0}var at=function(){function o(){throw new TypeError("Illegal constructor")}return Object.defineProperty(o.prototype,"view",{get:function(){if(!Rt(this))throw _r("view");return this._view},enumerable:!1,configurable:!0}),o.prototype.respond=function(a){if(!Rt(this))throw _r("respond");if(ge(a,1,"respond"),a=ji(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");In(this._view.buffer),wr(this._associatedReadableByteStreamController,a)},o.prototype.respondWithNewView=function(a){if(!Rt(this))throw _r("respondWithNewView");if(ge(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");In(a.buffer),Un(this._associatedReadableByteStreamController,a)},o}();Object.defineProperties(at.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(at.prototype,e.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var je=function(){function o(){throw new TypeError("Illegal constructor")}return Object.defineProperty(o.prototype,"byobRequest",{get:function(){if(!Et(this))throw Kr("byobRequest");return Do(this)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"desiredSize",{get:function(){if(!Et(this))throw Kr("desiredSize");return Fn(this)},enumerable:!1,configurable:!0}),o.prototype.close=function(){if(!Et(this))throw Kr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError("The stream (in "+a+" state) is not in the readable state and cannot be closed");Wt(this)},o.prototype.enqueue=function(a){if(!Et(this))throw Kr("enqueue");if(ge(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var l=this._controlledReadableByteStream._state;if(l!=="readable")throw new TypeError("The stream (in "+l+" state) is not in the readable state and cannot be enqueued to");Ie(this,a)},o.prototype.error=function(a){if(a===void 0&&(a=void 0),!Et(this))throw Kr("error");Oe(this,a)},o.prototype[Tn]=function(a){Co(this),Me(this);var l=this._cancelAlgorithm(a);return Nt(this),l},o.prototype[An]=function(a){var l=this._controlledReadableByteStream;if(this._queueTotalSize>0){var c=this._queue.shift();this._queueTotalSize-=c.byteLength,ko(this);var y=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);a._chunkSteps(y);return}var w=this._autoAllocateChunkSize;if(w!==void 0){var E=void 0;try{E=new ArrayBuffer(w)}catch(F){a._errorSteps(F);return}var I={buffer:E,bufferByteLength:w,byteOffset:0,byteLength:w,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(I)}$i(l,a),qt(this)},o}();Object.defineProperties(je.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(je.prototype,e.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Et(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledReadableByteStream")?!1:o instanceof je}function Rt(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_associatedReadableByteStreamController")?!1:o instanceof at}function qt(o){var a=Io(o);if(!!a){if(o._pulling){o._pullAgain=!0;return}o._pulling=!0;var l=o._pullAlgorithm();v(l,function(){o._pulling=!1,o._pullAgain&&(o._pullAgain=!1,qt(o))},function(c){Oe(o,c)})}}function Co(o){Bo(o),o._pendingPullIntos=new D}function xo(o,a){var l=!1;o._state==="closed"&&(l=!0);var c=On(a);a.readerType==="default"?Bn(o,c,l):vs(o,c,l)}function On(o){var a=o.bytesFilled,l=o.elementSize;return new o.viewConstructor(o.buffer,o.byteOffset,a/l)}function zn(o,a,l,c){o._queue.push({buffer:a,byteOffset:l,byteLength:c}),o._queueTotalSize+=c}function Ji(o,a){var l=a.elementSize,c=a.bytesFilled-a.bytesFilled%l,y=Math.min(o._queueTotalSize,a.byteLength-a.bytesFilled),w=a.bytesFilled+y,E=w-w%l,I=y,F=!1;E>c&&(I=E-a.bytesFilled,F=!0);for(var N=o._queue;I>0;){var W=N.peek(),Y=Math.min(I,W.byteLength),re=a.byteOffset+a.bytesFilled;Ll(a.buffer,re,W.buffer,W.byteOffset,Y),W.byteLength===Y?N.shift():(W.byteOffset+=Y,W.byteLength-=Y),o._queueTotalSize-=Y,Xi(o,Y,a),I-=Y}return F}function Xi(o,a,l){l.bytesFilled+=a}function ko(o){o._queueTotalSize===0&&o._closeRequested?(Nt(o),on(o._controlledReadableByteStream)):qt(o)}function Bo(o){o._byobRequest!==null&&(o._byobRequest._associatedReadableByteStreamController=void 0,o._byobRequest._view=null,o._byobRequest=null)}function gs(o){for(;o._pendingPullIntos.length>0;){if(o._queueTotalSize===0)return;var a=o._pendingPullIntos.peek();Ji(o,a)&&(Po(o),xo(o._controlledReadableByteStream,a))}}function Fl(o,a,l){var c=o._controlledReadableByteStream,y=1;a.constructor!==DataView&&(y=a.constructor.BYTES_PER_ELEMENT);var w=a.constructor,E=a.buffer,I={buffer:E,bufferByteLength:E.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:y,viewConstructor:w,readerType:"byob"};if(o._pendingPullIntos.length>0){o._pendingPullIntos.push(I),Ss(c,l);return}if(c._state==="closed"){var F=new w(I.buffer,I.byteOffset,0);l._closeSteps(F);return}if(o._queueTotalSize>0){if(Ji(o,I)){var N=On(I);ko(o),l._chunkSteps(N);return}if(o._closeRequested){var W=new TypeError("Insufficient bytes to fill elements in the given buffer");Oe(o,W),l._errorSteps(W);return}}o._pendingPullIntos.push(I),Ss(c,l),qt(o)}function Ul(o,a){var l=o._controlledReadableByteStream;if(Sr(l))for(;Oo(l)>0;){var c=Po(o);xo(l,c)}}function ws(o,a,l){if(Xi(o,a,l),!(l.bytesFilled<l.elementSize)){Po(o);var c=l.bytesFilled%l.elementSize;if(c>0){var y=l.byteOffset+l.bytesFilled,w=ys(l.buffer,y-c,y);zn(o,w,0,w.byteLength)}l.bytesFilled-=c,xo(o._controlledReadableByteStream,l),gs(o)}}function Ln(o,a){var l=o._pendingPullIntos.peek();Bo(o);var c=o._controlledReadableByteStream._state;c==="closed"?Ul(o):ws(o,a,l),qt(o)}function Po(o){var a=o._pendingPullIntos.shift();return a}function Io(o){var a=o._controlledReadableByteStream;if(a._state!=="readable"||o._closeRequested||!o._started)return!1;if(Hi(a)&&br(a)>0||Sr(a)&&Oo(a)>0)return!0;var l=Fn(o);return l>0}function Nt(o){o._pullAlgorithm=void 0,o._cancelAlgorithm=void 0}function Wt(o){var a=o._controlledReadableByteStream;if(!(o._closeRequested||a._state!=="readable")){if(o._queueTotalSize>0){o._closeRequested=!0;return}if(o._pendingPullIntos.length>0){var l=o._pendingPullIntos.peek();if(l.bytesFilled>0){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Oe(o,c),c}}Nt(o),on(a)}}function Ie(o,a){var l=o._controlledReadableByteStream;if(!(o._closeRequested||l._state!=="readable")){var c=a.buffer,y=a.byteOffset,w=a.byteLength,E=c;if(o._pendingPullIntos.length>0){var I=o._pendingPullIntos.peek();In(I.buffer),I.buffer=I.buffer}if(Bo(o),Hi(l))if(br(l)===0)zn(o,E,y,w);else{o._pendingPullIntos.length>0&&Po(o);var F=new Uint8Array(E,y,w);Bn(l,F,!1)}else Sr(l)?(zn(o,E,y,w),gs(o)):zn(o,E,y,w);qt(o)}}function Oe(o,a){var l=o._controlledReadableByteStream;l._state==="readable"&&(Co(o),Me(o),Nt(o),Jt(l,a))}function Do(o){if(o._byobRequest===null&&o._pendingPullIntos.length>0){var a=o._pendingPullIntos.peek(),l=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),c=Object.create(at.prototype);Zi(c,o,l),o._byobRequest=c}return o._byobRequest}function Fn(o){var a=o._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:o._strategyHWM-o._queueTotalSize}function wr(o,a){var l=o._pendingPullIntos.peek(),c=o._controlledReadableByteStream._state;if(c==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(l.bytesFilled+a>l.byteLength)throw new RangeError("bytesWritten out of range")}l.buffer=l.buffer,Ln(o,a)}function Un(o,a){var l=o._pendingPullIntos.peek(),c=o._controlledReadableByteStream._state;if(c==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(l.byteOffset+l.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(l.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(l.bytesFilled+a.byteLength>l.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var y=a.byteLength;l.buffer=a.buffer,Ln(o,y)}function _s(o,a,l,c,y,w,E){a._controlledReadableByteStream=o,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,Me(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=w,a._pullAlgorithm=c,a._cancelAlgorithm=y,a._autoAllocateChunkSize=E,a._pendingPullIntos=new D,o._readableStreamController=a;var I=l();v(_(I),function(){a._started=!0,qt(a)},function(F){Oe(a,F)})}function ql(o,a,l){var c=Object.create(je.prototype),y=function(){},w=function(){return _(void 0)},E=function(){return _(void 0)};a.start!==void 0&&(y=function(){return a.start(c)}),a.pull!==void 0&&(w=function(){return a.pull(c)}),a.cancel!==void 0&&(E=function(F){return a.cancel(F)});var I=a.autoAllocateChunkSize;if(I===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");_s(o,c,y,w,E,l,I)}function Zi(o,a,l){o._associatedReadableByteStreamController=a,o._view=l}function _r(o){return new TypeError("ReadableStreamBYOBRequest.prototype."+o+" can only be used on a ReadableStreamBYOBRequest")}function Kr(o){return new TypeError("ReadableByteStreamController.prototype."+o+" can only be used on a ReadableByteStreamController")}function ea(o){return new Qe(o)}function Ss(o,a){o._reader._readIntoRequests.push(a)}function vs(o,a,l){var c=o._reader,y=c._readIntoRequests.shift();l?y._closeSteps(a):y._chunkSteps(a)}function Oo(o){return o._reader._readIntoRequests.length}function Sr(o){var a=o._reader;return!(a===void 0||!Mt(a))}var Qe=function(){function o(a){if(ge(a,1,"ReadableStreamBYOBReader"),kn(a,"First parameter"),ye(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Et(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");G(this,a),this._readIntoRequests=new D}return Object.defineProperty(o.prototype,"closed",{get:function(){return Mt(this)?this._closedPromise:p(jt("closed"))},enumerable:!1,configurable:!0}),o.prototype.cancel=function(a){return a===void 0&&(a=void 0),Mt(this)?this._ownerReadableStream===void 0?p(ae("cancel")):ee(this,a):p(jt("cancel"))},o.prototype.read=function(a){if(!Mt(this))return p(jt("read"));if(!ArrayBuffer.isView(a))return p(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return p(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return p(new TypeError("view's buffer must have non-zero byteLength"));if(In(a.buffer),this._ownerReadableStream===void 0)return p(ae("read from"));var l,c,y=S(function(E,I){l=E,c=I}),w={_chunkSteps:function(E){return l({value:E,done:!1})},_closeSteps:function(E){return l({value:E,done:!0})},_errorSteps:function(E){return c(E)}};return qn(this,a,w),y},o.prototype.releaseLock=function(){if(!Mt(this))throw jt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Z(this)}},o}();Object.defineProperties(Qe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,e.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Mt(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_readIntoRequests")?!1:o instanceof Qe}function qn(o,a,l){var c=o._ownerReadableStream;c._disturbed=!0,c._state==="errored"?l._errorSteps(c._storedError):Fl(c._readableStreamController,a,l)}function jt(o){return new TypeError("ReadableStreamBYOBReader.prototype."+o+" can only be used on a ReadableStreamBYOBReader")}function $t(o,a){var l=o.highWaterMark;if(l===void 0)return a;if(Gr(l)||l<0)throw new RangeError("Invalid highWaterMark");return l}function vr(o){var a=o.size;return a||function(){return 1}}function zo(o,a){be(o,a);var l=o?.highWaterMark,c=o?.size;return{highWaterMark:l===void 0?void 0:xn(l),size:c===void 0?void 0:Nl(c,a+" has member 'size' that")}}function Nl(o,a){return fe(o,a),function(l){return xn(o(l))}}function Wl(o,a){be(o,a);var l=o?.abort,c=o?.close,y=o?.start,w=o?.type,E=o?.write;return{abort:l===void 0?void 0:Ml(l,o,a+" has member 'abort' that"),close:c===void 0?void 0:jl(c,o,a+" has member 'close' that"),start:y===void 0?void 0:$l(y,o,a+" has member 'start' that"),write:E===void 0?void 0:Es(E,o,a+" has member 'write' that"),type:w}}function Ml(o,a,l){return fe(o,l),function(c){return A(o,a,[c])}}function jl(o,a,l){return fe(o,l),function(){return A(o,a,[])}}function $l(o,a,l){return fe(o,l),function(c){return O(o,a,[c])}}function Es(o,a,l){return fe(o,l),function(c,y){return A(o,a,[c,y])}}function Rs(o,a){if(!Ke(o))throw new TypeError(a+" is not a WritableStream.")}function Hl(o){if(typeof o!="object"||o===null)return!1;try{return typeof o.aborted=="boolean"}catch{return!1}}var Vl=typeof AbortController=="function";function Nn(){if(Vl)return new AbortController}var Jr=function(){function o(a,l){a===void 0&&(a={}),l===void 0&&(l={}),a===void 0?a=null:Wi(a,"First parameter");var c=zo(l,"Second parameter"),y=Wl(a,"First parameter");Er(this);var w=y.type;if(w!==void 0)throw new RangeError("Invalid type is specified");var E=vr(c),I=$t(c,1);Uo(this,y,I,E)}return Object.defineProperty(o.prototype,"locked",{get:function(){if(!Ke(this))throw en("locked");return Tt(this)},enumerable:!1,configurable:!0}),o.prototype.abort=function(a){return a===void 0&&(a=void 0),Ke(this)?Tt(this)?p(new TypeError("Cannot abort a stream that already has a writer")):Wn(this,a):p(en("abort"))},o.prototype.close=function(){return Ke(this)?Tt(this)?p(new TypeError("Cannot close a stream that already has a writer")):ut(this)?p(new TypeError("Cannot close an already-closing stream")):Cs(this):p(en("close"))},o.prototype.getWriter=function(){if(!Ke(this))throw en("getWriter");return Ts(this)},o}();Object.defineProperties(Jr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Jr.prototype,e.toStringTag,{value:"WritableStream",configurable:!0});function Ts(o){return new Je(o)}function As(o,a,l,c,y,w){y===void 0&&(y=1),w===void 0&&(w=function(){return 1});var E=Object.create(Jr.prototype);Er(E);var I=Object.create(Ht.prototype);return Ds(E,I,o,a,l,c,y,w),E}function Er(o){o._state="writable",o._storedError=void 0,o._writer=void 0,o._writableStreamController=void 0,o._writeRequests=new D,o._inFlightWriteRequest=void 0,o._closeRequest=void 0,o._inFlightCloseRequest=void 0,o._pendingAbortRequest=void 0,o._backpressure=!1}function Ke(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_writableStreamController")?!1:o instanceof Jr}function Tt(o){return o._writer!==void 0}function Wn(o,a){var l;if(o._state==="closed"||o._state==="errored")return _(void 0);o._writableStreamController._abortReason=a,(l=o._writableStreamController._abortController)===null||l===void 0||l.abort();var c=o._state;if(c==="closed"||c==="errored")return _(void 0);if(o._pendingAbortRequest!==void 0)return o._pendingAbortRequest._promise;var y=!1;c==="erroring"&&(y=!0,a=void 0);var w=S(function(E,I){o._pendingAbortRequest={_promise:void 0,_resolve:E,_reject:I,_reason:a,_wasAlreadyErroring:y}});return o._pendingAbortRequest._promise=w,y||jn(o,a),w}function Cs(o){var a=o._state;if(a==="closed"||a==="errored")return p(new TypeError("The stream (in "+a+" state) is not in the writable state and cannot be closed"));var l=S(function(y,w){var E={_resolve:y,_reject:w};o._closeRequest=E}),c=o._writer;return c!==void 0&&o._backpressure&&a==="writable"&&jo(c),Zl(o._writableStreamController),l}function ta(o){var a=S(function(l,c){var y={_resolve:l,_reject:c};o._writeRequests.push(y)});return a}function Mn(o,a){var l=o._state;if(l==="writable"){jn(o,a);return}ra(o)}function jn(o,a){var l=o._writableStreamController;o._state="erroring",o._storedError=a;var c=o._writer;c!==void 0&&Ps(c,a),!Kl(o)&&l._started&&ra(o)}function ra(o){o._state="errored",o._writableStreamController[qi]();var a=o._storedError;if(o._writeRequests.forEach(function(y){y._reject(a)}),o._writeRequests=new D,o._pendingAbortRequest===void 0){Xr(o);return}var l=o._pendingAbortRequest;if(o._pendingAbortRequest=void 0,l._wasAlreadyErroring){l._reject(a),Xr(o);return}var c=o._writableStreamController[Ui](l._reason);v(c,function(){l._resolve(),Xr(o)},function(y){l._reject(y),Xr(o)})}function Yl(o){o._inFlightWriteRequest._resolve(void 0),o._inFlightWriteRequest=void 0}function Gl(o,a){o._inFlightWriteRequest._reject(a),o._inFlightWriteRequest=void 0,Mn(o,a)}function Ql(o){o._inFlightCloseRequest._resolve(void 0),o._inFlightCloseRequest=void 0;var a=o._state;a==="erroring"&&(o._storedError=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._resolve(),o._pendingAbortRequest=void 0)),o._state="closed";var l=o._writer;l!==void 0&&Vn(l)}function st(o,a){o._inFlightCloseRequest._reject(a),o._inFlightCloseRequest=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._reject(a),o._pendingAbortRequest=void 0),Mn(o,a)}function ut(o){return!(o._closeRequest===void 0&&o._inFlightCloseRequest===void 0)}function Kl(o){return!(o._inFlightWriteRequest===void 0&&o._inFlightCloseRequest===void 0)}function Jl(o){o._inFlightCloseRequest=o._closeRequest,o._closeRequest=void 0}function Lo(o){o._inFlightWriteRequest=o._writeRequests.shift()}function Xr(o){o._closeRequest!==void 0&&(o._closeRequest._reject(o._storedError),o._closeRequest=void 0);var a=o._writer;a!==void 0&&ua(a,o._storedError)}function Rr(o,a){var l=o._writer;l!==void 0&&a!==o._backpressure&&(a?tf(l):jo(l)),o._backpressure=a}var Je=function(){function o(a){if(ge(a,1,"WritableStreamDefaultWriter"),Rs(a,"First parameter"),Tt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;var l=a._state;if(l==="writable")!ut(a)&&a._backpressure?tn(this):la(this),Hn(this);else if(l==="erroring")Mo(this,a._storedError),Hn(this);else if(l==="closed")la(this),sa(this);else{var c=a._storedError;Mo(this,c),Ls(this,c)}}return Object.defineProperty(o.prototype,"closed",{get:function(){return Tr(this)?this._closedPromise:p(Xe("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"desiredSize",{get:function(){if(!Tr(this))throw Xe("desiredSize");if(this._ownerWritableStream===void 0)throw Vt("desiredSize");return Is(this)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ready",{get:function(){return Tr(this)?this._readyPromise:p(Xe("ready"))},enumerable:!1,configurable:!0}),o.prototype.abort=function(a){return a===void 0&&(a=void 0),Tr(this)?this._ownerWritableStream===void 0?p(Vt("abort")):xs(this,a):p(Xe("abort"))},o.prototype.close=function(){if(!Tr(this))return p(Xe("close"));var a=this._ownerWritableStream;return a===void 0?p(Vt("close")):ut(a)?p(new TypeError("Cannot close an already-closing stream")):ks(this)},o.prototype.releaseLock=function(){if(!Tr(this))throw Xe("releaseLock");var a=this._ownerWritableStream;a!==void 0&&na(this)},o.prototype.write=function(a){return a===void 0&&(a=void 0),Tr(this)?this._ownerWritableStream===void 0?p(Vt("write to")):oa(this,a):p(Xe("write"))},o}();Object.defineProperties(Je.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,e.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Tr(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_ownerWritableStream")?!1:o instanceof Je}function xs(o,a){var l=o._ownerWritableStream;return Wn(l,a)}function ks(o){var a=o._ownerWritableStream;return Cs(a)}function Xl(o){var a=o._ownerWritableStream,l=a._state;return ut(a)||l==="closed"?_(void 0):l==="errored"?p(a._storedError):ks(o)}function Bs(o,a){o._closedPromiseState==="pending"?ua(o,a):Fs(o,a)}function Ps(o,a){o._readyPromiseState==="pending"?Us(o,a):fa(o,a)}function Is(o){var a=o._ownerWritableStream,l=a._state;return l==="errored"||l==="erroring"?null:l==="closed"?0:zs(a._writableStreamController)}function na(o){var a=o._ownerWritableStream,l=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ps(o,l),Bs(o,l),a._writer=void 0,o._ownerWritableStream=void 0}function oa(o,a){var l=o._ownerWritableStream,c=l._writableStreamController,y=Os(c,a);if(l!==o._ownerWritableStream)return p(Vt("write to"));var w=l._state;if(w==="errored")return p(l._storedError);if(ut(l)||w==="closed")return p(new TypeError("The stream is closing or closed and cannot be written to"));if(w==="erroring")return p(l._storedError);var E=ta(l);return No(c,a,y),E}var Ar={},Ht=function(){function o(){throw new TypeError("Illegal constructor")}return Object.defineProperty(o.prototype,"abortReason",{get:function(){if(!Fo(this))throw At("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"signal",{get:function(){if(!Fo(this))throw At("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),o.prototype.error=function(a){if(a===void 0&&(a=void 0),!Fo(this))throw At("error");var l=this._controlledWritableStream._state;l==="writable"&&$n(this,a)},o.prototype[Ui]=function(a){var l=this._abortAlgorithm(a);return qo(this),l},o.prototype[qi]=function(){Me(this)},o}();Object.defineProperties(Ht.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ht.prototype,e.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Fo(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledWritableStream")?!1:o instanceof Ht}function Ds(o,a,l,c,y,w,E,I){a._controlledWritableStream=o,o._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,Me(a),a._abortReason=void 0,a._abortController=Nn(),a._started=!1,a._strategySizeAlgorithm=I,a._strategyHWM=E,a._writeAlgorithm=c,a._closeAlgorithm=y,a._abortAlgorithm=w;var F=Wo(a);Rr(o,F);var N=l(),W=_(N);v(W,function(){a._started=!0,Zr(a)},function(Y){a._started=!0,Mn(o,Y)})}function Uo(o,a,l,c){var y=Object.create(Ht.prototype),w=function(){},E=function(){return _(void 0)},I=function(){return _(void 0)},F=function(){return _(void 0)};a.start!==void 0&&(w=function(){return a.start(y)}),a.write!==void 0&&(E=function(N){return a.write(N,y)}),a.close!==void 0&&(I=function(){return a.close()}),a.abort!==void 0&&(F=function(N){return a.abort(N)}),Ds(o,y,w,E,I,F,l,c)}function qo(o){o._writeAlgorithm=void 0,o._closeAlgorithm=void 0,o._abortAlgorithm=void 0,o._strategySizeAlgorithm=void 0}function Zl(o){Ki(o,Ar,0),Zr(o)}function Os(o,a){try{return o._strategySizeAlgorithm(a)}catch(l){return ia(o,l),1}}function zs(o){return o._strategyHWM-o._queueTotalSize}function No(o,a,l){try{Ki(o,a,l)}catch(w){ia(o,w);return}var c=o._controlledWritableStream;if(!ut(c)&&c._state==="writable"){var y=Wo(o);Rr(c,y)}Zr(o)}function Zr(o){var a=o._controlledWritableStream;if(!!o._started&&a._inFlightWriteRequest===void 0){var l=a._state;if(l==="erroring"){ra(a);return}if(o._queue.length!==0){var c=Ut(o);c===Ar?ef(o):aa(o,c)}}}function ia(o,a){o._controlledWritableStream._state==="writable"&&$n(o,a)}function ef(o){var a=o._controlledWritableStream;Jl(a),Dn(o);var l=o._closeAlgorithm();qo(o),v(l,function(){Ql(a)},function(c){st(a,c)})}function aa(o,a){var l=o._controlledWritableStream;Lo(l);var c=o._writeAlgorithm(a);v(c,function(){Yl(l);var y=l._state;if(Dn(o),!ut(l)&&y==="writable"){var w=Wo(o);Rr(l,w)}Zr(o)},function(y){l._state==="writable"&&qo(o),Gl(l,y)})}function Wo(o){var a=zs(o);return a<=0}function $n(o,a){var l=o._controlledWritableStream;qo(o),jn(l,a)}function en(o){return new TypeError("WritableStream.prototype."+o+" can only be used on a WritableStream")}function At(o){return new TypeError("WritableStreamDefaultController.prototype."+o+" can only be used on a WritableStreamDefaultController")}function Xe(o){return new TypeError("WritableStreamDefaultWriter.prototype."+o+" can only be used on a WritableStreamDefaultWriter")}function Vt(o){return new TypeError("Cannot "+o+" a stream using a released writer")}function Hn(o){o._closedPromise=S(function(a,l){o._closedPromise_resolve=a,o._closedPromise_reject=l,o._closedPromiseState="pending"})}function Ls(o,a){Hn(o),ua(o,a)}function sa(o){Hn(o),Vn(o)}function ua(o,a){o._closedPromise_reject!==void 0&&(B(o._closedPromise),o._closedPromise_reject(a),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0,o._closedPromiseState="rejected")}function Fs(o,a){Ls(o,a)}function Vn(o){o._closedPromise_resolve!==void 0&&(o._closedPromise_resolve(void 0),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0,o._closedPromiseState="resolved")}function tn(o){o._readyPromise=S(function(a,l){o._readyPromise_resolve=a,o._readyPromise_reject=l}),o._readyPromiseState="pending"}function Mo(o,a){tn(o),Us(o,a)}function la(o){tn(o),jo(o)}function Us(o,a){o._readyPromise_reject!==void 0&&(B(o._readyPromise),o._readyPromise_reject(a),o._readyPromise_resolve=void 0,o._readyPromise_reject=void 0,o._readyPromiseState="rejected")}function tf(o){tn(o)}function fa(o,a){Mo(o,a)}function jo(o){o._readyPromise_resolve!==void 0&&(o._readyPromise_resolve(void 0),o._readyPromise_resolve=void 0,o._readyPromise_reject=void 0,o._readyPromiseState="fulfilled")}var qs=typeof DOMException<"u"?DOMException:void 0;function rf(o){if(!(typeof o=="function"||typeof o=="object"))return!1;try{return new o,!0}catch{return!1}}function nf(){var o=function(l,c){this.message=l||"",this.name=c||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return o.prototype=Object.create(Error.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,writable:!0,configurable:!0}),o}var Ns=rf(qs)?qs:nf();function Cr(o,a,l,c,y,w){var E=Ge(o),I=Ts(a);o._disturbed=!0;var F=!1,N=_(void 0);return S(function(W,Y){var re;if(w!==void 0){if(re=function(){var U=new Ns("Aborted","AbortError"),J=[];c||J.push(function(){return a._state==="writable"?Wn(a,U):_(void 0)}),y||J.push(function(){return o._state==="readable"?Ce(o,U):_(void 0)}),de(function(){return Promise.all(J.map(function(ie){return ie()}))},!0,U)},w.aborted){re();return}w.addEventListener("abort",re)}function we(){return S(function(U,J){function ie(xe){xe?U():g(ze(),ie,J)}ie(!1)})}function ze(){return F?_(!0):g(I._readyPromise,function(){return S(function(U,J){vt(E,{_chunkSteps:function(ie){N=g(oa(I,ie),void 0,t),U(!1)},_closeSteps:function(){return U(!0)},_errorSteps:J})})})}if(ne(o,E._closedPromise,function(U){c?j(!0,U):de(function(){return Wn(a,U)},!0,U)}),ne(a,I._closedPromise,function(U){y?j(!0,U):de(function(){return Ce(o,U)},!0,U)}),ce(o,E._closedPromise,function(){l?j():de(function(){return Xl(I)})}),ut(a)||a._state==="closed"){var _e=new TypeError("the destination writable stream closed before all data could be piped to it");y?j(!0,_e):de(function(){return Ce(o,_e)},!0,_e)}B(we());function se(){var U=N;return g(N,function(){return U!==N?se():void 0})}function ne(U,J,ie){U._state==="errored"?ie(U._storedError):R(J,ie)}function ce(U,J,ie){U._state==="closed"?ie():P(J,ie)}function de(U,J,ie){if(F)return;F=!0,a._state==="writable"&&!ut(a)?P(se(),xe):xe();function xe(){v(U(),function(){return $(J,ie)},function(Le){return $(!0,Le)})}}function j(U,J){F||(F=!0,a._state==="writable"&&!ut(a)?P(se(),function(){return $(U,J)}):$(U,J))}function $(U,J){na(I),Z(E),w!==void 0&&w.removeEventListener("abort",re),U?Y(J):W(void 0)}})}var Ct=function(){function o(){throw new TypeError("Illegal constructor")}return Object.defineProperty(o.prototype,"desiredSize",{get:function(){if(!Yt(this))throw Ho("desiredSize");return ca(this)},enumerable:!1,configurable:!0}),o.prototype.close=function(){if(!Yt(this))throw Ho("close");if(!xr(this))throw new TypeError("The stream is not in a state that permits close");Qt(this)},o.prototype.enqueue=function(a){if(a===void 0&&(a=void 0),!Yt(this))throw Ho("enqueue");if(!xr(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ze(this,a)},o.prototype.error=function(a){if(a===void 0&&(a=void 0),!Yt(this))throw Ho("error");lt(this,a)},o.prototype[Tn]=function(a){Me(this);var l=this._cancelAlgorithm(a);return Gt(this),l},o.prototype[An]=function(a){var l=this._controlledReadableStream;if(this._queue.length>0){var c=Dn(this);this._closeRequested&&this._queue.length===0?(Gt(this),on(l)):rn(this),a._chunkSteps(c)}else $i(l,a),rn(this)},o}();Object.defineProperties(Ct.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ct.prototype,e.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Yt(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledReadableStream")?!1:o instanceof Ct}function rn(o){var a=Yn(o);if(!!a){if(o._pulling){o._pullAgain=!0;return}o._pulling=!0;var l=o._pullAlgorithm();v(l,function(){o._pulling=!1,o._pullAgain&&(o._pullAgain=!1,rn(o))},function(c){lt(o,c)})}}function Yn(o){var a=o._controlledReadableStream;if(!xr(o)||!o._started)return!1;if(ye(a)&&br(a)>0)return!0;var l=ca(o);return l>0}function Gt(o){o._pullAlgorithm=void 0,o._cancelAlgorithm=void 0,o._strategySizeAlgorithm=void 0}function Qt(o){if(!!xr(o)){var a=o._controlledReadableStream;o._closeRequested=!0,o._queue.length===0&&(Gt(o),on(a))}}function Ze(o,a){if(!!xr(o)){var l=o._controlledReadableStream;if(ye(l)&&br(l)>0)Bn(l,a,!1);else{var c=void 0;try{c=o._strategySizeAlgorithm(a)}catch(y){throw lt(o,y),y}try{Ki(o,a,c)}catch(y){throw lt(o,y),y}}rn(o)}}function lt(o,a){var l=o._controlledReadableStream;l._state==="readable"&&(Me(o),Gt(o),Jt(l,a))}function ca(o){var a=o._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:o._strategyHWM-o._queueTotalSize}function nn(o){return!Yn(o)}function xr(o){var a=o._controlledReadableStream._state;return!o._closeRequested&&a==="readable"}function Ws(o,a,l,c,y,w,E){a._controlledReadableStream=o,a._queue=void 0,a._queueTotalSize=void 0,Me(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=E,a._strategyHWM=w,a._pullAlgorithm=c,a._cancelAlgorithm=y,o._readableStreamController=a;var I=l();v(_(I),function(){a._started=!0,rn(a)},function(F){lt(a,F)})}function $o(o,a,l,c){var y=Object.create(Ct.prototype),w=function(){},E=function(){return _(void 0)},I=function(){return _(void 0)};a.start!==void 0&&(w=function(){return a.start(y)}),a.pull!==void 0&&(E=function(){return a.pull(y)}),a.cancel!==void 0&&(I=function(F){return a.cancel(F)}),Ws(o,y,w,E,I,l,c)}function Ho(o){return new TypeError("ReadableStreamDefaultController.prototype."+o+" can only be used on a ReadableStreamDefaultController")}function of(o,a){return Et(o._readableStreamController)?sf(o):af(o)}function af(o,a){var l=Ge(o),c=!1,y=!1,w=!1,E=!1,I,F,N,W,Y,re=S(function(ne){Y=ne});function we(){if(c)return y=!0,_(void 0);c=!0;var ne={_chunkSteps:function(ce){C(function(){y=!1;var de=ce,j=ce;w||Ze(N._readableStreamController,de),E||Ze(W._readableStreamController,j),c=!1,y&&we()})},_closeSteps:function(){c=!1,w||Qt(N._readableStreamController),E||Qt(W._readableStreamController),(!w||!E)&&Y(void 0)},_errorSteps:function(){c=!1}};return vt(l,ne),_(void 0)}function ze(ne){if(w=!0,I=ne,E){var ce=Qr([I,F]),de=Ce(o,ce);Y(de)}return re}function _e(ne){if(E=!0,F=ne,w){var ce=Qr([I,F]),de=Ce(o,ce);Y(de)}return re}function se(){}return N=Vo(se,we,ze),W=Vo(se,we,_e),R(l._closedPromise,function(ne){lt(N._readableStreamController,ne),lt(W._readableStreamController,ne),(!w||!E)&&Y(void 0)}),[N,W]}function sf(o){var a=Ge(o),l=!1,c=!1,y=!1,w=!1,E=!1,I,F,N,W,Y,re=S(function($){Y=$});function we($){R($._closedPromise,function(U){$===a&&(Oe(N._readableStreamController,U),Oe(W._readableStreamController,U),(!w||!E)&&Y(void 0))})}function ze(){Mt(a)&&(Z(a),a=Ge(o),we(a));var $={_chunkSteps:function(U){C(function(){c=!1,y=!1;var J=U,ie=U;if(!w&&!E)try{ie=Ao(U)}catch(xe){Oe(N._readableStreamController,xe),Oe(W._readableStreamController,xe),Y(Ce(o,xe));return}w||Ie(N._readableStreamController,J),E||Ie(W._readableStreamController,ie),l=!1,c?se():y&&ne()})},_closeSteps:function(){l=!1,w||Wt(N._readableStreamController),E||Wt(W._readableStreamController),N._readableStreamController._pendingPullIntos.length>0&&wr(N._readableStreamController,0),W._readableStreamController._pendingPullIntos.length>0&&wr(W._readableStreamController,0),(!w||!E)&&Y(void 0)},_errorSteps:function(){l=!1}};vt(a,$)}function _e($,U){Te(a)&&(Z(a),a=ea(o),we(a));var J=U?W:N,ie=U?N:W,xe={_chunkSteps:function(Le){C(function(){c=!1,y=!1;var xt=U?E:w,an=U?w:E;if(an)xt||Un(J._readableStreamController,Le);else{var Xo=void 0;try{Xo=Ao(Le)}catch(Rf){Oe(J._readableStreamController,Rf),Oe(ie._readableStreamController,Rf),Y(Ce(o,Rf));return}xt||Un(J._readableStreamController,Le),Ie(ie._readableStreamController,Xo)}l=!1,c?se():y&&ne()})},_closeSteps:function(Le){l=!1;var xt=U?E:w,an=U?w:E;xt||Wt(J._readableStreamController),an||Wt(ie._readableStreamController),Le!==void 0&&(xt||Un(J._readableStreamController,Le),!an&&ie._readableStreamController._pendingPullIntos.length>0&&wr(ie._readableStreamController,0)),(!xt||!an)&&Y(void 0)},_errorSteps:function(){l=!1}};qn(a,$,xe)}function se(){if(l)return c=!0,_(void 0);l=!0;var $=Do(N._readableStreamController);return $===null?ze():_e($._view,!1),_(void 0)}function ne(){if(l)return y=!0,_(void 0);l=!0;var $=Do(W._readableStreamController);return $===null?ze():_e($._view,!0),_(void 0)}function ce($){if(w=!0,I=$,E){var U=Qr([I,F]),J=Ce(o,U);Y(J)}return re}function de($){if(E=!0,F=$,w){var U=Qr([I,F]),J=Ce(o,U);Y(J)}return re}function j(){}return N=Yo(j,se,ce),W=Yo(j,ne,de),we(a),[N,W]}function uf(o,a){be(o,a);var l=o,c=l?.autoAllocateChunkSize,y=l?.cancel,w=l?.pull,E=l?.start,I=l?.type;return{autoAllocateChunkSize:c===void 0?void 0:ji(c,a+" has member 'autoAllocateChunkSize' that"),cancel:y===void 0?void 0:lf(y,l,a+" has member 'cancel' that"),pull:w===void 0?void 0:ff(w,l,a+" has member 'pull' that"),start:E===void 0?void 0:cf(E,l,a+" has member 'start' that"),type:I===void 0?void 0:df(I,a+" has member 'type' that")}}function lf(o,a,l){return fe(o,l),function(c){return A(o,a,[c])}}function ff(o,a,l){return fe(o,l),function(c){return A(o,a,[c])}}function cf(o,a,l){return fe(o,l),function(c){return O(o,a,[c])}}function df(o,a){if(o=""+o,o!=="bytes")throw new TypeError(a+" '"+o+"' is not a valid enumeration value for ReadableStreamType");return o}function hf(o,a){be(o,a);var l=o?.mode;return{mode:l===void 0?void 0:pf(l,a+" has member 'mode' that")}}function pf(o,a){if(o=""+o,o!=="byob")throw new TypeError(a+" '"+o+"' is not a valid enumeration value for ReadableStreamReaderMode");return o}function Ms(o,a){be(o,a);var l=o?.preventCancel;return{preventCancel:Boolean(l)}}function js(o,a){be(o,a);var l=o?.preventAbort,c=o?.preventCancel,y=o?.preventClose,w=o?.signal;return w!==void 0&&mf(w,a+" has member 'signal' that"),{preventAbort:Boolean(l),preventCancel:Boolean(c),preventClose:Boolean(y),signal:w}}function mf(o,a){if(!Hl(o))throw new TypeError(a+" is not an AbortSignal.")}function Kt(o,a){be(o,a);var l=o?.readable;Cn(l,"readable","ReadableWritablePair"),kn(l,a+" has member 'readable' that");var c=o?.writable;return Cn(c,"writable","ReadableWritablePair"),Rs(c,a+" has member 'writable' that"),{readable:l,writable:c}}var ft=function(){function o(a,l){a===void 0&&(a={}),l===void 0&&(l={}),a===void 0?a=null:Wi(a,"First parameter");var c=zo(l,"Second parameter"),y=uf(a,"First parameter");if(ct(this),y.type==="bytes"){if(c.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var w=$t(c,0);ql(this,y,w)}else{var E=vr(c),w=$t(c,1);$o(this,y,w,E)}}return Object.defineProperty(o.prototype,"locked",{get:function(){if(!Ae(this))throw Xt("locked");return ye(this)},enumerable:!1,configurable:!0}),o.prototype.cancel=function(a){return a===void 0&&(a=void 0),Ae(this)?ye(this)?p(new TypeError("Cannot cancel a stream that already has a reader")):Ce(this,a):p(Xt("cancel"))},o.prototype.getReader=function(a){if(a===void 0&&(a=void 0),!Ae(this))throw Xt("getReader");var l=hf(a,"First parameter");return l.mode===void 0?Ge(this):ea(this)},o.prototype.pipeThrough=function(a,l){if(l===void 0&&(l={}),!Ae(this))throw Xt("pipeThrough");ge(a,1,"pipeThrough");var c=Kt(a,"First parameter"),y=js(l,"Second parameter");if(ye(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Tt(c.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var w=Cr(this,c.writable,y.preventClose,y.preventAbort,y.preventCancel,y.signal);return B(w),c.readable},o.prototype.pipeTo=function(a,l){if(l===void 0&&(l={}),!Ae(this))return p(Xt("pipeTo"));if(a===void 0)return p("Parameter 1 is required in 'pipeTo'.");if(!Ke(a))return p(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var c;try{c=js(l,"Second parameter")}catch(y){return p(y)}return ye(this)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Tt(a)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Cr(this,a,c.preventClose,c.preventAbort,c.preventCancel,c.signal)},o.prototype.tee=function(){if(!Ae(this))throw Xt("tee");var a=of(this);return Qr(a)},o.prototype.values=function(a){if(a===void 0&&(a=void 0),!Ae(this))throw Xt("values");var l=Ms(a,"First parameter");return ms(this,l.preventCancel)},o}();Object.defineProperties(ft.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(ft.prototype,e.toStringTag,{value:"ReadableStream",configurable:!0}),typeof e.asyncIterator=="symbol"&&Object.defineProperty(ft.prototype,e.asyncIterator,{value:ft.prototype.values,writable:!0,configurable:!0});function Vo(o,a,l,c,y){c===void 0&&(c=1),y===void 0&&(y=function(){return 1});var w=Object.create(ft.prototype);ct(w);var E=Object.create(Ct.prototype);return Ws(w,E,o,a,l,c,y),w}function Yo(o,a,l){var c=Object.create(ft.prototype);ct(c);var y=Object.create(je.prototype);return _s(c,y,o,a,l,0,void 0),c}function ct(o){o._state="readable",o._reader=void 0,o._storedError=void 0,o._disturbed=!1}function Ae(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_readableStreamController")?!1:o instanceof ft}function ye(o){return o._reader!==void 0}function Ce(o,a){if(o._disturbed=!0,o._state==="closed")return _(void 0);if(o._state==="errored")return p(o._storedError);on(o);var l=o._reader;l!==void 0&&Mt(l)&&(l._readIntoRequests.forEach(function(y){y._closeSteps(void 0)}),l._readIntoRequests=new D);var c=o._readableStreamController[Tn](a);return T(c,t)}function on(o){o._state="closed";var a=o._reader;a!==void 0&&(Fi(a),Te(a)&&(a._readRequests.forEach(function(l){l._closeSteps()}),a._readRequests=new D))}function Jt(o,a){o._state="errored",o._storedError=a;var l=o._reader;l!==void 0&&(Rn(l,a),Te(l)?(l._readRequests.forEach(function(c){c._errorSteps(a)}),l._readRequests=new D):(l._readIntoRequests.forEach(function(c){c._errorSteps(a)}),l._readIntoRequests=new D))}function Xt(o){return new TypeError("ReadableStream.prototype."+o+" can only be used on a ReadableStream")}function da(o,a){be(o,a);var l=o?.highWaterMark;return Cn(l,"highWaterMark","QueuingStrategyInit"),{highWaterMark:xn(l)}}var Gn=function(o){return o.byteLength};try{Object.defineProperty(Gn,"name",{value:"size",configurable:!0})}catch{}var Qn=function(){function o(a){ge(a,1,"ByteLengthQueuingStrategy"),a=da(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}return Object.defineProperty(o.prototype,"highWaterMark",{get:function(){if(!pa(this))throw ha("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){if(!pa(this))throw ha("size");return Gn},enumerable:!1,configurable:!0}),o}();Object.defineProperties(Qn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Qn.prototype,e.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function ha(o){return new TypeError("ByteLengthQueuingStrategy.prototype."+o+" can only be used on a ByteLengthQueuingStrategy")}function pa(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_byteLengthQueuingStrategyHighWaterMark")?!1:o instanceof Qn}var Kn=function(){return 1};try{Object.defineProperty(Kn,"name",{value:"size",configurable:!0})}catch{}var Jn=function(){function o(a){ge(a,1,"CountQueuingStrategy"),a=da(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}return Object.defineProperty(o.prototype,"highWaterMark",{get:function(){if(!$s(this))throw ma("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){if(!$s(this))throw ma("size");return Kn},enumerable:!1,configurable:!0}),o}();Object.defineProperties(Jn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Jn.prototype,e.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ma(o){return new TypeError("CountQueuingStrategy.prototype."+o+" can only be used on a CountQueuingStrategy")}function $s(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_countQueuingStrategyHighWaterMark")?!1:o instanceof Jn}function yf(o,a){be(o,a);var l=o?.flush,c=o?.readableType,y=o?.start,w=o?.transform,E=o?.writableType;return{flush:l===void 0?void 0:bf(l,o,a+" has member 'flush' that"),readableType:c,start:y===void 0?void 0:gf(y,o,a+" has member 'start' that"),transform:w===void 0?void 0:Go(w,o,a+" has member 'transform' that"),writableType:E}}function bf(o,a,l){return fe(o,l),function(c){return A(o,a,[c])}}function gf(o,a,l){return fe(o,l),function(c){return O(o,a,[c])}}function Go(o,a,l){return fe(o,l),function(c,y){return A(o,a,[c,y])}}var Qo=function(){function o(a,l,c){a===void 0&&(a={}),l===void 0&&(l={}),c===void 0&&(c={}),a===void 0&&(a=null);var y=zo(l,"Second parameter"),w=zo(c,"Third parameter"),E=yf(a,"First parameter");if(E.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(E.writableType!==void 0)throw new RangeError("Invalid writableType specified");var I=$t(w,0),F=vr(w),N=$t(y,1),W=vr(y),Y,re=S(function(we){Y=we});Hs(this,re,N,W,I,F),Vs(this,E),E.start!==void 0?Y(E.start(this._transformStreamController)):Y(void 0)}return Object.defineProperty(o.prototype,"readable",{get:function(){if(!Xn(this))throw s("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"writable",{get:function(){if(!Xn(this))throw s("writable");return this._writable},enumerable:!1,configurable:!0}),o}();Object.defineProperties(Qo.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Qo.prototype,e.toStringTag,{value:"TransformStream",configurable:!0});function Hs(o,a,l,c,y,w){function E(){return a}function I(re){return Sf(o,re)}function F(re){return vf(o,re)}function N(){return Ef(o)}o._writable=As(E,I,N,F,l,c);function W(){return Jo(o)}function Y(re){return Br(o,re),_(void 0)}o._readable=Vo(E,W,Y,y,w),o._backpressure=void 0,o._backpressureChangePromise=void 0,o._backpressureChangePromise_resolve=void 0,Zt(o,!0),o._transformStreamController=void 0}function Xn(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_transformStreamController")?!1:o instanceof Qo}function kr(o,a){lt(o._readable._readableStreamController,a),Br(o,a)}function Br(o,a){ya(o._transformStreamController),ia(o._writable._writableStreamController,a),o._backpressure&&Zt(o,!1)}function Zt(o,a){o._backpressureChangePromise!==void 0&&o._backpressureChangePromise_resolve(),o._backpressureChangePromise=S(function(l){o._backpressureChangePromise_resolve=l}),o._backpressure=a}var er=function(){function o(){throw new TypeError("Illegal constructor")}return Object.defineProperty(o.prototype,"desiredSize",{get:function(){if(!Ko(this))throw Zn("desiredSize");var a=this._controlledTransformStream._readable._readableStreamController;return ca(a)},enumerable:!1,configurable:!0}),o.prototype.enqueue=function(a){if(a===void 0&&(a=void 0),!Ko(this))throw Zn("enqueue");Ys(this,a)},o.prototype.error=function(a){if(a===void 0&&(a=void 0),!Ko(this))throw Zn("error");Gs(this,a)},o.prototype.terminate=function(){if(!Ko(this))throw Zn("terminate");_f(this)},o}();Object.defineProperties(er.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(er.prototype,e.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Ko(o){return!u(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledTransformStream")?!1:o instanceof er}function wf(o,a,l,c){a._controlledTransformStream=o,o._transformStreamController=a,a._transformAlgorithm=l,a._flushAlgorithm=c}function Vs(o,a){var l=Object.create(er.prototype),c=function(w){try{return Ys(l,w),_(void 0)}catch(E){return p(E)}},y=function(){return _(void 0)};a.transform!==void 0&&(c=function(w){return a.transform(w,l)}),a.flush!==void 0&&(y=function(){return a.flush(l)}),wf(o,l,c,y)}function ya(o){o._transformAlgorithm=void 0,o._flushAlgorithm=void 0}function Ys(o,a){var l=o._controlledTransformStream,c=l._readable._readableStreamController;if(!xr(c))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ze(c,a)}catch(w){throw Br(l,w),l._readable._storedError}var y=nn(c);y!==l._backpressure&&Zt(l,!0)}function Gs(o,a){kr(o._controlledTransformStream,a)}function Qs(o,a){var l=o._transformAlgorithm(a);return T(l,void 0,function(c){throw kr(o._controlledTransformStream,c),c})}function _f(o){var a=o._controlledTransformStream,l=a._readable._readableStreamController;Qt(l);var c=new TypeError("TransformStream terminated");Br(a,c)}function Sf(o,a){var l=o._transformStreamController;if(o._backpressure){var c=o._backpressureChangePromise;return T(c,function(){var y=o._writable,w=y._state;if(w==="erroring")throw y._storedError;return Qs(l,a)})}return Qs(l,a)}function vf(o,a){return kr(o,a),_(void 0)}function Ef(o){var a=o._readable,l=o._transformStreamController,c=l._flushAlgorithm();return ya(l),T(c,function(){if(a._state==="errored")throw a._storedError;Qt(a._readableStreamController)},function(y){throw kr(o,y),a._storedError})}function Jo(o){return Zt(o,!1),o._backpressureChangePromise}function Zn(o){return new TypeError("TransformStreamDefaultController.prototype."+o+" can only be used on a TransformStreamDefaultController")}function s(o){return new TypeError("TransformStream.prototype."+o+" can only be used on a TransformStream")}r.ByteLengthQueuingStrategy=Qn,r.CountQueuingStrategy=Jn,r.ReadableByteStreamController=je,r.ReadableStream=ft,r.ReadableStreamBYOBReader=Qe,r.ReadableStreamBYOBRequest=at,r.ReadableStreamDefaultController=Ct,r.ReadableStreamDefaultReader=St,r.TransformStream=Qo,r.TransformStreamDefaultController=er,r.WritableStream=Jr,r.WritableStreamDefaultController=Ht,r.WritableStreamDefaultWriter=Je,Object.defineProperty(r,"__esModule",{value:!0})})});var tw=z((YP,wd)=>{try{wd.exports=require("stream/web")}catch{wd.exports=ew()}});var Xw=z((HD,gl)=>{var lA=require("fs"),Jw=require("path"),fA=require("os"),cA=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function dA(r){let e={},t=r.toString();t=t.replace(/\r\n?/mg,`
`);let n;for(;(n=cA.exec(t))!=null;){let i=n[1],u=n[2]||"";u=u.trim();let f=u[0];u=u.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),f==='"'&&(u=u.replace(/\\n/g,`
`),u=u.replace(/\\r/g,"\r")),e[i]=u}return e}function Od(r){console.log(`[dotenv][DEBUG] ${r}`)}function hA(r){return r[0]==="~"?Jw.join(fA.homedir(),r.slice(1)):r}function pA(r){let e=Jw.resolve(process.cwd(),".env"),t="utf8",n=Boolean(r&&r.debug),i=Boolean(r&&r.override);r&&(r.path!=null&&(e=hA(r.path)),r.encoding!=null&&(t=r.encoding));try{let u=bl.parse(lA.readFileSync(e,{encoding:t}));return Object.keys(u).forEach(function(f){Object.prototype.hasOwnProperty.call(process.env,f)?(i===!0&&(process.env[f]=u[f]),n&&Od(i===!0?`"${f}" is already defined in \`process.env\` and WAS overwritten`:`"${f}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[f]=u[f]}),{parsed:u}}catch(u){return n&&Od(`Failed to load ${e} ${u.message}`),{error:u}}}var bl={config:pA,parse:dA};gl.exports.config=bl.config;gl.exports.parse=bl.parse;gl.exports=bl});var t_=z((wl,e_)=>{(function(r,e){typeof wl=="object"&&typeof e_<"u"?e(wl):typeof define=="function"&&define.amd?define(["exports"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.WebStreamsPolyfill={}))})(wl,function(r){"use strict";let e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:s=>`Symbol(${s})`;function t(){}function n(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=n();function u(s){return typeof s=="object"&&s!==null||typeof s=="function"}let f=t,d=Promise,h=Promise.prototype.then,m=Promise.resolve.bind(d),b=Promise.reject.bind(d);function S(s){return new d(s)}function _(s){return m(s)}function p(s){return b(s)}function g(s,o,a){return h.call(s,o,a)}function v(s,o,a){g(g(s,o,a),void 0,f)}function P(s,o){v(s,o)}function R(s,o){v(s,void 0,o)}function T(s,o,a){return g(s,o,a)}function B(s){g(s,void 0,f)}let C=(()=>{let s=i&&i.queueMicrotask;if(typeof s=="function")return s;let o=_(void 0);return a=>g(o,a)})();function O(s,o,a){if(typeof s!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(s,o,a)}function A(s,o,a){try{return _(O(s,o,a))}catch(l){return p(l)}}let x=16384;class D{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(o){let a=this._back,l=a;a._elements.length===x-1&&(l={_elements:[],_next:void 0}),a._elements.push(o),l!==a&&(this._back=l,a._next=l),++this._size}shift(){let o=this._front,a=o,l=this._cursor,c=l+1,y=o._elements,w=y[l];return c===x&&(a=o._next,c=0),--this._size,this._cursor=c,o!==a&&(this._front=a),y[l]=void 0,w}forEach(o){let a=this._cursor,l=this._front,c=l._elements;for(;(a!==c.length||l._next!==void 0)&&!(a===c.length&&(l=l._next,c=l._elements,a=0,c.length===0));)o(c[a]),++a}peek(){let o=this._front,a=this._cursor;return o._elements[a]}}function G(s,o){s._ownerReadableStream=o,o._reader=s,o._state==="readable"?K(s):o._state==="closed"?Yr(s):Vr(s,o._storedError)}function ee(s,o){let a=s._ownerReadableStream;return ye(a,o)}function Z(s){s._ownerReadableStream._state==="readable"?Rn(s,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Pl(s,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),s._ownerReadableStream._reader=void 0,s._ownerReadableStream=void 0}function ae(s){return new TypeError("Cannot "+s+" a stream using a released reader")}function K(s){s._closedPromise=S((o,a)=>{s._closedPromise_resolve=o,s._closedPromise_reject=a})}function Vr(s,o){K(s),Rn(s,o)}function Yr(s){K(s),Fi(s)}function Rn(s,o){s._closedPromise_reject!==void 0&&(B(s._closedPromise),s._closedPromise_reject(o),s._closedPromise_resolve=void 0,s._closedPromise_reject=void 0)}function Pl(s,o){Vr(s,o)}function Fi(s){s._closedPromise_resolve!==void 0&&(s._closedPromise_resolve(void 0),s._closedPromise_resolve=void 0,s._closedPromise_reject=void 0)}let Ui=e("[[AbortSteps]]"),qi=e("[[ErrorSteps]]"),Tn=e("[[CancelSteps]]"),An=e("[[PullSteps]]"),Ni=Number.isFinite||function(s){return typeof s=="number"&&isFinite(s)},Il=Math.trunc||function(s){return s<0?Math.ceil(s):Math.floor(s)};function Dl(s){return typeof s=="object"||typeof s=="function"}function be(s,o){if(s!==void 0&&!Dl(s))throw new TypeError(`${o} is not an object.`)}function fe(s,o){if(typeof s!="function")throw new TypeError(`${o} is not a function.`)}function Ol(s){return typeof s=="object"&&s!==null||typeof s=="function"}function Wi(s,o){if(!Ol(s))throw new TypeError(`${o} is not an object.`)}function ge(s,o,a){if(s===void 0)throw new TypeError(`Parameter ${o} is required in '${a}'.`)}function Cn(s,o,a){if(s===void 0)throw new TypeError(`${o} is required in '${a}'.`)}function xn(s){return Number(s)}function Mi(s){return s===0?0:s}function zl(s){return Mi(Il(s))}function ji(s,o){let l=Number.MAX_SAFE_INTEGER,c=Number(s);if(c=Mi(c),!Ni(c))throw new TypeError(`${o} is not a finite number`);if(c=zl(c),c<0||c>l)throw new TypeError(`${o} is outside the accepted range of ${0} to ${l}, inclusive`);return!Ni(c)||c===0?0:c}function kn(s,o){if(!ct(s))throw new TypeError(`${o} is not a ReadableStream.`)}function Ge(s){return new St(s)}function $i(s,o){s._reader._readRequests.push(o)}function Bn(s,o,a){let c=s._reader._readRequests.shift();a?c._closeSteps():c._chunkSteps(o)}function br(s){return s._reader._readRequests.length}function Hi(s){let o=s._reader;return!(o===void 0||!Te(o))}class St{constructor(o){if(ge(o,1,"ReadableStreamDefaultReader"),kn(o,"First parameter"),Ae(o))throw new TypeError("This stream has already been locked for exclusive reading by another reader");G(this,o),this._readRequests=new D}get closed(){return Te(this)?this._closedPromise:p(gr("closed"))}cancel(o=void 0){return Te(this)?this._ownerReadableStream===void 0?p(ae("cancel")):ee(this,o):p(gr("cancel"))}read(){if(!Te(this))return p(gr("read"));if(this._ownerReadableStream===void 0)return p(ae("read from"));let o,a,l=S((y,w)=>{o=y,a=w});return vt(this,{_chunkSteps:y=>o({value:y,done:!1}),_closeSteps:()=>o({value:void 0,done:!0}),_errorSteps:y=>a(y)}),l}releaseLock(){if(!Te(this))throw gr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Z(this)}}}Object.defineProperties(St.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(St.prototype,e.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Te(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_readRequests")?!1:s instanceof St}function vt(s,o){let a=s._ownerReadableStream;a._disturbed=!0,a._state==="closed"?o._closeSteps():a._state==="errored"?o._errorSteps(a._storedError):a._readableStreamController[An](o)}function gr(s){return new TypeError(`ReadableStreamDefaultReader.prototype.${s} can only be used on a ReadableStreamDefaultReader`)}let To=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Pn{constructor(o,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=o,this._preventCancel=a}next(){let o=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?T(this._ongoingPromise,o,o):o(),this._ongoingPromise}return(o){let a=()=>this._returnSteps(o);return this._ongoingPromise?T(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let o=this._reader;if(o._ownerReadableStream===void 0)return p(ae("iterate"));let a,l,c=S((w,E)=>{a=w,l=E});return vt(o,{_chunkSteps:w=>{this._ongoingPromise=void 0,C(()=>a({value:w,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,Z(o),a({value:void 0,done:!0})},_errorSteps:w=>{this._ongoingPromise=void 0,this._isFinished=!0,Z(o),l(w)}}),c}_returnSteps(o){if(this._isFinished)return Promise.resolve({value:o,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return p(ae("finish iterating"));if(!this._preventCancel){let l=ee(a,o);return Z(a),T(l,()=>({value:o,done:!0}))}return Z(a),_({value:o,done:!0})}}let Vi={next(){return ms(this)?this._asyncIteratorImpl.next():p(Yi("next"))},return(s){return ms(this)?this._asyncIteratorImpl.return(s):p(Yi("return"))}};To!==void 0&&Object.setPrototypeOf(Vi,To);function ps(s,o){let a=Ge(s),l=new Pn(a,o),c=Object.create(Vi);return c._asyncIteratorImpl=l,c}function ms(s){if(!u(s)||!Object.prototype.hasOwnProperty.call(s,"_asyncIteratorImpl"))return!1;try{return s._asyncIteratorImpl instanceof Pn}catch{return!1}}function Yi(s){return new TypeError(`ReadableStreamAsyncIterator.${s} can only be used on a ReadableSteamAsyncIterator`)}let Gi=Number.isNaN||function(s){return s!==s};function Gr(s){return s.slice()}function Qr(s,o,a,l,c){new Uint8Array(s).set(new Uint8Array(a,l,c),o)}function Ll(s){return s}function Qi(s){return!1}function In(s,o,a){if(s.slice)return s.slice(o,a);let l=a-o,c=new ArrayBuffer(l);return Qr(c,0,s,o,l),c}function ys(s){return!(typeof s!="number"||Gi(s)||s<0)}function bs(s){let o=In(s.buffer,s.byteOffset,s.byteOffset+s.byteLength);return new Uint8Array(o)}function Ao(s){let o=s._queue.shift();return s._queueTotalSize-=o.size,s._queueTotalSize<0&&(s._queueTotalSize=0),o.value}function Dn(s,o,a){if(!ys(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");s._queue.push({value:o,size:a}),s._queueTotalSize+=a}function Ki(s){return s._queue.peek().value}function Ut(s){s._queue=new D,s._queueTotalSize=0}class Me{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Et(this))throw Zi("view");return this._view}respond(o){if(!Et(this))throw Zi("respond");if(ge(o,1,"respond"),o=ji(o,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Qi(this._view.buffer),Fn(this._associatedReadableByteStreamController,o)}respondWithNewView(o){if(!Et(this))throw Zi("respondWithNewView");if(ge(o,1,"respondWithNewView"),!ArrayBuffer.isView(o))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Qi(o.buffer),wr(this._associatedReadableByteStreamController,o)}}Object.defineProperties(Me.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Me.prototype,e.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class at{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!je(this))throw _r("byobRequest");return Oe(this)}get desiredSize(){if(!je(this))throw _r("desiredSize");return Do(this)}close(){if(!je(this))throw _r("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let o=this._controlledReadableByteStream._state;if(o!=="readable")throw new TypeError(`The stream (in ${o} state) is not in the readable state and cannot be closed`);Nt(this)}enqueue(o){if(!je(this))throw _r("enqueue");if(ge(o,1,"enqueue"),!ArrayBuffer.isView(o))throw new TypeError("chunk must be an array buffer view");if(o.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(o.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);Wt(this,o)}error(o=void 0){if(!je(this))throw _r("error");Ie(this,o)}[Tn](o){qt(this),Ut(this);let a=this._cancelAlgorithm(o);return Io(this),a}[An](o){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Xi(this);let y=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);o._chunkSteps(y);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(w){o._errorSteps(w);return}let y={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(y)}$i(a,o),Rt(this)}}Object.defineProperties(at.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(at.prototype,e.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function je(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_controlledReadableByteStream")?!1:s instanceof at}function Et(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_associatedReadableByteStreamController")?!1:s instanceof Me}function Rt(s){if(!Po(s))return;if(s._pulling){s._pullAgain=!0;return}s._pulling=!0;let a=s._pullAlgorithm();v(a,()=>{s._pulling=!1,s._pullAgain&&(s._pullAgain=!1,Rt(s))},l=>{Ie(s,l)})}function qt(s){ko(s),s._pendingPullIntos=new D}function Co(s,o){let a=!1;s._state==="closed"&&(a=!0);let l=xo(o);o.readerType==="default"?Bn(s,l,a):Ss(s,l,a)}function xo(s){let o=s.bytesFilled,a=s.elementSize;return new s.viewConstructor(s.buffer,s.byteOffset,o/a)}function On(s,o,a,l){s._queue.push({buffer:o,byteOffset:a,byteLength:l}),s._queueTotalSize+=l}function zn(s,o){let a=o.elementSize,l=o.bytesFilled-o.bytesFilled%a,c=Math.min(s._queueTotalSize,o.byteLength-o.bytesFilled),y=o.bytesFilled+c,w=y-y%a,E=c,I=!1;w>l&&(E=w-o.bytesFilled,I=!0);let F=s._queue;for(;E>0;){let N=F.peek(),W=Math.min(E,N.byteLength),Y=o.byteOffset+o.bytesFilled;Qr(o.buffer,Y,N.buffer,N.byteOffset,W),N.byteLength===W?F.shift():(N.byteOffset+=W,N.byteLength-=W),s._queueTotalSize-=W,Ji(s,W,o),E-=W}return I}function Ji(s,o,a){a.bytesFilled+=o}function Xi(s){s._queueTotalSize===0&&s._closeRequested?(Io(s),Ce(s._controlledReadableByteStream)):Rt(s)}function ko(s){s._byobRequest!==null&&(s._byobRequest._associatedReadableByteStreamController=void 0,s._byobRequest._view=null,s._byobRequest=null)}function Bo(s){for(;s._pendingPullIntos.length>0;){if(s._queueTotalSize===0)return;let o=s._pendingPullIntos.peek();zn(s,o)&&(Ln(s),Co(s._controlledReadableByteStream,o))}}function gs(s,o,a){let l=s._controlledReadableByteStream,c=1;o.constructor!==DataView&&(c=o.constructor.BYTES_PER_ELEMENT);let y=o.constructor,w=o.buffer,E={buffer:w,bufferByteLength:w.byteLength,byteOffset:o.byteOffset,byteLength:o.byteLength,bytesFilled:0,elementSize:c,viewConstructor:y,readerType:"byob"};if(s._pendingPullIntos.length>0){s._pendingPullIntos.push(E),ea(l,a);return}if(l._state==="closed"){let I=new y(E.buffer,E.byteOffset,0);a._closeSteps(I);return}if(s._queueTotalSize>0){if(zn(s,E)){let I=xo(E);Xi(s),a._chunkSteps(I);return}if(s._closeRequested){let I=new TypeError("Insufficient bytes to fill elements in the given buffer");Ie(s,I),a._errorSteps(I);return}}s._pendingPullIntos.push(E),ea(l,a),Rt(s)}function Fl(s,o){let a=s._controlledReadableByteStream;if(Oo(a))for(;vs(a)>0;){let l=Ln(s);Co(a,l)}}function Ul(s,o,a){if(Ji(s,o,a),a.bytesFilled<a.elementSize)return;Ln(s);let l=a.bytesFilled%a.elementSize;if(l>0){let c=a.byteOffset+a.bytesFilled,y=In(a.buffer,c-l,c);On(s,y,0,y.byteLength)}a.bytesFilled-=l,Co(s._controlledReadableByteStream,a),Bo(s)}function ws(s,o){let a=s._pendingPullIntos.peek();ko(s),s._controlledReadableByteStream._state==="closed"?Fl(s):Ul(s,o,a),Rt(s)}function Ln(s){return s._pendingPullIntos.shift()}function Po(s){let o=s._controlledReadableByteStream;return o._state!=="readable"||s._closeRequested||!s._started?!1:!!(Hi(o)&&br(o)>0||Oo(o)&&vs(o)>0||Do(s)>0)}function Io(s){s._pullAlgorithm=void 0,s._cancelAlgorithm=void 0}function Nt(s){let o=s._controlledReadableByteStream;if(!(s._closeRequested||o._state!=="readable")){if(s._queueTotalSize>0){s._closeRequested=!0;return}if(s._pendingPullIntos.length>0&&s._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ie(s,l),l}Io(s),Ce(o)}}function Wt(s,o){let a=s._controlledReadableByteStream;if(s._closeRequested||a._state!=="readable")return;let l=o.buffer,c=o.byteOffset,y=o.byteLength,w=l;if(s._pendingPullIntos.length>0){let E=s._pendingPullIntos.peek();Qi(E.buffer),E.buffer=E.buffer}if(ko(s),Hi(a))if(br(a)===0)On(s,w,c,y);else{s._pendingPullIntos.length>0&&Ln(s);let E=new Uint8Array(w,c,y);Bn(a,E,!1)}else Oo(a)?(On(s,w,c,y),Bo(s)):On(s,w,c,y);Rt(s)}function Ie(s,o){let a=s._controlledReadableByteStream;a._state==="readable"&&(qt(s),Ut(s),Io(s),on(a,o))}function Oe(s){if(s._byobRequest===null&&s._pendingPullIntos.length>0){let o=s._pendingPullIntos.peek(),a=new Uint8Array(o.buffer,o.byteOffset+o.bytesFilled,o.byteLength-o.bytesFilled),l=Object.create(Me.prototype);ql(l,s,a),s._byobRequest=l}return s._byobRequest}function Do(s){let o=s._controlledReadableByteStream._state;return o==="errored"?null:o==="closed"?0:s._strategyHWM-s._queueTotalSize}function Fn(s,o){let a=s._pendingPullIntos.peek();if(s._controlledReadableByteStream._state==="closed"){if(o!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(o===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+o>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,ws(s,o)}function wr(s,o){let a=s._pendingPullIntos.peek();if(s._controlledReadableByteStream._state==="closed"){if(o.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(o.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==o.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==o.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+o.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=o.byteLength;a.buffer=o.buffer,ws(s,c)}function Un(s,o,a,l,c,y,w){o._controlledReadableByteStream=s,o._pullAgain=!1,o._pulling=!1,o._byobRequest=null,o._queue=o._queueTotalSize=void 0,Ut(o),o._closeRequested=!1,o._started=!1,o._strategyHWM=y,o._pullAlgorithm=l,o._cancelAlgorithm=c,o._autoAllocateChunkSize=w,o._pendingPullIntos=new D,s._readableStreamController=o;let E=a();v(_(E),()=>{o._started=!0,Rt(o)},I=>{Ie(o,I)})}function _s(s,o,a){let l=Object.create(at.prototype),c=()=>{},y=()=>_(void 0),w=()=>_(void 0);o.start!==void 0&&(c=()=>o.start(l)),o.pull!==void 0&&(y=()=>o.pull(l)),o.cancel!==void 0&&(w=I=>o.cancel(I));let E=o.autoAllocateChunkSize;if(E===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Un(s,l,c,y,w,a,E)}function ql(s,o,a){s._associatedReadableByteStreamController=o,s._view=a}function Zi(s){return new TypeError(`ReadableStreamBYOBRequest.prototype.${s} can only be used on a ReadableStreamBYOBRequest`)}function _r(s){return new TypeError(`ReadableByteStreamController.prototype.${s} can only be used on a ReadableByteStreamController`)}function Kr(s){return new Sr(s)}function ea(s,o){s._reader._readIntoRequests.push(o)}function Ss(s,o,a){let c=s._reader._readIntoRequests.shift();a?c._closeSteps(o):c._chunkSteps(o)}function vs(s){return s._reader._readIntoRequests.length}function Oo(s){let o=s._reader;return!(o===void 0||!Qe(o))}class Sr{constructor(o){if(ge(o,1,"ReadableStreamBYOBReader"),kn(o,"First parameter"),Ae(o))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!je(o._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");G(this,o),this._readIntoRequests=new D}get closed(){return Qe(this)?this._closedPromise:p(qn("closed"))}cancel(o=void 0){return Qe(this)?this._ownerReadableStream===void 0?p(ae("cancel")):ee(this,o):p(qn("cancel"))}read(o){if(!Qe(this))return p(qn("read"));if(!ArrayBuffer.isView(o))return p(new TypeError("view must be an array buffer view"));if(o.byteLength===0)return p(new TypeError("view must have non-zero byteLength"));if(o.buffer.byteLength===0)return p(new TypeError("view's buffer must have non-zero byteLength"));if(Qi(o.buffer),this._ownerReadableStream===void 0)return p(ae("read from"));let a,l,c=S((w,E)=>{a=w,l=E});return Mt(this,o,{_chunkSteps:w=>a({value:w,done:!1}),_closeSteps:w=>a({value:w,done:!0}),_errorSteps:w=>l(w)}),c}releaseLock(){if(!Qe(this))throw qn("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Z(this)}}}Object.defineProperties(Sr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Sr.prototype,e.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Qe(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_readIntoRequests")?!1:s instanceof Sr}function Mt(s,o,a){let l=s._ownerReadableStream;l._disturbed=!0,l._state==="errored"?a._errorSteps(l._storedError):gs(l._readableStreamController,o,a)}function qn(s){return new TypeError(`ReadableStreamBYOBReader.prototype.${s} can only be used on a ReadableStreamBYOBReader`)}function jt(s,o){let{highWaterMark:a}=s;if(a===void 0)return o;if(Gi(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function $t(s){let{size:o}=s;return o||(()=>1)}function vr(s,o){be(s,o);let a=s?.highWaterMark,l=s?.size;return{highWaterMark:a===void 0?void 0:xn(a),size:l===void 0?void 0:zo(l,`${o} has member 'size' that`)}}function zo(s,o){return fe(s,o),a=>xn(s(a))}function Nl(s,o){be(s,o);let a=s?.abort,l=s?.close,c=s?.start,y=s?.type,w=s?.write;return{abort:a===void 0?void 0:Wl(a,s,`${o} has member 'abort' that`),close:l===void 0?void 0:Ml(l,s,`${o} has member 'close' that`),start:c===void 0?void 0:jl(c,s,`${o} has member 'start' that`),write:w===void 0?void 0:$l(w,s,`${o} has member 'write' that`),type:y}}function Wl(s,o,a){return fe(s,a),l=>A(s,o,[l])}function Ml(s,o,a){return fe(s,a),()=>A(s,o,[])}function jl(s,o,a){return fe(s,a),l=>O(s,o,[l])}function $l(s,o,a){return fe(s,a),(l,c)=>A(s,o,[l,c])}function Es(s,o){if(!Er(s))throw new TypeError(`${o} is not a WritableStream.`)}function Rs(s){if(typeof s!="object"||s===null)return!1;try{return typeof s.aborted=="boolean"}catch{return!1}}let Hl=typeof AbortController=="function";function Vl(){if(Hl)return new AbortController}class Nn{constructor(o={},a={}){o===void 0?o=null:Wi(o,"First parameter");let l=vr(a,"Second parameter"),c=Nl(o,"First parameter");if(As(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let w=$t(l),E=jt(l,1);Ds(this,c,E,w)}get locked(){if(!Er(this))throw $n("locked");return Ke(this)}abort(o=void 0){return Er(this)?Ke(this)?p(new TypeError("Cannot abort a stream that already has a writer")):Tt(this,o):p($n("abort"))}close(){return Er(this)?Ke(this)?p(new TypeError("Cannot close a stream that already has a writer")):st(this)?p(new TypeError("Cannot close an already-closing stream")):Wn(this):p($n("close"))}getWriter(){if(!Er(this))throw $n("getWriter");return Jr(this)}}Object.defineProperties(Nn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Nn.prototype,e.toStringTag,{value:"WritableStream",configurable:!0});function Jr(s){return new Rr(s)}function Ts(s,o,a,l,c=1,y=()=>1){let w=Object.create(Nn.prototype);As(w);let E=Object.create(Ar.prototype);return Fo(w,E,s,o,a,l,c,y),w}function As(s){s._state="writable",s._storedError=void 0,s._writer=void 0,s._writableStreamController=void 0,s._writeRequests=new D,s._inFlightWriteRequest=void 0,s._closeRequest=void 0,s._inFlightCloseRequest=void 0,s._pendingAbortRequest=void 0,s._backpressure=!1}function Er(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_writableStreamController")?!1:s instanceof Nn}function Ke(s){return s._writer!==void 0}function Tt(s,o){var a;if(s._state==="closed"||s._state==="errored")return _(void 0);s._writableStreamController._abortReason=o,(a=s._writableStreamController._abortController)===null||a===void 0||a.abort();let l=s._state;if(l==="closed"||l==="errored")return _(void 0);if(s._pendingAbortRequest!==void 0)return s._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,o=void 0);let y=S((w,E)=>{s._pendingAbortRequest={_promise:void 0,_resolve:w,_reject:E,_reason:o,_wasAlreadyErroring:c}});return s._pendingAbortRequest._promise=y,c||Mn(s,o),y}function Wn(s){let o=s._state;if(o==="closed"||o==="errored")return p(new TypeError(`The stream (in ${o} state) is not in the writable state and cannot be closed`));let a=S((c,y)=>{let w={_resolve:c,_reject:y};s._closeRequest=w}),l=s._writer;return l!==void 0&&s._backpressure&&o==="writable"&&fa(l),qo(s._writableStreamController),a}function Cs(s){return S((a,l)=>{let c={_resolve:a,_reject:l};s._writeRequests.push(c)})}function ta(s,o){if(s._state==="writable"){Mn(s,o);return}jn(s)}function Mn(s,o){let a=s._writableStreamController;s._state="erroring",s._storedError=o;let l=s._writer;l!==void 0&&Bs(l,o),!ut(s)&&a._started&&jn(s)}function jn(s){s._state="errored",s._writableStreamController[qi]();let o=s._storedError;if(s._writeRequests.forEach(c=>{c._reject(o)}),s._writeRequests=new D,s._pendingAbortRequest===void 0){Lo(s);return}let a=s._pendingAbortRequest;if(s._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(o),Lo(s);return}let l=s._writableStreamController[Ui](a._reason);v(l,()=>{a._resolve(),Lo(s)},c=>{a._reject(c),Lo(s)})}function ra(s){s._inFlightWriteRequest._resolve(void 0),s._inFlightWriteRequest=void 0}function Yl(s,o){s._inFlightWriteRequest._reject(o),s._inFlightWriteRequest=void 0,ta(s,o)}function Gl(s){s._inFlightCloseRequest._resolve(void 0),s._inFlightCloseRequest=void 0,s._state==="erroring"&&(s._storedError=void 0,s._pendingAbortRequest!==void 0&&(s._pendingAbortRequest._resolve(),s._pendingAbortRequest=void 0)),s._state="closed";let a=s._writer;a!==void 0&&Fs(a)}function Ql(s,o){s._inFlightCloseRequest._reject(o),s._inFlightCloseRequest=void 0,s._pendingAbortRequest!==void 0&&(s._pendingAbortRequest._reject(o),s._pendingAbortRequest=void 0),ta(s,o)}function st(s){return!(s._closeRequest===void 0&&s._inFlightCloseRequest===void 0)}function ut(s){return!(s._inFlightWriteRequest===void 0&&s._inFlightCloseRequest===void 0)}function Kl(s){s._inFlightCloseRequest=s._closeRequest,s._closeRequest=void 0}function Jl(s){s._inFlightWriteRequest=s._writeRequests.shift()}function Lo(s){s._closeRequest!==void 0&&(s._closeRequest._reject(s._storedError),s._closeRequest=void 0);let o=s._writer;o!==void 0&&sa(o,s._storedError)}function Xr(s,o){let a=s._writer;a!==void 0&&o!==s._backpressure&&(o?Us(a):fa(a)),s._backpressure=o}class Rr{constructor(o){if(ge(o,1,"WritableStreamDefaultWriter"),Es(o,"First parameter"),Ke(o))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=o,o._writer=this;let a=o._state;if(a==="writable")!st(o)&&o._backpressure?Vn(this):Mo(this),Vt(this);else if(a==="erroring")tn(this,o._storedError),Vt(this);else if(a==="closed")Mo(this),Ls(this);else{let l=o._storedError;tn(this,l),Hn(this,l)}}get closed(){return Je(this)?this._closedPromise:p(At("closed"))}get desiredSize(){if(!Je(this))throw At("desiredSize");if(this._ownerWritableStream===void 0)throw Xe("desiredSize");return Ps(this)}get ready(){return Je(this)?this._readyPromise:p(At("ready"))}abort(o=void 0){return Je(this)?this._ownerWritableStream===void 0?p(Xe("abort")):Tr(this,o):p(At("abort"))}close(){if(!Je(this))return p(At("close"));let o=this._ownerWritableStream;return o===void 0?p(Xe("close")):st(o)?p(new TypeError("Cannot close an already-closing stream")):xs(this)}releaseLock(){if(!Je(this))throw At("releaseLock");this._ownerWritableStream!==void 0&&Is(this)}write(o=void 0){return Je(this)?this._ownerWritableStream===void 0?p(Xe("write to")):na(this,o):p(At("write"))}}Object.defineProperties(Rr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,e.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Je(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_ownerWritableStream")?!1:s instanceof Rr}function Tr(s,o){let a=s._ownerWritableStream;return Tt(a,o)}function xs(s){let o=s._ownerWritableStream;return Wn(o)}function ks(s){let o=s._ownerWritableStream,a=o._state;return st(o)||a==="closed"?_(void 0):a==="errored"?p(o._storedError):xs(s)}function Xl(s,o){s._closedPromiseState==="pending"?sa(s,o):ua(s,o)}function Bs(s,o){s._readyPromiseState==="pending"?la(s,o):tf(s,o)}function Ps(s){let o=s._ownerWritableStream,a=o._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:Os(o._writableStreamController)}function Is(s){let o=s._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Bs(s,a),Xl(s,a),o._writer=void 0,s._ownerWritableStream=void 0}function na(s,o){let a=s._ownerWritableStream,l=a._writableStreamController,c=Zl(l,o);if(a!==s._ownerWritableStream)return p(Xe("write to"));let y=a._state;if(y==="errored")return p(a._storedError);if(st(a)||y==="closed")return p(new TypeError("The stream is closing or closed and cannot be written to"));if(y==="erroring")return p(a._storedError);let w=Cs(a);return zs(l,o,c),w}let oa={};class Ar{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Ht(this))throw en("abortReason");return this._abortReason}get signal(){if(!Ht(this))throw en("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(o=void 0){if(!Ht(this))throw en("error");this._controlledWritableStream._state==="writable"&&Wo(this,o)}[Ui](o){let a=this._abortAlgorithm(o);return Uo(this),a}[qi](){Ut(this)}}Object.defineProperties(Ar.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ar.prototype,e.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Ht(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_controlledWritableStream")?!1:s instanceof Ar}function Fo(s,o,a,l,c,y,w,E){o._controlledWritableStream=s,s._writableStreamController=o,o._queue=void 0,o._queueTotalSize=void 0,Ut(o),o._abortReason=void 0,o._abortController=Vl(),o._started=!1,o._strategySizeAlgorithm=E,o._strategyHWM=w,o._writeAlgorithm=l,o._closeAlgorithm=c,o._abortAlgorithm=y;let I=aa(o);Xr(s,I);let F=a(),N=_(F);v(N,()=>{o._started=!0,No(o)},W=>{o._started=!0,ta(s,W)})}function Ds(s,o,a,l){let c=Object.create(Ar.prototype),y=()=>{},w=()=>_(void 0),E=()=>_(void 0),I=()=>_(void 0);o.start!==void 0&&(y=()=>o.start(c)),o.write!==void 0&&(w=F=>o.write(F,c)),o.close!==void 0&&(E=()=>o.close()),o.abort!==void 0&&(I=F=>o.abort(F)),Fo(s,c,y,w,E,I,a,l)}function Uo(s){s._writeAlgorithm=void 0,s._closeAlgorithm=void 0,s._abortAlgorithm=void 0,s._strategySizeAlgorithm=void 0}function qo(s){Dn(s,oa,0),No(s)}function Zl(s,o){try{return s._strategySizeAlgorithm(o)}catch(a){return Zr(s,a),1}}function Os(s){return s._strategyHWM-s._queueTotalSize}function zs(s,o,a){try{Dn(s,o,a)}catch(c){Zr(s,c);return}let l=s._controlledWritableStream;if(!st(l)&&l._state==="writable"){let c=aa(s);Xr(l,c)}No(s)}function No(s){let o=s._controlledWritableStream;if(!s._started||o._inFlightWriteRequest!==void 0)return;if(o._state==="erroring"){jn(o);return}if(s._queue.length===0)return;let l=Ki(s);l===oa?ia(s):ef(s,l)}function Zr(s,o){s._controlledWritableStream._state==="writable"&&Wo(s,o)}function ia(s){let o=s._controlledWritableStream;Kl(o),Ao(s);let a=s._closeAlgorithm();Uo(s),v(a,()=>{Gl(o)},l=>{Ql(o,l)})}function ef(s,o){let a=s._controlledWritableStream;Jl(a);let l=s._writeAlgorithm(o);v(l,()=>{ra(a);let c=a._state;if(Ao(s),!st(a)&&c==="writable"){let y=aa(s);Xr(a,y)}No(s)},c=>{a._state==="writable"&&Uo(s),Yl(a,c)})}function aa(s){return Os(s)<=0}function Wo(s,o){let a=s._controlledWritableStream;Uo(s),Mn(a,o)}function $n(s){return new TypeError(`WritableStream.prototype.${s} can only be used on a WritableStream`)}function en(s){return new TypeError(`WritableStreamDefaultController.prototype.${s} can only be used on a WritableStreamDefaultController`)}function At(s){return new TypeError(`WritableStreamDefaultWriter.prototype.${s} can only be used on a WritableStreamDefaultWriter`)}function Xe(s){return new TypeError("Cannot "+s+" a stream using a released writer")}function Vt(s){s._closedPromise=S((o,a)=>{s._closedPromise_resolve=o,s._closedPromise_reject=a,s._closedPromiseState="pending"})}function Hn(s,o){Vt(s),sa(s,o)}function Ls(s){Vt(s),Fs(s)}function sa(s,o){s._closedPromise_reject!==void 0&&(B(s._closedPromise),s._closedPromise_reject(o),s._closedPromise_resolve=void 0,s._closedPromise_reject=void 0,s._closedPromiseState="rejected")}function ua(s,o){Hn(s,o)}function Fs(s){s._closedPromise_resolve!==void 0&&(s._closedPromise_resolve(void 0),s._closedPromise_resolve=void 0,s._closedPromise_reject=void 0,s._closedPromiseState="resolved")}function Vn(s){s._readyPromise=S((o,a)=>{s._readyPromise_resolve=o,s._readyPromise_reject=a}),s._readyPromiseState="pending"}function tn(s,o){Vn(s),la(s,o)}function Mo(s){Vn(s),fa(s)}function la(s,o){s._readyPromise_reject!==void 0&&(B(s._readyPromise),s._readyPromise_reject(o),s._readyPromise_resolve=void 0,s._readyPromise_reject=void 0,s._readyPromiseState="rejected")}function Us(s){Vn(s)}function tf(s,o){tn(s,o)}function fa(s){s._readyPromise_resolve!==void 0&&(s._readyPromise_resolve(void 0),s._readyPromise_resolve=void 0,s._readyPromise_reject=void 0,s._readyPromiseState="fulfilled")}let jo=typeof DOMException<"u"?DOMException:void 0;function qs(s){if(!(typeof s=="function"||typeof s=="object"))return!1;try{return new s,!0}catch{return!1}}function rf(){let s=function(a,l){this.message=a||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return s.prototype=Object.create(Error.prototype),Object.defineProperty(s.prototype,"constructor",{value:s,writable:!0,configurable:!0}),s}let nf=qs(jo)?jo:rf();function Ns(s,o,a,l,c,y){let w=Ge(s),E=Jr(o);s._disturbed=!0;let I=!1,F=_(void 0);return S((N,W)=>{let Y;if(y!==void 0){if(Y=()=>{let j=new nf("Aborted","AbortError"),$=[];l||$.push(()=>o._state==="writable"?Tt(o,j):_(void 0)),c||$.push(()=>s._state==="readable"?ye(s,j):_(void 0)),ne(()=>Promise.all($.map(U=>U())),!0,j)},y.aborted){Y();return}y.addEventListener("abort",Y)}function re(){return S((j,$)=>{function U(J){J?j():g(we(),U,$)}U(!1)})}function we(){return I?_(!0):g(E._readyPromise,()=>S((j,$)=>{vt(w,{_chunkSteps:U=>{F=g(na(E,U),void 0,t),j(!1)},_closeSteps:()=>j(!0),_errorSteps:$})}))}if(_e(s,w._closedPromise,j=>{l?ce(!0,j):ne(()=>Tt(o,j),!0,j)}),_e(o,E._closedPromise,j=>{c?ce(!0,j):ne(()=>ye(s,j),!0,j)}),se(s,w._closedPromise,()=>{a?ce():ne(()=>ks(E))}),st(o)||o._state==="closed"){let j=new TypeError("the destination writable stream closed before all data could be piped to it");c?ce(!0,j):ne(()=>ye(s,j),!0,j)}B(re());function ze(){let j=F;return g(F,()=>j!==F?ze():void 0)}function _e(j,$,U){j._state==="errored"?U(j._storedError):R($,U)}function se(j,$,U){j._state==="closed"?U():P($,U)}function ne(j,$,U){if(I)return;I=!0,o._state==="writable"&&!st(o)?P(ze(),J):J();function J(){v(j(),()=>de($,U),ie=>de(!0,ie))}}function ce(j,$){I||(I=!0,o._state==="writable"&&!st(o)?P(ze(),()=>de(j,$)):de(j,$))}function de(j,$){Is(E),Z(w),y!==void 0&&y.removeEventListener("abort",Y),j?W($):N(void 0)}})}class Cr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ct(this))throw $o("desiredSize");return lt(this)}close(){if(!Ct(this))throw $o("close");if(!nn(this))throw new TypeError("The stream is not in a state that permits close");Gt(this)}enqueue(o=void 0){if(!Ct(this))throw $o("enqueue");if(!nn(this))throw new TypeError("The stream is not in a state that permits enqueue");return Qt(this,o)}error(o=void 0){if(!Ct(this))throw $o("error");Ze(this,o)}[Tn](o){Ut(this);let a=this._cancelAlgorithm(o);return Yn(this),a}[An](o){let a=this._controlledReadableStream;if(this._queue.length>0){let l=Ao(this);this._closeRequested&&this._queue.length===0?(Yn(this),Ce(a)):Yt(this),o._chunkSteps(l)}else $i(a,o),Yt(this)}}Object.defineProperties(Cr.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,e.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Ct(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_controlledReadableStream")?!1:s instanceof Cr}function Yt(s){if(!rn(s))return;if(s._pulling){s._pullAgain=!0;return}s._pulling=!0;let a=s._pullAlgorithm();v(a,()=>{s._pulling=!1,s._pullAgain&&(s._pullAgain=!1,Yt(s))},l=>{Ze(s,l)})}function rn(s){let o=s._controlledReadableStream;return!nn(s)||!s._started?!1:!!(Ae(o)&&br(o)>0||lt(s)>0)}function Yn(s){s._pullAlgorithm=void 0,s._cancelAlgorithm=void 0,s._strategySizeAlgorithm=void 0}function Gt(s){if(!nn(s))return;let o=s._controlledReadableStream;s._closeRequested=!0,s._queue.length===0&&(Yn(s),Ce(o))}function Qt(s,o){if(!nn(s))return;let a=s._controlledReadableStream;if(Ae(a)&&br(a)>0)Bn(a,o,!1);else{let l;try{l=s._strategySizeAlgorithm(o)}catch(c){throw Ze(s,c),c}try{Dn(s,o,l)}catch(c){throw Ze(s,c),c}}Yt(s)}function Ze(s,o){let a=s._controlledReadableStream;a._state==="readable"&&(Ut(s),Yn(s),on(a,o))}function lt(s){let o=s._controlledReadableStream._state;return o==="errored"?null:o==="closed"?0:s._strategyHWM-s._queueTotalSize}function ca(s){return!rn(s)}function nn(s){let o=s._controlledReadableStream._state;return!s._closeRequested&&o==="readable"}function xr(s,o,a,l,c,y,w){o._controlledReadableStream=s,o._queue=void 0,o._queueTotalSize=void 0,Ut(o),o._started=!1,o._closeRequested=!1,o._pullAgain=!1,o._pulling=!1,o._strategySizeAlgorithm=w,o._strategyHWM=y,o._pullAlgorithm=l,o._cancelAlgorithm=c,s._readableStreamController=o;let E=a();v(_(E),()=>{o._started=!0,Yt(o)},I=>{Ze(o,I)})}function Ws(s,o,a,l){let c=Object.create(Cr.prototype),y=()=>{},w=()=>_(void 0),E=()=>_(void 0);o.start!==void 0&&(y=()=>o.start(c)),o.pull!==void 0&&(w=()=>o.pull(c)),o.cancel!==void 0&&(E=I=>o.cancel(I)),xr(s,c,y,w,E,a,l)}function $o(s){return new TypeError(`ReadableStreamDefaultController.prototype.${s} can only be used on a ReadableStreamDefaultController`)}function Ho(s,o){return je(s._readableStreamController)?af(s):of(s)}function of(s,o){let a=Ge(s),l=!1,c=!1,y=!1,w=!1,E,I,F,N,W,Y=S(se=>{W=se});function re(){return l?(c=!0,_(void 0)):(l=!0,vt(a,{_chunkSteps:ne=>{C(()=>{c=!1;let ce=ne,de=ne;y||Qt(F._readableStreamController,ce),w||Qt(N._readableStreamController,de),l=!1,c&&re()})},_closeSteps:()=>{l=!1,y||Gt(F._readableStreamController),w||Gt(N._readableStreamController),(!y||!w)&&W(void 0)},_errorSteps:()=>{l=!1}}),_(void 0))}function we(se){if(y=!0,E=se,w){let ne=Gr([E,I]),ce=ye(s,ne);W(ce)}return Y}function ze(se){if(w=!0,I=se,y){let ne=Gr([E,I]),ce=ye(s,ne);W(ce)}return Y}function _e(){}return F=ft(_e,re,we),N=ft(_e,re,ze),R(a._closedPromise,se=>{Ze(F._readableStreamController,se),Ze(N._readableStreamController,se),(!y||!w)&&W(void 0)}),[F,N]}function af(s){let o=Ge(s),a=!1,l=!1,c=!1,y=!1,w=!1,E,I,F,N,W,Y=S(j=>{W=j});function re(j){R(j._closedPromise,$=>{j===o&&(Ie(F._readableStreamController,$),Ie(N._readableStreamController,$),(!y||!w)&&W(void 0))})}function we(){Qe(o)&&(Z(o),o=Ge(s),re(o)),vt(o,{_chunkSteps:$=>{C(()=>{l=!1,c=!1;let U=$,J=$;if(!y&&!w)try{J=bs($)}catch(ie){Ie(F._readableStreamController,ie),Ie(N._readableStreamController,ie),W(ye(s,ie));return}y||Wt(F._readableStreamController,U),w||Wt(N._readableStreamController,J),a=!1,l?_e():c&&se()})},_closeSteps:()=>{a=!1,y||Nt(F._readableStreamController),w||Nt(N._readableStreamController),F._readableStreamController._pendingPullIntos.length>0&&Fn(F._readableStreamController,0),N._readableStreamController._pendingPullIntos.length>0&&Fn(N._readableStreamController,0),(!y||!w)&&W(void 0)},_errorSteps:()=>{a=!1}})}function ze(j,$){Te(o)&&(Z(o),o=Kr(s),re(o));let U=$?N:F,J=$?F:N;Mt(o,j,{_chunkSteps:xe=>{C(()=>{l=!1,c=!1;let Le=$?w:y;if($?y:w)Le||wr(U._readableStreamController,xe);else{let an;try{an=bs(xe)}catch(Xo){Ie(U._readableStreamController,Xo),Ie(J._readableStreamController,Xo),W(ye(s,Xo));return}Le||wr(U._readableStreamController,xe),Wt(J._readableStreamController,an)}a=!1,l?_e():c&&se()})},_closeSteps:xe=>{a=!1;let Le=$?w:y,xt=$?y:w;Le||Nt(U._readableStreamController),xt||Nt(J._readableStreamController),xe!==void 0&&(Le||wr(U._readableStreamController,xe),!xt&&J._readableStreamController._pendingPullIntos.length>0&&Fn(J._readableStreamController,0)),(!Le||!xt)&&W(void 0)},_errorSteps:()=>{a=!1}})}function _e(){if(a)return l=!0,_(void 0);a=!0;let j=Oe(F._readableStreamController);return j===null?we():ze(j._view,!1),_(void 0)}function se(){if(a)return c=!0,_(void 0);a=!0;let j=Oe(N._readableStreamController);return j===null?we():ze(j._view,!0),_(void 0)}function ne(j){if(y=!0,E=j,w){let $=Gr([E,I]),U=ye(s,$);W(U)}return Y}function ce(j){if(w=!0,I=j,y){let $=Gr([E,I]),U=ye(s,$);W(U)}return Y}function de(){}return F=Vo(de,_e,ne),N=Vo(de,se,ce),re(o),[F,N]}function sf(s,o){be(s,o);let a=s,l=a?.autoAllocateChunkSize,c=a?.cancel,y=a?.pull,w=a?.start,E=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:ji(l,`${o} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:uf(c,a,`${o} has member 'cancel' that`),pull:y===void 0?void 0:lf(y,a,`${o} has member 'pull' that`),start:w===void 0?void 0:ff(w,a,`${o} has member 'start' that`),type:E===void 0?void 0:cf(E,`${o} has member 'type' that`)}}function uf(s,o,a){return fe(s,a),l=>A(s,o,[l])}function lf(s,o,a){return fe(s,a),l=>A(s,o,[l])}function ff(s,o,a){return fe(s,a),l=>O(s,o,[l])}function cf(s,o){if(s=`${s}`,s!=="bytes")throw new TypeError(`${o} '${s}' is not a valid enumeration value for ReadableStreamType`);return s}function df(s,o){be(s,o);let a=s?.mode;return{mode:a===void 0?void 0:hf(a,`${o} has member 'mode' that`)}}function hf(s,o){if(s=`${s}`,s!=="byob")throw new TypeError(`${o} '${s}' is not a valid enumeration value for ReadableStreamReaderMode`);return s}function pf(s,o){be(s,o);let a=s?.preventCancel;return{preventCancel:Boolean(a)}}function Ms(s,o){be(s,o);let a=s?.preventAbort,l=s?.preventCancel,c=s?.preventClose,y=s?.signal;return y!==void 0&&js(y,`${o} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(l),preventClose:Boolean(c),signal:y}}function js(s,o){if(!Rs(s))throw new TypeError(`${o} is not an AbortSignal.`)}function mf(s,o){be(s,o);let a=s?.readable;Cn(a,"readable","ReadableWritablePair"),kn(a,`${o} has member 'readable' that`);let l=s?.writable;return Cn(l,"writable","ReadableWritablePair"),Es(l,`${o} has member 'writable' that`),{readable:a,writable:l}}class Kt{constructor(o={},a={}){o===void 0?o=null:Wi(o,"First parameter");let l=vr(a,"Second parameter"),c=sf(o,"First parameter");if(Yo(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let y=jt(l,0);_s(this,c,y)}else{let y=$t(l),w=jt(l,1);Ws(this,c,w,y)}}get locked(){if(!ct(this))throw Jt("locked");return Ae(this)}cancel(o=void 0){return ct(this)?Ae(this)?p(new TypeError("Cannot cancel a stream that already has a reader")):ye(this,o):p(Jt("cancel"))}getReader(o=void 0){if(!ct(this))throw Jt("getReader");return df(o,"First parameter").mode===void 0?Ge(this):Kr(this)}pipeThrough(o,a={}){if(!ct(this))throw Jt("pipeThrough");ge(o,1,"pipeThrough");let l=mf(o,"First parameter"),c=Ms(a,"Second parameter");if(Ae(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ke(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let y=Ns(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return B(y),l.readable}pipeTo(o,a={}){if(!ct(this))return p(Jt("pipeTo"));if(o===void 0)return p("Parameter 1 is required in 'pipeTo'.");if(!Er(o))return p(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=Ms(a,"Second parameter")}catch(c){return p(c)}return Ae(this)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ke(o)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ns(this,o,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!ct(this))throw Jt("tee");let o=Ho(this);return Gr(o)}values(o=void 0){if(!ct(this))throw Jt("values");let a=pf(o,"First parameter");return ps(this,a.preventCancel)}}Object.defineProperties(Kt.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Kt.prototype,e.toStringTag,{value:"ReadableStream",configurable:!0}),typeof e.asyncIterator=="symbol"&&Object.defineProperty(Kt.prototype,e.asyncIterator,{value:Kt.prototype.values,writable:!0,configurable:!0});function ft(s,o,a,l=1,c=()=>1){let y=Object.create(Kt.prototype);Yo(y);let w=Object.create(Cr.prototype);return xr(y,w,s,o,a,l,c),y}function Vo(s,o,a){let l=Object.create(Kt.prototype);Yo(l);let c=Object.create(at.prototype);return Un(l,c,s,o,a,0,void 0),l}function Yo(s){s._state="readable",s._reader=void 0,s._storedError=void 0,s._disturbed=!1}function ct(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_readableStreamController")?!1:s instanceof Kt}function Ae(s){return s._reader!==void 0}function ye(s,o){if(s._disturbed=!0,s._state==="closed")return _(void 0);if(s._state==="errored")return p(s._storedError);Ce(s);let a=s._reader;a!==void 0&&Qe(a)&&(a._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),a._readIntoRequests=new D);let l=s._readableStreamController[Tn](o);return T(l,t)}function Ce(s){s._state="closed";let o=s._reader;o!==void 0&&(Fi(o),Te(o)&&(o._readRequests.forEach(a=>{a._closeSteps()}),o._readRequests=new D))}function on(s,o){s._state="errored",s._storedError=o;let a=s._reader;a!==void 0&&(Rn(a,o),Te(a)?(a._readRequests.forEach(l=>{l._errorSteps(o)}),a._readRequests=new D):(a._readIntoRequests.forEach(l=>{l._errorSteps(o)}),a._readIntoRequests=new D))}function Jt(s){return new TypeError(`ReadableStream.prototype.${s} can only be used on a ReadableStream`)}function Xt(s,o){be(s,o);let a=s?.highWaterMark;return Cn(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:xn(a)}}let da=s=>s.byteLength;try{Object.defineProperty(da,"name",{value:"size",configurable:!0})}catch{}class Gn{constructor(o){ge(o,1,"ByteLengthQueuingStrategy"),o=Xt(o,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=o.highWaterMark}get highWaterMark(){if(!ha(this))throw Qn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!ha(this))throw Qn("size");return da}}Object.defineProperties(Gn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Gn.prototype,e.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Qn(s){return new TypeError(`ByteLengthQueuingStrategy.prototype.${s} can only be used on a ByteLengthQueuingStrategy`)}function ha(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_byteLengthQueuingStrategyHighWaterMark")?!1:s instanceof Gn}let pa=()=>1;try{Object.defineProperty(pa,"name",{value:"size",configurable:!0})}catch{}class Kn{constructor(o){ge(o,1,"CountQueuingStrategy"),o=Xt(o,"First parameter"),this._countQueuingStrategyHighWaterMark=o.highWaterMark}get highWaterMark(){if(!ma(this))throw Jn("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!ma(this))throw Jn("size");return pa}}Object.defineProperties(Kn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Kn.prototype,e.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Jn(s){return new TypeError(`CountQueuingStrategy.prototype.${s} can only be used on a CountQueuingStrategy`)}function ma(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_countQueuingStrategyHighWaterMark")?!1:s instanceof Kn}function $s(s,o){be(s,o);let a=s?.flush,l=s?.readableType,c=s?.start,y=s?.transform,w=s?.writableType;return{flush:a===void 0?void 0:yf(a,s,`${o} has member 'flush' that`),readableType:l,start:c===void 0?void 0:bf(c,s,`${o} has member 'start' that`),transform:y===void 0?void 0:gf(y,s,`${o} has member 'transform' that`),writableType:w}}function yf(s,o,a){return fe(s,a),l=>A(s,o,[l])}function bf(s,o,a){return fe(s,a),l=>O(s,o,[l])}function gf(s,o,a){return fe(s,a),(l,c)=>A(s,o,[l,c])}class Go{constructor(o={},a={},l={}){o===void 0&&(o=null);let c=vr(a,"Second parameter"),y=vr(l,"Third parameter"),w=$s(o,"First parameter");if(w.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(w.writableType!==void 0)throw new RangeError("Invalid writableType specified");let E=jt(y,0),I=$t(y),F=jt(c,1),N=$t(c),W,Y=S(re=>{W=re});Qo(this,Y,F,N,E,I),wf(this,w),w.start!==void 0?W(w.start(this._transformStreamController)):W(void 0)}get readable(){if(!Hs(this))throw Zn("readable");return this._readable}get writable(){if(!Hs(this))throw Zn("writable");return this._writable}}Object.defineProperties(Go.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Go.prototype,e.toStringTag,{value:"TransformStream",configurable:!0});function Qo(s,o,a,l,c,y){function w(){return o}function E(Y){return _f(s,Y)}function I(Y){return Sf(s,Y)}function F(){return vf(s)}s._writable=Ts(w,E,F,I,a,l);function N(){return Ef(s)}function W(Y){return kr(s,Y),_(void 0)}s._readable=ft(w,N,W,c,y),s._backpressure=void 0,s._backpressureChangePromise=void 0,s._backpressureChangePromise_resolve=void 0,Br(s,!0),s._transformStreamController=void 0}function Hs(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_transformStreamController")?!1:s instanceof Go}function Xn(s,o){Ze(s._readable._readableStreamController,o),kr(s,o)}function kr(s,o){Vs(s._transformStreamController),Zr(s._writable._writableStreamController,o),s._backpressure&&Br(s,!1)}function Br(s,o){s._backpressureChangePromise!==void 0&&s._backpressureChangePromise_resolve(),s._backpressureChangePromise=S(a=>{s._backpressureChangePromise_resolve=a}),s._backpressure=o}class Zt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!er(this))throw Jo("desiredSize");let o=this._controlledTransformStream._readable._readableStreamController;return lt(o)}enqueue(o=void 0){if(!er(this))throw Jo("enqueue");ya(this,o)}error(o=void 0){if(!er(this))throw Jo("error");Ys(this,o)}terminate(){if(!er(this))throw Jo("terminate");Qs(this)}}Object.defineProperties(Zt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Zt.prototype,e.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function er(s){return!u(s)||!Object.prototype.hasOwnProperty.call(s,"_controlledTransformStream")?!1:s instanceof Zt}function Ko(s,o,a,l){o._controlledTransformStream=s,s._transformStreamController=o,o._transformAlgorithm=a,o._flushAlgorithm=l}function wf(s,o){let a=Object.create(Zt.prototype),l=y=>{try{return ya(a,y),_(void 0)}catch(w){return p(w)}},c=()=>_(void 0);o.transform!==void 0&&(l=y=>o.transform(y,a)),o.flush!==void 0&&(c=()=>o.flush(a)),Ko(s,a,l,c)}function Vs(s){s._transformAlgorithm=void 0,s._flushAlgorithm=void 0}function ya(s,o){let a=s._controlledTransformStream,l=a._readable._readableStreamController;if(!nn(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Qt(l,o)}catch(y){throw kr(a,y),a._readable._storedError}ca(l)!==a._backpressure&&Br(a,!0)}function Ys(s,o){Xn(s._controlledTransformStream,o)}function Gs(s,o){let a=s._transformAlgorithm(o);return T(a,void 0,l=>{throw Xn(s._controlledTransformStream,l),l})}function Qs(s){let o=s._controlledTransformStream,a=o._readable._readableStreamController;Gt(a);let l=new TypeError("TransformStream terminated");kr(o,l)}function _f(s,o){let a=s._transformStreamController;if(s._backpressure){let l=s._backpressureChangePromise;return T(l,()=>{let c=s._writable;if(c._state==="erroring")throw c._storedError;return Gs(a,o)})}return Gs(a,o)}function Sf(s,o){return Xn(s,o),_(void 0)}function vf(s){let o=s._readable,a=s._transformStreamController,l=a._flushAlgorithm();return Vs(a),T(l,()=>{if(o._state==="errored")throw o._storedError;Gt(o._readableStreamController)},c=>{throw Xn(s,c),o._storedError})}function Ef(s){return Br(s,!1),s._backpressureChangePromise}function Jo(s){return new TypeError(`TransformStreamDefaultController.prototype.${s} can only be used on a TransformStreamDefaultController`)}function Zn(s){return new TypeError(`TransformStream.prototype.${s} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Gn,r.CountQueuingStrategy=Kn,r.ReadableByteStreamController=at,r.ReadableStream=Kt,r.ReadableStreamBYOBReader=Sr,r.ReadableStreamBYOBRequest=Me,r.ReadableStreamDefaultController=Cr,r.ReadableStreamDefaultReader=St,r.TransformStream=Go,r.TransformStreamDefaultController=Zt,r.WritableStream=Nn,r.WritableStreamDefaultController=Ar,r.WritableStreamDefaultWriter=Rr,Object.defineProperty(r,"__esModule",{value:!0})})});var r_=z(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:e}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=e}catch(t){throw r.emitWarning=e,t}}catch{Object.assign(globalThis,t_())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(t){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let d=await i.slice(n,Math.min(i.size,n+65536)).arrayBuffer();n+=d.byteLength,u.enqueue(new Uint8Array(d)),n===i.size&&u.close()}})})}catch{}});async function*zd(r,e=!0){for(let t of r)if("stream"in t)yield*t.stream();else if(ArrayBuffer.isView(t))if(e){let n=t.byteOffset,i=t.byteOffset+t.byteLength;for(;n!==i;){let u=Math.min(i-n,n_),f=t.buffer.slice(n,n+u);n+=f.byteLength,yield new Uint8Array(f)}}else yield t;else{let n=0,i=t;for(;n!==i.size;){let f=await i.slice(n,Math.min(i.size,n+n_)).arrayBuffer();n+=f.byteLength,yield new Uint8Array(f)}}}var QD,n_,o_,yA,Mr,ss=ba(()=>{QD=M(r_(),1);n_=65536;o_=class Ld{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],t={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof t!="object"&&typeof t!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");t===null&&(t={});let n=new TextEncoder;for(let u of e){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof Ld?f=u:f=n.encode(`${u}`);let d=ArrayBuffer.isView(f)?f.byteLength:f.size;d&&(this.#r+=d,this.#e.push(f))}this.#n=`${t.endings===void 0?"transparent":t.endings}`;let i=t.type===void 0?"":String(t.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,t="";for await(let n of zd(this.#e,!1))t+=e.decode(n,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){let e=new Uint8Array(this.size),t=0;for await(let n of zd(this.#e,!1))e.set(n,t),t+=n.length;return e.buffer}stream(){let e=zd(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){let n=await e.next();n.done?t.close():t.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,t=this.size,n=""){let{size:i}=this,u=e<0?Math.max(i+e,0):Math.min(e,i),f=t<0?Math.max(i+t,0):Math.min(t,i),d=Math.max(f-u,0),h=this.#e,m=[],b=0;for(let _ of h){if(b>=d)break;let p=ArrayBuffer.isView(_)?_.byteLength:_.size;if(u&&p<=u)u-=p,f-=p;else{let g;ArrayBuffer.isView(_)?(g=_.subarray(u,Math.min(p,f)),b+=g.byteLength):(g=_.slice(u,Math.min(p,f)),b+=g.size),f-=p,m.push(g),u=0}}let S=new Ld([],{type:String(n).toLowerCase()});return S.#r=d,S.#e=m,S}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(o_.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});yA=o_,Mr=yA});var bA,gA,Oi,Fd=ba(()=>{ss();bA=class extends Mr{#e=0;#t="";constructor(e,t,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),n===null&&(n={});let i=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(t)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Mr&&/^(File)$/.test(e[Symbol.toStringTag])}},gA=bA,Oi=gA});function s_(r,e=Mr){var t=`${i_()}${i_()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${t}\r
Content-Disposition: form-data; name="`;return r.forEach((u,f)=>typeof u=="string"?n.push(i+Ud(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+Ud(f)+`"; filename="${Ud(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),n.push(`--${t}--`),new e(n,{type:"multipart/form-data; boundary="+t})}var us,wA,_A,i_,SA,a_,Ud,So,vo,_l=ba(()=>{ss();Fd();({toStringTag:us,iterator:wA,hasInstance:_A}=Symbol),i_=Math.random,SA="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),a_=(r,e,t)=>(r+="",/^(Blob|File)$/.test(e&&e[us])?[(t=t!==void 0?t+"":e[us]=="File"?e.name:"blob",r),e.name!==t||e[us]=="blob"?new Oi([e],t,e):e]:[r,e+""]),Ud=(r,e)=>(e?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),So=(r,e,t)=>{if(e.length<t)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${t} arguments required, but only ${e.length} present.`)},vo=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[us](){return"FormData"}[wA](){return this.entries()}static[_A](e){return e&&typeof e=="object"&&e[us]==="FormData"&&!SA.some(t=>typeof e[t]!="function")}append(...e){So("append",arguments,2),this.#e.push(a_(...e))}delete(e){So("delete",arguments,1),e+="",this.#e=this.#e.filter(([t])=>t!==e)}get(e){So("get",arguments,1),e+="";for(var t=this.#e,n=t.length,i=0;i<n;i++)if(t[i][0]===e)return t[i][1];return null}getAll(e,t){return So("getAll",arguments,1),t=[],e+="",this.#e.forEach(n=>n[0]===e&&t.push(n[1])),t}has(e){return So("has",arguments,1),e+="",this.#e.some(t=>t[0]===e)}forEach(e,t){So("forEach",arguments,1);for(var[n,i]of this)e.call(t,i,n,this)}set(...e){So("set",arguments,2);var t=[],n=!0;e=a_(...e),this.#e.forEach(i=>{i[0]===e[0]?n&&(n=!t.push(e)):t.push(i)}),n&&t.push(e),this.#e=t}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var c_=z((u8,f_)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),e=new r().port1,t=new ArrayBuffer;e.postMessage(t,[t,t])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}f_.exports=globalThis.DOMException});var fs,d_,vA,vl,Nd=ba(()=>{fs=require("node:fs"),d_=M(c_(),1);Fd();ss();({stat:vA}=fs.promises),vl=class{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified,this.originalSize=e.originalSize===void 0?e.size:e.originalSize}slice(e,t){return new vl({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:t-e,start:this.#t+e})}async*stream(){let{mtimeMs:e,size:t}=await vA(this.#e);if(e>this.lastModified||this.originalSize!==t)throw new d_.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,fs.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var p_={};ke(p_,{toFormData:()=>kA});function xA(r){let e=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let t=e[2]||e[3]||"",n=t.slice(t.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),n}async function kA(r,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let t=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!t)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new Wd(t[1]||t[2]),i,u,f,d,h,m,b=[],S=new vo,_=R=>{f+=P.decode(R,{stream:!0})},p=R=>{b.push(R)},g=()=>{let R=new Oi(b,m,{type:h});S.append(d,R)},v=()=>{S.append(d,f)},P=new TextDecoder("utf-8");P.decode(),n.onPartBegin=function(){n.onPartData=_,n.onPartEnd=v,i="",u="",f="",d="",h="",m=null,b.length=0},n.onHeaderField=function(R){i+=P.decode(R,{stream:!0})},n.onHeaderValue=function(R){u+=P.decode(R,{stream:!0})},n.onHeaderEnd=function(){if(u+=P.decode(),i=i.toLowerCase(),i==="content-disposition"){let R=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);R&&(d=R[2]||R[3]||""),m=xA(u),m&&(n.onPartData=p,n.onPartEnd=g)}else i==="content-type"&&(h=u);u="",i=""};for await(let R of r)n.write(R);return n.end(),S}var mr,le,h_,En,El,Rl,EA,cs,RA,TA,AA,CA,Eo,Wd,m_=ba(()=>{Nd();_l();mr=0,le={START_BOUNDARY:mr++,HEADER_FIELD_START:mr++,HEADER_FIELD:mr++,HEADER_VALUE_START:mr++,HEADER_VALUE:mr++,HEADER_VALUE_ALMOST_DONE:mr++,HEADERS_ALMOST_DONE:mr++,PART_DATA_START:mr++,PART_DATA:mr++,END:mr++},h_=1,En={PART_BOUNDARY:h_,LAST_BOUNDARY:h_*=2},El=10,Rl=13,EA=32,cs=45,RA=58,TA=97,AA=122,CA=r=>r|32,Eo=()=>{},Wd=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=Eo,this.onHeaderField=Eo,this.onHeadersEnd=Eo,this.onHeaderValue=Eo,this.onPartBegin=Eo,this.onPartData=Eo,this.onPartEnd=Eo,this.boundaryChars={},e=`\r
--`+e;let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n),this.boundaryChars[t[n]]=!0;this.boundary=t,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=le.START_BOUNDARY}write(e){let t=0,n=e.length,i=this.index,{lookbehind:u,boundary:f,boundaryChars:d,index:h,state:m,flags:b}=this,S=this.boundary.length,_=S-1,p=e.length,g,v,P=C=>{this[C+"Mark"]=t},R=C=>{delete this[C+"Mark"]},T=(C,O,A,x)=>{(O===void 0||O!==A)&&this[C](x&&x.subarray(O,A))},B=(C,O)=>{let A=C+"Mark";A in this&&(O?(T(C,this[A],t,e),delete this[A]):(T(C,this[A],e.length,e),this[A]=0))};for(t=0;t<n;t++)switch(g=e[t],m){case le.START_BOUNDARY:if(h===f.length-2){if(g===cs)b|=En.LAST_BOUNDARY;else if(g!==Rl)return;h++;break}else if(h-1===f.length-2){if(b&En.LAST_BOUNDARY&&g===cs)m=le.END,b=0;else if(!(b&En.LAST_BOUNDARY)&&g===El)h=0,T("onPartBegin"),m=le.HEADER_FIELD_START;else return;break}g!==f[h+2]&&(h=-2),g===f[h+2]&&h++;break;case le.HEADER_FIELD_START:m=le.HEADER_FIELD,P("onHeaderField"),h=0;case le.HEADER_FIELD:if(g===Rl){R("onHeaderField"),m=le.HEADERS_ALMOST_DONE;break}if(h++,g===cs)break;if(g===RA){if(h===1)return;B("onHeaderField",!0),m=le.HEADER_VALUE_START;break}if(v=CA(g),v<TA||v>AA)return;break;case le.HEADER_VALUE_START:if(g===EA)break;P("onHeaderValue"),m=le.HEADER_VALUE;case le.HEADER_VALUE:g===Rl&&(B("onHeaderValue",!0),T("onHeaderEnd"),m=le.HEADER_VALUE_ALMOST_DONE);break;case le.HEADER_VALUE_ALMOST_DONE:if(g!==El)return;m=le.HEADER_FIELD_START;break;case le.HEADERS_ALMOST_DONE:if(g!==El)return;T("onHeadersEnd"),m=le.PART_DATA_START;break;case le.PART_DATA_START:m=le.PART_DATA,P("onPartData");case le.PART_DATA:if(i=h,h===0){for(t+=_;t<p&&!(e[t]in d);)t+=S;t-=_,g=e[t]}if(h<f.length)f[h]===g?(h===0&&B("onPartData",!0),h++):h=0;else if(h===f.length)h++,g===Rl?b|=En.PART_BOUNDARY:g===cs?b|=En.LAST_BOUNDARY:h=0;else if(h-1===f.length)if(b&En.PART_BOUNDARY){if(h=0,g===El){b&=~En.PART_BOUNDARY,T("onPartEnd"),T("onPartBegin"),m=le.HEADER_FIELD_START;break}}else b&En.LAST_BOUNDARY&&g===cs?(T("onPartEnd"),m=le.END,b=0):h=0;if(h>0)u[h-1]=g;else if(i>0){let C=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);T("onPartData",0,i,C),i=0,P("onPartData"),t--}break;case le.END:break;default:throw new Error(`Unexpected state entered: ${m}`)}B("onHeaderField"),B("onHeaderValue"),B("onPartData"),this.index=h,this.state=m,this.flags=b}end(){if(this.state===le.HEADER_FIELD_START&&this.index===0||this.state===le.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==le.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var NA=Symbol("TIMEOUT");function M_(r){if(typeof r.next=="function")return r;if(typeof r[Symbol.iterator]=="function")return r[Symbol.iterator]();if(typeof r[Symbol.asyncIterator]=="function")return r[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function j_(){let r,e;return{promise:new Promise((n,i)=>{e=n,r=i}),reject:r,resolve:e}}function $_(r,e,t){let n=M_(t),i=[],u=[],f=!1,d=!1,h=0,m=null;function b(){for(;u.length>0&&i.length>0;){let{resolve:v}=u.shift(),P=i.shift();v({done:!1,value:P})}for(;u.length>0&&h===0&&f;){let{resolve:v,reject:P}=u.shift();m?(P(m),m=null):v({done:!0,value:void 0})}}async function S(){if(f){b();return}if(!d&&!(h+i.length>=r)){d=!0,h++;try{let{done:v,value:P}=await n.next();v?(f=!0,h--,b()):_(P)}catch(v){f=!0,h--,m=v,b()}d=!1,S()}}async function _(v){try{let P=await e(v);i.push(P)}catch(P){f=!0,m=P}h--,b(),S()}async function p(){if(i.length===0){let P=j_();return u.push(P),S(),P.promise}let v=i.shift();return S(),{done:!1,value:v}}let g={next:p,[Symbol.asyncIterator]:()=>g};return g}function ga(r,e,t){return e===void 0?(n,i)=>i?ga(r,n,i):ga(r,n):t===void 0?n=>ga(r,e,n):$_(r,e,t)}var yl=M(Xd(),1);var xp=M(require("fs"),1),kp=require("util");var fn=M(xf(),1);var lS=fh,uh=128,fS=127,cS=~fS,dS=Math.pow(2,31);function fh(r,e,t){e=e||[],t=t||0;for(var n=t;r>=dS;)e[t++]=r&255|uh,r/=128;for(;r&cS;)e[t++]=r&255|uh,r>>>=7;return e[t]=r|0,fh.bytes=t-n+1,e}var hS=kf,pS=128,lh=127;function kf(r,n){var t=0,n=n||0,i=0,u=n,f,d=r.length;do{if(u>=d)throw kf.bytes=0,new RangeError("Could not decode varint");f=r[u++],t+=i<28?(f&lh)<<i:(f&lh)*Math.pow(2,i),i+=7}while(f>=pS);return kf.bytes=u-n,t}var mS=Math.pow(2,7),yS=Math.pow(2,14),bS=Math.pow(2,21),gS=Math.pow(2,28),wS=Math.pow(2,35),_S=Math.pow(2,42),SS=Math.pow(2,49),vS=Math.pow(2,56),ES=Math.pow(2,63),RS=function(r){return r<mS?1:r<yS?2:r<bS?3:r<gS?4:r<wS?5:r<_S?6:r<SS?7:r<vS?8:r<ES?9:10},TS={encode:lS,decode:hS,encodingLength:RS},AS=TS,wa=AS;var _a=r=>[wa.decode(r),wa.decode.bytes],Zo=(r,e,t=0)=>(wa.encode(r,e,t),e),ei=r=>wa.encodingLength(r);var ti={};ke(ti,{coerce:()=>Fe,empty:()=>ch,equals:()=>Bf,fromHex:()=>xS,fromString:()=>Pf,isBinary:()=>kS,toHex:()=>CS,toString:()=>If});var ch=new Uint8Array(0),CS=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),xS=r=>{let e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):ch},Bf=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Fe=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},kS=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),Pf=r=>new TextEncoder().encode(r),If=r=>new TextDecoder().decode(r);var to=(r,e)=>{let t=e.byteLength,n=ei(r),i=n+ei(t),u=new Uint8Array(i+t);return Zo(r,u,0),Zo(t,u,n),u.set(e,i),new ri(r,t,e,u)},ni=r=>{let e=Fe(r),[t,n]=_a(e),[i,u]=_a(e.subarray(n)),f=e.subarray(n+u);if(f.byteLength!==i)throw new Error("Incorrect length");return new ri(t,i,f,e)},dh=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&Bf(r.bytes,e.bytes),ri=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Ff={};ke(Ff,{base58btc:()=>tr,base58flickr:()=>zS});function BS(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var u=r.charAt(i),f=u.charCodeAt(0);if(t[f]!==255)throw new TypeError(u+" is ambiguous");t[f]=i}var d=r.length,h=r.charAt(0),m=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function S(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var v=0,P=0,R=0,T=g.length;R!==T&&g[R]===0;)R++,v++;for(var B=(T-R)*b+1>>>0,C=new Uint8Array(B);R!==T;){for(var O=g[R],A=0,x=B-1;(O!==0||A<P)&&x!==-1;x--,A++)O+=256*C[x]>>>0,C[x]=O%d>>>0,O=O/d>>>0;if(O!==0)throw new Error("Non-zero carry");P=A,R++}for(var D=B-P;D!==B&&C[D]===0;)D++;for(var G=h.repeat(v);D<B;++D)G+=r.charAt(C[D]);return G}function _(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var v=0;if(g[v]!==" "){for(var P=0,R=0;g[v]===h;)P++,v++;for(var T=(g.length-v)*m+1>>>0,B=new Uint8Array(T);g[v];){var C=t[g.charCodeAt(v)];if(C===255)return;for(var O=0,A=T-1;(C!==0||O<R)&&A!==-1;A--,O++)C+=d*B[A]>>>0,B[A]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");R=O,v++}if(g[v]!==" "){for(var x=T-R;x!==T&&B[x]===0;)x++;for(var D=new Uint8Array(P+(T-x)),G=P;x!==T;)D[G++]=B[x++];return D}}}function p(g){var v=_(g);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:_,decode:p}}var PS=BS,IS=PS,hh=IS;var Df=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Of=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return ph(this,e)}},zf=class{constructor(e){this.decoders=e}or(e){return ph(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ph=(r,e)=>new zf({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Lf=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Df(e,t,n),this.decoder=new Of(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Zs=({name:r,prefix:e,encode:t,decode:n})=>new Lf(r,e,t,n),sn=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=hh(t,e);return Zs({prefix:r,name:e,encode:n,decode:u=>Fe(i(u))})},DS=(r,e,t,n)=>{let i={};for(let b=0;b<e.length;++b)i[e[b]]=b;let u=r.length;for(;r[u-1]==="=";)--u;let f=new Uint8Array(u*t/8|0),d=0,h=0,m=0;for(let b=0;b<u;++b){let S=i[r[b]];if(S===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<t|S,d+=t,d>=8&&(d-=8,f[m++]=255&h>>d)}if(d>=t||255&h<<8-d)throw new SyntaxError("Unexpected end of data");return f},OS=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,u="",f=0,d=0;for(let h=0;h<r.length;++h)for(d=d<<8|r[h],f+=8;f>t;)f-=t,u+=e[i&d>>f];if(f&&(u+=e[i&d<<t-f]),n)for(;u.length*t&7;)u+="=";return u},he=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Zs({prefix:e,name:r,encode(i){return OS(i,n,t)},decode(i){return DS(i,n,t,r)}});var tr=sn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zS=sn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Uf={};ke(Uf,{base32:()=>no,base32hex:()=>qS,base32hexpad:()=>WS,base32hexpadupper:()=>MS,base32hexupper:()=>NS,base32pad:()=>FS,base32padupper:()=>US,base32upper:()=>LS,base32z:()=>jS});var no=he({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),LS=he({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),FS=he({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),US=he({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qS=he({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),NS=he({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),WS=he({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),MS=he({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),jS=he({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var V=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:tu,byteLength:tu,code:eu,version:eu,multihash:eu,bytes:eu,_baseCache:tu,asCID:tu})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Sa)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==YS)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return V.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=to(e,t);return V.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&dh(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return HS(t,i,e||tr.encoder);default:return VS(t,i,e||no.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return QS(/^0\.0/,KS),!!(e&&(e[yh]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof V)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:u}=e;return new V(t,n,i,u||mh(t,n,i.bytes))}else if(e!=null&&e[yh]===!0){let{version:t,multihash:n,code:i}=e,u=ni(n);return V.create(t,i,u)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Sa)throw new Error(`Version 0 CID must use dag-pb (code: ${Sa}) block encoding`);return new V(e,t,n,n.bytes)}case 1:{let i=mh(e,t,n.bytes);return new V(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return V.create(0,Sa,e)}static createV1(e,t){return V.create(1,e,t)}static decode(e){let[t,n]=V.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=V.inspectBytes(e),n=t.size-t.multihashSize,i=Fe(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let u=i.subarray(t.multihashSize-t.digestSize),f=new ri(t.multihashCode,t.digestSize,u,i);return[t.version===0?V.createV0(f):V.createV1(t.codec,f),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[S,_]=_a(e.subarray(t));return t+=_,S},i=n(),u=Sa;if(i===18?(i=0,t=0):i===1&&(u=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let f=t,d=n(),h=n(),m=t+h,b=m-f;return{version:i,codec:u,multihashCode:d,digestSize:h,multihashSize:b,size:m}}static parse(e,t){let[n,i]=$S(e,t),u=V.decode(i);return u._baseCache.set(n,e),u}},$S=(r,e)=>{switch(r[0]){case"Q":{let t=e||tr;return[tr.prefix,t.decode(`${tr.prefix}${r}`)]}case tr.prefix:{let t=e||tr;return[tr.prefix,t.decode(r)]}case no.prefix:{let t=e||no;return[no.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},HS=(r,e,t)=>{let{prefix:n}=t;if(n!==tr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let u=t.encode(r).slice(1);return e.set(n,u),u}else return i},VS=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let u=t.encode(r);return e.set(n,u),u}else return i},Sa=112,YS=18,mh=(r,e,t)=>{let n=ei(r),i=n+ei(e),u=new Uint8Array(i+t.byteLength);return Zo(r,u,0),Zo(e,u,n),u.set(t,i),u},yh=Symbol.for("@ipld/js-cid/CID"),eu={writable:!1,configurable:!1,enumerable:!0},tu={writable:!1,enumerable:!1,configurable:!1},GS="0.0.0-dev",QS=(r,e)=>{if(r.test(GS))console.warn(e);else throw new Error(e)},KS=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var JS=["string","number","bigint","symbol"],XS=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function bh(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(JS.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(ZS(r))return"Buffer";let t=e0(r);return t||"Object"}function ZS(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function e0(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(XS.includes(e))return e}var k=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};k.uint=new k(0,"uint",!0);k.negint=new k(1,"negint",!0);k.bytes=new k(2,"bytes",!0);k.string=new k(3,"string",!0);k.array=new k(4,"array",!1);k.map=new k(5,"map",!1);k.tag=new k(6,"tag",!1);k.float=new k(7,"float",!0);k.false=new k(7,"false",!0);k.true=new k(7,"true",!0);k.null=new k(7,"null",!0);k.undefined=new k(7,"undefined",!0);k.break=new k(7,"break",!0);var q=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var oi=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",t0=new TextDecoder,r0=new TextEncoder;function ru(r){return oi&&globalThis.Buffer.isBuffer(r)}function qf(r){return r instanceof Uint8Array?ru(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var Sh=oi?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):wh(r,e,t):(r,e,t)=>t-e>64?t0.decode(r.subarray(e,t)):wh(r,e,t),vh=oi?r=>r.length>64?globalThis.Buffer.from(r):gh(r):r=>r.length>64?r0.encode(r):gh(r),rr=r=>Uint8Array.from(r),ii=oi?(r,e,t)=>ru(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),Eh=oi?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),qf(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},Rh=oi?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function Th(r,e){if(ru(r)&&ru(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function gh(r,e=1/0){let t,n=r.length,i=null,u=[];for(let f=0;f<n;++f){if(t=r.charCodeAt(f),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&u.push(239,191,189);continue}else if(f+1===n){(e-=3)>-1&&u.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&u.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&u.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;u.push(t)}else if(t<2048){if((e-=2)<0)break;u.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;u.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;u.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return u}function wh(r,e,t){let n=[];for(;e<t;){let i=r[e],u=null,f=i>239?4:i>223?3:i>191?2:1;if(e+f<=t){let d,h,m,b;switch(f){case 1:i<128&&(u=i);break;case 2:d=r[e+1],(d&192)===128&&(b=(i&31)<<6|d&63,b>127&&(u=b));break;case 3:d=r[e+1],h=r[e+2],(d&192)===128&&(h&192)===128&&(b=(i&15)<<12|(d&63)<<6|h&63,b>2047&&(b<55296||b>57343)&&(u=b));break;case 4:d=r[e+1],h=r[e+2],m=r[e+3],(d&192)===128&&(h&192)===128&&(m&192)===128&&(b=(i&15)<<18|(d&63)<<12|(h&63)<<6|m&63,b>65535&&b<1114112&&(u=b))}}u===null?(u=65533,f=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|u&1023),n.push(u),e+=f}return n0(n)}var _h=4096;function n0(r){let e=r.length;if(e<=_h)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=_h));return t}var o0=256,va=class{constructor(e=o0){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Rh(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=ii(n,0,this.cursor)}else t=Eh(this.chunks,this.cursor);return e&&this.reset(),t}};var X="CBOR decode error:",Nf="CBOR encode error:",Ea=[];Ea[23]=1;Ea[24]=2;Ea[25]=3;Ea[26]=5;Ea[27]=9;function Pr(r,e,t){if(r.length-e<t)throw new Error(`${X} not enough data for type`)}var Se=[24,256,65536,4294967296,BigInt("18446744073709551616")];function et(r,e,t){Pr(r,e,1);let n=r[e];if(t.strict===!0&&n<Se[0])throw new Error(`${X} integer encoded in more bytes than necessary (strict decode)`);return n}function tt(r,e,t){Pr(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<Se[1])throw new Error(`${X} integer encoded in more bytes than necessary (strict decode)`);return n}function rt(r,e,t){Pr(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<Se[2])throw new Error(`${X} integer encoded in more bytes than necessary (strict decode)`);return n}function nt(r,e,t){Pr(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],u=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&u<Se[3])throw new Error(`${X} integer encoded in more bytes than necessary (strict decode)`);if(u<=Number.MAX_SAFE_INTEGER)return Number(u);if(t.allowBigInt===!0)return u;throw new Error(`${X} integers outside of the safe integer range are not supported`)}function Ah(r,e,t,n){return new q(k.uint,et(r,e+1,n),2)}function Ch(r,e,t,n){return new q(k.uint,tt(r,e+1,n),3)}function xh(r,e,t,n){return new q(k.uint,rt(r,e+1,n),5)}function kh(r,e,t,n){return new q(k.uint,nt(r,e+1,n),9)}function ht(r,e){return Be(r,0,e.value)}function Be(r,e,t){if(t<Se[0]){let n=Number(t);r.push([e|n])}else if(t<Se[1]){let n=Number(t);r.push([e|24,n])}else if(t<Se[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<Se[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<Se[4]){let i=[e|27,0,0,0,0,0,0,0],u=Number(n&BigInt(4294967295)),f=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=u&255,u=u>>8,i[7]=u&255,u=u>>8,i[6]=u&255,u=u>>8,i[5]=u&255,i[4]=f&255,f=f>>8,i[3]=f&255,f=f>>8,i[2]=f&255,f=f>>8,i[1]=f&255,r.push(i)}else throw new Error(`${X} encountered BigInt larger than allowable range`)}}ht.encodedSize=function(e){return Be.encodedSize(e.value)};Be.encodedSize=function(e){return e<Se[0]?1:e<Se[1]?2:e<Se[2]?3:e<Se[3]?5:9};ht.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function Bh(r,e,t,n){return new q(k.negint,-1-et(r,e+1,n),2)}function Ph(r,e,t,n){return new q(k.negint,-1-tt(r,e+1,n),3)}function Ih(r,e,t,n){return new q(k.negint,-1-rt(r,e+1,n),5)}var Wf=BigInt(-1),Dh=BigInt(1);function Oh(r,e,t,n){let i=nt(r,e+1,n);if(typeof i!="bigint"){let u=-1-i;if(u>=Number.MIN_SAFE_INTEGER)return new q(k.negint,u,9)}if(n.allowBigInt!==!0)throw new Error(`${X} integers outside of the safe integer range are not supported`);return new q(k.negint,Wf-BigInt(i),9)}function nu(r,e){let t=e.value,n=typeof t=="bigint"?t*Wf-Dh:t*-1-1;Be(r,e.type.majorEncoded,n)}nu.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*Wf-Dh:t*-1-1;return n<Se[0]?1:n<Se[1]?2:n<Se[2]?3:n<Se[3]?5:9};nu.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function Ra(r,e,t,n){Pr(r,e,t+n);let i=ii(r,e+t,e+t+n);return new q(k.bytes,i,t+n)}function zh(r,e,t,n){return Ra(r,e,1,t)}function Lh(r,e,t,n){return Ra(r,e,2,et(r,e+1,n))}function Fh(r,e,t,n){return Ra(r,e,3,tt(r,e+1,n))}function Uh(r,e,t,n){return Ra(r,e,5,rt(r,e+1,n))}function qh(r,e,t,n){let i=nt(r,e+1,n);if(typeof i=="bigint")throw new Error(`${X} 64-bit integer bytes lengths not supported`);return Ra(r,e,9,i)}function ou(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===k.string?vh(r.value):r.value),r.encodedBytes}function ai(r,e){let t=ou(e);Be(r,e.type.majorEncoded,t.length),r.push(t)}ai.encodedSize=function(e){let t=ou(e);return Be.encodedSize(t.length)+t.length};ai.compareTokens=function(e,t){return a0(ou(e),ou(t))};function a0(r,e){return r.length<e.length?-1:r.length>e.length?1:Th(r,e)}function Ta(r,e,t,n,i){let u=t+n;Pr(r,e,u);let f=new q(k.string,Sh(r,e+t,e+u),u);return i.retainStringBytes===!0&&(f.byteValue=ii(r,e+t,e+u)),f}function Nh(r,e,t,n){return Ta(r,e,1,t,n)}function Wh(r,e,t,n){return Ta(r,e,2,et(r,e+1,n),n)}function Mh(r,e,t,n){return Ta(r,e,3,tt(r,e+1,n),n)}function jh(r,e,t,n){return Ta(r,e,5,rt(r,e+1,n),n)}function $h(r,e,t,n){let i=nt(r,e+1,n);if(typeof i=="bigint")throw new Error(`${X} 64-bit integer string lengths not supported`);return Ta(r,e,9,i,n)}var Hh=ai;function si(r,e,t,n){return new q(k.array,n,t)}function Vh(r,e,t,n){return si(r,e,1,t)}function Yh(r,e,t,n){return si(r,e,2,et(r,e+1,n))}function Gh(r,e,t,n){return si(r,e,3,tt(r,e+1,n))}function Qh(r,e,t,n){return si(r,e,5,rt(r,e+1,n))}function Kh(r,e,t,n){let i=nt(r,e+1,n);if(typeof i=="bigint")throw new Error(`${X} 64-bit integer array lengths not supported`);return si(r,e,9,i)}function Jh(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${X} indefinite length items not allowed`);return si(r,e,1,1/0)}function iu(r,e){Be(r,k.array.majorEncoded,e.value)}iu.compareTokens=ht.compareTokens;iu.encodedSize=function(e){return Be.encodedSize(e.value)};function ui(r,e,t,n){return new q(k.map,n,t)}function Xh(r,e,t,n){return ui(r,e,1,t)}function Zh(r,e,t,n){return ui(r,e,2,et(r,e+1,n))}function ep(r,e,t,n){return ui(r,e,3,tt(r,e+1,n))}function tp(r,e,t,n){return ui(r,e,5,rt(r,e+1,n))}function rp(r,e,t,n){let i=nt(r,e+1,n);if(typeof i=="bigint")throw new Error(`${X} 64-bit integer map lengths not supported`);return ui(r,e,9,i)}function np(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${X} indefinite length items not allowed`);return ui(r,e,1,1/0)}function au(r,e){Be(r,k.map.majorEncoded,e.value)}au.compareTokens=ht.compareTokens;au.encodedSize=function(e){return Be.encodedSize(e.value)};function op(r,e,t,n){return new q(k.tag,t,1)}function ip(r,e,t,n){return new q(k.tag,et(r,e+1,n),2)}function ap(r,e,t,n){return new q(k.tag,tt(r,e+1,n),3)}function sp(r,e,t,n){return new q(k.tag,rt(r,e+1,n),5)}function up(r,e,t,n){return new q(k.tag,nt(r,e+1,n),9)}function su(r,e){Be(r,k.tag.majorEncoded,e.value)}su.compareTokens=ht.compareTokens;su.encodedSize=function(e){return Be.encodedSize(e.value)};var d0=20,h0=21,p0=22,m0=23;function lp(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${X} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new q(k.null,null,1):new q(k.undefined,void 0,1)}function fp(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${X} indefinite length items not allowed`);return new q(k.break,void 0,1)}function Mf(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${X} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${X} Infinity values are not supported`)}return new q(k.float,r,e)}function cp(r,e,t,n){return Mf(jf(r,e+1),3,n)}function dp(r,e,t,n){return Mf($f(r,e+1),5,n)}function hp(r,e,t,n){return Mf(bp(r,e+1),9,n)}function uu(r,e,t){let n=e.value;if(n===!1)r.push([k.float.majorEncoded|d0]);else if(n===!0)r.push([k.float.majorEncoded|h0]);else if(n===null)r.push([k.float.majorEncoded|p0]);else if(n===void 0)r.push([k.float.majorEncoded|m0]);else{let i,u=!1;(!t||t.float64!==!0)&&(mp(n),i=jf(kt,1),n===i||Number.isNaN(n)?(kt[0]=249,r.push(kt.slice(0,3)),u=!0):(yp(n),i=$f(kt,1),n===i&&(kt[0]=250,r.push(kt.slice(0,5)),u=!0))),u||(y0(n),i=bp(kt,1),kt[0]=251,r.push(kt.slice(0,9)))}}uu.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){mp(n);let i=jf(kt,1);if(n===i||Number.isNaN(n))return 3;if(yp(n),i=$f(kt,1),n===i)return 5}return 9};var pp=new ArrayBuffer(9),pt=new DataView(pp,1),kt=new Uint8Array(pp,0);function mp(r){if(r===1/0)pt.setUint16(0,31744,!1);else if(r===-1/0)pt.setUint16(0,64512,!1);else if(Number.isNaN(r))pt.setUint16(0,32256,!1);else{pt.setFloat32(0,r);let e=pt.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)pt.setUint16(0,31744,!1);else if(t===0)pt.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?pt.setUint16(0,0):i<-14?pt.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):pt.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function jf(r,e){if(r.length-e<2)throw new Error(`${X} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,u;return n===0?u=i*2**-24:n!==31?u=(i+1024)*2**(n-25):u=i===0?1/0:NaN,t&32768?-u:u}function yp(r){pt.setFloat32(0,r,!1)}function $f(r,e){if(r.length-e<4)throw new Error(`${X} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function y0(r){pt.setFloat64(0,r,!1)}function bp(r,e){if(r.length-e<8)throw new Error(`${X} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}uu.compareTokens=ht.compareTokens;function oe(r,e,t){throw new Error(`${X} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function lu(r){return()=>{throw new Error(`${X} ${r}`)}}var L=[];for(let r=0;r<=23;r++)L[r]=oe;L[24]=Ah;L[25]=Ch;L[26]=xh;L[27]=kh;L[28]=oe;L[29]=oe;L[30]=oe;L[31]=oe;for(let r=32;r<=55;r++)L[r]=oe;L[56]=Bh;L[57]=Ph;L[58]=Ih;L[59]=Oh;L[60]=oe;L[61]=oe;L[62]=oe;L[63]=oe;for(let r=64;r<=87;r++)L[r]=zh;L[88]=Lh;L[89]=Fh;L[90]=Uh;L[91]=qh;L[92]=oe;L[93]=oe;L[94]=oe;L[95]=lu("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)L[r]=Nh;L[120]=Wh;L[121]=Mh;L[122]=jh;L[123]=$h;L[124]=oe;L[125]=oe;L[126]=oe;L[127]=lu("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)L[r]=Vh;L[152]=Yh;L[153]=Gh;L[154]=Qh;L[155]=Kh;L[156]=oe;L[157]=oe;L[158]=oe;L[159]=Jh;for(let r=160;r<=183;r++)L[r]=Xh;L[184]=Zh;L[185]=ep;L[186]=tp;L[187]=rp;L[188]=oe;L[189]=oe;L[190]=oe;L[191]=np;for(let r=192;r<=215;r++)L[r]=op;L[216]=ip;L[217]=ap;L[218]=sp;L[219]=up;L[220]=oe;L[221]=oe;L[222]=oe;L[223]=oe;for(let r=224;r<=243;r++)L[r]=lu("simple values are not supported");L[244]=oe;L[245]=oe;L[246]=oe;L[247]=lp;L[248]=lu("simple values are not supported");L[249]=cp;L[250]=dp;L[251]=hp;L[252]=oe;L[253]=oe;L[254]=oe;L[255]=fp;var Bt=[];for(let r=0;r<24;r++)Bt[r]=new q(k.uint,r,1);for(let r=-1;r>=-24;r--)Bt[31-r]=new q(k.negint,r,1);Bt[64]=new q(k.bytes,new Uint8Array(0),1);Bt[96]=new q(k.string,"",1);Bt[128]=new q(k.array,0,1);Bt[160]=new q(k.map,0,1);Bt[244]=new q(k.false,!1,1);Bt[245]=new q(k.true,!0,1);Bt[246]=new q(k.null,null,1);function gp(r){switch(r.type){case k.false:return rr([244]);case k.true:return rr([245]);case k.null:return rr([246]);case k.bytes:return r.value.length?void 0:rr([64]);case k.string:return r.value===""?rr([96]):void 0;case k.array:return r.value===0?rr([128]):void 0;case k.map:return r.value===0?rr([160]):void 0;case k.uint:return r.value<24?rr([Number(r.value)]):void 0;case k.negint:if(r.value>=-24)return rr([31-Number(r.value)])}}var g0={float64:!1,mapSorter:S0,quickEncodeToken:gp};function w0(){let r=[];return r[k.uint.major]=ht,r[k.negint.major]=nu,r[k.bytes.major]=ai,r[k.string.major]=Hh,r[k.array.major]=iu,r[k.map.major]=au,r[k.tag.major]=su,r[k.float.major]=uu,r}var wp=w0(),Hf=new va,li=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${Nf} object contains circular references`);return new li(t,e)}},un={null:new q(k.null,null),undefined:new q(k.undefined,void 0),true:new q(k.true,!0),false:new q(k.false,!1),emptyArray:new q(k.array,0),emptyMap:new q(k.map,0)},ln={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new q(k.float,r):r>=0?new q(k.uint,r):new q(k.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new q(k.uint,r):new q(k.negint,r)},Uint8Array(r,e,t,n){return new q(k.bytes,r)},string(r,e,t,n){return new q(k.string,r)},boolean(r,e,t,n){return r?un.true:un.false},null(r,e,t,n){return un.null},undefined(r,e,t,n){return un.undefined},ArrayBuffer(r,e,t,n){return new q(k.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new q(k.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[un.emptyArray,new q(k.break)]:un.emptyArray;n=li.createCheck(n,r);let i=[],u=0;for(let f of r)i[u++]=fu(f,t,n);return t.addBreakTokens?[new q(k.array,r.length),i,new q(k.break)]:[new q(k.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",u=i?r.keys():Object.keys(r),f=i?r.size:u.length;if(!f)return t.addBreakTokens===!0?[un.emptyMap,new q(k.break)]:un.emptyMap;n=li.createCheck(n,r);let d=[],h=0;for(let m of u)d[h++]=[fu(m,t,n),fu(i?r.get(m):r[m],t,n)];return _0(d,t),t.addBreakTokens?[new q(k.map,f),d,new q(k.break)]:[new q(k.map,f),d]}};ln.Map=ln.Object;ln.Buffer=ln.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ln[`${r}Array`]=ln.DataView;function fu(r,e={},t){let n=bh(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||ln[n];if(typeof i=="function"){let f=i(r,n,e,t);if(f!=null)return f}let u=ln[n];if(!u)throw new Error(`${Nf} unsupported type: ${n}`);return u(r,n,e,t)}function _0(r,e){e.mapSorter&&r.sort(e.mapSorter)}function S0(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,u=wp[i].compareTokens(t,n);return u===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),u}function _p(r,e,t,n){if(Array.isArray(e))for(let i of e)_p(r,i,t,n);else t[e.type.major](r,e,n)}function v0(r,e,t){let n=fu(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let u=e[n.type.major];if(u.encodedSize){let f=u.encodedSize(n,t),d=new va(f);if(u(d,n,t),d.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return qf(d.chunks[0])}}return Hf.reset(),_p(Hf,n,e,t),Hf.toBytes(!0)}function Aa(r,e){return e=Object.assign({},g0,e),v0(r,wp,e)}var E0={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Vf=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=Bt[e];if(t===void 0){let n=L[e];if(!n)throw new Error(`${X} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},Ca=Symbol.for("DONE"),cu=Symbol.for("BREAK");function R0(r,e,t){let n=[];for(let i=0;i<r.value;i++){let u=xa(e,t);if(u===cu){if(r.value===1/0)break;throw new Error(`${X} got unexpected break to lengthed array`)}if(u===Ca)throw new Error(`${X} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=u}return n}function T0(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},u=n?new Map:void 0;for(let f=0;f<r.value;f++){let d=xa(e,t);if(d===cu){if(r.value===1/0)break;throw new Error(`${X} got unexpected break to lengthed map`)}if(d===Ca)throw new Error(`${X} found map but not enough entries (got ${f} [no key], expected ${r.value})`);if(n!==!0&&typeof d!="string")throw new Error(`${X} non-string keys not supported (got ${typeof d})`);let h=xa(e,t);if(h===Ca)throw new Error(`${X} found map but not enough entries (got ${f} [no value], expected ${r.value})`);n?u.set(d,h):i[d]=h}return n?u:i}function xa(r,e){if(r.done())return Ca;let t=r.next();if(t.type===k.break)return cu;if(t.type.terminal)return t.value;if(t.type===k.array)return R0(t,r,e);if(t.type===k.map)return T0(t,r,e);if(t.type===k.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=xa(r,e);return e.tags[t.value](n)}throw new Error(`${X} tag not supported (${t.value})`)}throw new Error("unsupported")}function ka(r,e){if(!(r instanceof Uint8Array))throw new Error(`${X} data to decode must be a Uint8Array`);e=Object.assign({},E0,e);let t=e.tokenizer||new Vf(r,e),n=xa(t,e);if(n===Ca)throw new Error(`${X} did not find any content to decode`);if(n===cu)throw new Error(`${X} got unexpected break`);if(!t.done())throw new Error(`${X} too many terminals, data makes no sense`);return n}var vp=42;function A0(r){if(r.asCID!==r)return null;let e=V.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new q(k.tag,vp),new q(k.bytes,t)]}function C0(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function x0(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var k0={float64:!0,typeEncoders:{Object:A0,undefined:C0,number:x0}};function B0(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return V.decode(r.subarray(1))}var Ep={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Ep.tags[vp]=B0;var Rp=r=>Aa(r,k0),Tp=r=>ka(r,Ep);var Yf={SHA2_256:18,LENGTH:32,DAG_PB:112};async function du(r){let e=await r.upTo(8),t=fn.default.decode(e);return r.seek(fn.default.decode.bytes),t}async function Ba(r){let e=await du(r);if(e===0)throw new Error("Invalid CAR header (zero length)");let t=await r.exactly(e);r.seek(e);let n=Tp(t);if(n==null||Array.isArray(n)||typeof n!="object")throw new Error("Invalid CAR header format");if(n.version!==1)throw typeof n.version=="string"?new Error(`Invalid CAR version: "${n.version}"`):new Error(`Invalid CAR version: ${n.version}`);if(!Array.isArray(n.roots))throw new Error("Invalid CAR header format");if(Object.keys(n).filter(i=>i!=="roots"&&i!=="version").length)throw new Error("Invalid CAR header format");return n}async function P0(r){let e=await r.upTo(8);fn.default.decode(e);let t=fn.default.decode.bytes,n=fn.default.decode(e.subarray(fn.default.decode.bytes)),i=fn.default.decode.bytes,u=t+i+n,f=await r.exactly(u);return r.seek(u),f}async function I0(r){let e=await r.exactly(2);if(e[0]===Yf.SHA2_256&&e[1]===Yf.LENGTH){let f=await r.exactly(34);r.seek(34);let d=ni(f);return V.create(0,Yf.DAG_PB,d)}let t=await du(r);if(t!==1)throw new Error(`Unexpected CID version (${t})`);let n=await du(r),i=await P0(r),u=ni(i);return V.create(t,n,u)}async function Ap(r){let e=r.pos,t=await du(r);if(t===0)throw new Error("Invalid CAR section (zero length)");t+=r.pos-e;let n=await I0(r),i=t-(r.pos-e);return{cid:n,length:t,blockLength:i}}async function D0(r){let{cid:e,blockLength:t}=await Ap(r),n=await r.exactly(t);return r.seek(t),{bytes:n,cid:e}}async function O0(r){let e=r.pos,{cid:t,length:n,blockLength:i}=await Ap(r),u={cid:t,length:n,blockLength:i,offset:e,blockOffset:r.pos};return r.seek(u.blockLength),u}function fi(r){let e=Ba(r);return{header:()=>e,async*blocks(){for(await e;(await r.upTo(8)).length>0;)yield await D0(r)},async*blocksIndex(){for(await e;(await r.upTo(8)).length>0;)yield await O0(r)}}}function cn(r){let e=0;return{async upTo(t){return r.subarray(e,e+Math.min(t,r.length-e))},async exactly(t){if(t>r.length-e)throw new Error("Unexpected end of data");return r.subarray(e,e+t)},seek(t){e+=t},get pos(){return e}}}function Gf(r){let e=0,t=0,n=0,i=new Uint8Array(0),u=async f=>{t=i.length-n;let d=[i.subarray(n)];for(;t<f;){let m=await r();if(m==null)break;t<0?m.length>t&&d.push(m.subarray(-t)):d.push(m),t+=m.length}i=new Uint8Array(d.reduce((m,b)=>m+b.length,0));let h=0;for(let m of d)i.set(m,h),h+=m.length;n=0};return{async upTo(f){return i.length-n<f&&await u(f),i.subarray(n,n+Math.min(i.length-n,f))},async exactly(f){if(i.length-n<f&&await u(f),i.length-n<f)throw new Error("Unexpected end of data");return i.subarray(n,n+f)},seek(f){e+=f,n+=f},get pos(){return e}}}function ci(r){let e=r[Symbol.asyncIterator]();async function t(){let n=await e.next();return n.done?null:n.value}return Gf(t)}var Pa=class{constructor(e,t,n){this._version=e,this._roots=t,this._blocks=n,this._keys=n.map(i=>i.cid.toString())}get version(){return this._version}async getRoots(){return this._roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){let t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(let e of this._blocks)yield e}async*cids(){for(let e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Cp(cn(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Cp(ci(e))}};async function Cp(r){let e=fi(r),{version:t,roots:n}=await e.header(),i=[];for await(let u of e.blocks())i.push(u);return new Pa(t,n,i)}var z0=(0,kp.promisify)(xp.default.read),io=class extends Pa{static async readRaw(e,t){let{cid:n,blockLength:i,blockOffset:u}=t,f=new Uint8Array(i),d;if(typeof e=="number")d=(await z0(e,f,0,i,u)).bytesRead;else if(typeof e=="object"&&typeof e.read=="function")d=(await e.read(f,0,i,u)).bytesRead;else throw new TypeError("Bad fd");if(d!==i)throw new Error(`Failed to read entire block (${d} instead of ${i})`);return{cid:n,bytes:f}}};var Ia=class{constructor(e,t,n){this._version=e,this._roots=t,this._iterator=n}get version(){return this._version}async getRoots(){return this._roots}[Symbol.asyncIterator](){return this._iterator}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Bp(cn(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Bp(ci(e))}};async function Bp(r){let e=fi(r),{version:t,roots:n}=await e.header();return new Ia(t,n,e.blocksIndex())}var hu=class{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},di=class extends hu{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:t,roots:n,iterator:i}=await Pp(e);return new di(t,n,i)}static async fromIterable(e){let{version:t,roots:n,iterator:i}=await Ip(e);return new di(t,n,i)}},hi=class extends hu{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;let e=this._iterable[Symbol.asyncIterator]();return{async next(){let t=await e.next();return t.done?t:{done:!1,value:t.value.cid}}}}static async fromBytes(e){let{version:t,roots:n,iterator:i}=await Pp(e);return new hi(t,n,i)}static async fromIterable(e){let{version:t,roots:n,iterator:i}=await Ip(e);return new hi(t,n,i)}};async function Pp(r){if(!(r instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Dp(cn(r))}async function Ip(r){if(!r||typeof r[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Dp(ci(r))}async function Dp(r){let e=fi(r),{version:t,roots:n}=await e.header();return{version:t,roots:n,iterator:e.blocks()}}var Kf=M(require("fs"),1),Jf=require("util");var Qf=M(xf(),1);function Da(r){let e=Rp({version:1,roots:r}),t=Qf.default.encode(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function Op(r){return{async setRoots(e){let t=Da(e);await r.write(t)},async writeBlock(e){let{cid:t,bytes:n}=e;await r.write(new Uint8Array(Qf.default.encode(t.bytes.length+n.length))),await r.write(t.bytes),n.length&&await r.write(n)},async close(){return r.end()}}}function pu(){}function zp(){let r=[],e=null,t=pu,n=!1,i=null,u=pu,f=()=>(e||(e=new Promise(m=>{t=()=>{e=null,t=pu,m()}})),e),d={write(m){r.push(m);let b=f();return u(),b},async end(){n=!0;let m=f();return u(),m}},h={async next(){let m=r.shift();return m?(r.length===0&&t(),{done:!1,value:m}):n?(t(),{done:!0,value:void 0}):(i||(i=new Promise(b=>{u=()=>(i=null,u=pu,b(h.next()))})),i)}};return{writer:d,iterator:h}}var ao=class{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let t=V.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=L0(e);let{encoder:t,iterator:n}=Lp(),i=new ao(e,t),u=new mu(n);return{writer:i,out:u}}static createAppender(){let{encoder:e,iterator:t}=Lp();e.setRoots=()=>Promise.resolve();let n=new ao([],e),i=new mu(t);return{writer:n,out:i}}static async updateRootsInBytes(e,t){let n=cn(e);await Ba(n);let i=Da(t);if(n.pos!==i.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${i.length} bytes)`);return e.set(i,0),e}},mu=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function Lp(){let r=zp(),{writer:e,iterator:t}=r;return{encoder:Op(e),iterator:t}}function L0(r){if(r===void 0)return[];if(!Array.isArray(r)){let t=V.asCID(r);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}let e=[];for(let t of r){let n=V.asCID(t);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(n)}return e}var F0=(0,Jf.promisify)(Kf.default.read),U0=(0,Jf.promisify)(Kf.default.write),Ir=class extends ao{static async updateRootsInFile(e,t){let i,u=0,f;if(typeof e=="number")f=async()=>(await F0(e,i,0,256,u)).bytesRead;else if(typeof e=="object"&&typeof e.read=="function")f=async()=>(await e.read(i,0,256,u)).bytesRead;else throw new TypeError("Bad fd");let d=Gf(async()=>{i=new Uint8Array(256);let m=await f();return u+=m,m<256?i.subarray(0,m):i});await Ba(d);let h=Da(t);if(d.pos!==h.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${d.pos} bytes, new header is ${h.length} bytes)`);typeof e=="number"?await U0(e,h,0,h.length,0):typeof e=="object"&&typeof e.read=="function"&&await e.write(h,0,h.length,0)}};var pi=({name:r,code:e,encode:t})=>new Xf(r,e,t),Xf=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?to(this.code,t):t.then(n=>to(this.code,n))}else throw Error("Unknown type, must be binary type")}};var yu=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),Zf=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[u,f]of n.entries()){let d=[...i,u],h=V.asCID(f);h?yield[d.join("/"),h]:typeof f=="object"&&(yield*Zf(f,d))}else{let u=V.asCID(n);u?yield[i.join("/"),u]:yield*Zf(n,i)}}},ec=function*(r,e){if(r!=null)for(let[t,n]of Object.entries(r)){let i=[...e,t];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!V.asCID(n))if(Array.isArray(n))for(let[u,f]of n.entries()){let d=[...i,u];yield d.join("/"),typeof f=="object"&&!V.asCID(f)&&(yield*ec(f,d))}else yield*ec(n,i)}},q0=(r,e)=>{let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(f=>`[${JSON.stringify(f)}]`).join("")}`);let u=V.asCID(t);if(u)return{value:u,remaining:e.slice(n+1).join("/")}}return{value:t}},Oa=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:yu(),bytes:yu(),value:yu(),asBlock:yu()})}links(){return Zf(this.value,[])}tree(){return ec(this.value,[])}get(e="/"){return q0(this.value,e.split("/").filter(Boolean))}},Up=async({value:r,codec:e,hasher:t})=>{if(typeof r>"u")throw new Error('Missing required argument "value"');if(!e||!t)throw new Error("Missing required argument: codec or hasher");let n=e.encode(r),i=await t.digest(n),u=V.create(1,e.code,i);return new Oa({value:r,bytes:n,cid:u})};var dn={};ke(dn,{code:()=>za,decode:()=>j0,encode:()=>M0,name:()=>W0});var W0="raw",za=85,M0=r=>Fe(r),j0=r=>Fe(r);var La={};ke(La,{code:()=>K0,decode:()=>X0,encode:()=>J0,name:()=>Q0});var qp=42;function $0(r){if(r.asCID!==r)return null;let e=V.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new q(k.tag,qp),new q(k.bytes,t)]}function H0(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function V0(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Y0={float64:!0,typeEncoders:{Object:$0,undefined:H0,number:V0}};function G0(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return V.decode(r.subarray(1))}var Np={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Np.tags[qp]=G0;var Q0="dag-cbor",K0=113,J0=r=>Aa(r,Y0),X0=r=>ka(r,Np);var nr={};ke(nr,{code:()=>fv,createLink:()=>Kp,createNode:()=>Qp,decode:()=>cv,encode:()=>yt,name:()=>lv,prepare:()=>mt,validate:()=>nc});var Z0=new TextDecoder;function tc(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function bu(r,e){let t;[t,e]=tc(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function Wp(r,e){let t;return[t,e]=tc(r,e),[t&7,t>>3,e]}function ev(r){let e={},t=r.length,n=0;for(;n<t;){let i,u;if([i,u,n]=Wp(r,n),u===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=bu(r,n)}else if(u===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let f;[f,n]=bu(r,n),e.Name=Z0.decode(f)}else if(u===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=tc(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${u}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Mp(r){let e=r.length,t=0,n,i=!1,u;for(;t<e;){let d,h;if([d,h,t]=Wp(r,t),d!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${d}`);if(h===1){if(u)throw new Error("protobuf: (PBNode) duplicate Data section");[u,t]=bu(r,t),n&&(i=!0)}else if(h===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let m;[m,t]=bu(r,t),n.push(ev(m))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${h}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let f={};return u&&(f.Data=u),f.Links=n||[],f}var $p=new TextEncoder,jp=2**32,tv=2**31;function rv(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=Fa(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=$p.encode(r.Name);t-=n.length,e.set(n,t),t=Fa(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=Fa(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function Hp(r){let e=ov(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=Fa(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let u=rv(r.Links[i],t.subarray(0,n));n-=u,n=Fa(t,n,u)-1,t[n]=18}return t}function nv(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+mi(t)}if(typeof r.Name=="string"){let t=$p.encode(r.Name).length;e+=1+t+mi(t)}return typeof r.Tsize=="number"&&(e+=1+mi(r.Tsize)),e}function ov(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+mi(t)}if(r.Links)for(let t of r.Links){let n=nv(t);e+=1+n+mi(n)}return e}function Fa(r,e,t){e-=mi(t);let n=e;for(;t>=tv;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function mi(r){return r%2===0&&r++,Math.floor((iv(r)+6)/7)}function iv(r){let e=0;return r>=jp&&(r=Math.floor(r/jp),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+av[r]}var av=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var sv=["Data","Links"],uv=["Hash","Name","Tsize"],rc=new TextEncoder;function Yp(r,e){if(r===e)return 0;let t=r.Name?rc.encode(r.Name):[],n=e.Name?rc.encode(e.Name):[],i=t.length,u=n.length;for(let f=0,d=Math.min(i,u);f<d;++f)if(t[f]!==n[f]){i=t[f],u=n[f];break}return i<u?-1:u<i?1:0}function Vp(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function Gp(r){if(typeof r.asCID=="object"){let t=V.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Hash){let t=V.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=V.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=V.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function mt(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=rc.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(Gp),e.Links.sort(Yp);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function nc(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!Vp(r,sv))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Vp(t,uv))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&Yp(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Qp(r,e=[]){return mt({Data:r,Links:e})}function Kp(r,e,t){return Gp({Hash:t,Name:r,Tsize:e})}var lv="dag-pb",fv=112;function yt(r){nc(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),Hp(e)}function cv(r){let e=Mp(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=V.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}var Dr=class{constructor(e,t,n={}){if(typeof t!="number"||t<=0)throw new Error("invalid target chunk size");this._reader=e,this._targetSize=t,this._decoders=[nr,dn,La,...n.decoders||[]]}async*cars(){let e=await this._reader.getRoots();if(e.length!==1)throw new Error(`unexpected number of roots: ${e.length}`);let t;for await(let n of this._cars(e[0]))t=n.channel,n.out&&(yield n.out);if(!t)throw new Error("missing CAR writer channel");t.writer.close(),yield t.out}async _get(e){let t=await this._reader.get(e);if(!t)throw new Error(`missing block for ${e}`);let{bytes:n}=t,i=this._decoders.find(u=>u.code===e.code);if(!i)throw new Error(`missing decoder for ${e.code}`);return new Oa({cid:e,bytes:n,value:i.decode(n)})}async*_cars(e,t=[],n=void 0){let i=await this._get(e);if(n=n||Object.assign(Ir.create(e),{size:0}),n.size>0&&n.size+i.bytes.byteLength>=this._targetSize){n.writer.close();let{out:u}=n;n=dv(t),yield{channel:n,out:u}}t=t.concat(i),n.size+=i.bytes.byteLength,n.writer.put(i);for(let[,u]of i.links())for await(let f of this._cars(u,t,n))n=f.channel,yield f;if(!n)throw new Error("missing CAR writer channel");yield{channel:n}}static async fromIterable(e,t,n){let i=await io.fromIterable(e);return new Dr(i,t,n)}static async fromBlob(e,t,n){let i=await e.arrayBuffer(),u=await io.fromBytes(new Uint8Array(i));return new Dr(u,t,n)}};function dv(r){let e=Object.assign(Ir.create(r[0].cid),{size:r.reduce((t,n)=>t+n.bytes.byteLength,0)});for(let t of r)e.writer.put(t);return e}var Vg=M(Xp(),1),Yg=M(tm(),1);var pg=M(ic(),1);var dm=M(cm(),1),hm=dm.default;var uc={};ke(uc,{sha256:()=>or,sha512:()=>Ev});var sc=M(require("crypto"),1);var or=pi({name:"sha2-256",code:18,encode:r=>Fe(sc.default.createHash("sha256").update(r).digest())}),Ev=pi({name:"sha2-512",code:19,encode:r=>Fe(sc.default.createHash("sha512").update(r).digest())});var lc=M(ym(),1);function Rv(r){let e=new Array(4);for(let t=0;t<4;t++)e[t]=r&255,r=r>>8;return new Uint8Array(e)}var Sx=pi({name:"murmur3-32",code:35,encode:r=>Rv(lc.default.x86.hash32(r))}),bm=pi({name:"murmur3-128",code:34,encode:r=>ti.fromHex(lc.default.x64.hash128(r))});async function Tv(r){return(await bm.encode(r)).slice(0,8).reverse()}var Av={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:or,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:Tv,hamtHashCode:34,hamtBucketBits:8},gm=(r={})=>hm.bind({ignoreUndefined:!0})(Av,r);var Cu=M(ir(),1);var Or=M(by(),1),_i=Or.default.Reader,Ec=Or.default.Writer,Q=Or.default.util,Pe=Or.default.roots["ipfs-unixfs"]||(Or.default.roots["ipfs-unixfs"]={}),gy=Pe.Data=(()=>{function r(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Type=0,r.prototype.Data=Q.newBuffer([]),r.prototype.filesize=Q.Long?Q.Long.fromBits(0,0,!0):0,r.prototype.blocksizes=Q.emptyArray,r.prototype.hashType=Q.Long?Q.Long.fromBits(0,0,!0):0,r.prototype.fanout=Q.Long?Q.Long.fromBits(0,0,!0):0,r.prototype.mode=0,r.prototype.mtime=null,r.encode=function(t,n){if(n||(n=Ec.create()),n.uint32(8).int32(t.Type),t.Data!=null&&Object.hasOwnProperty.call(t,"Data")&&n.uint32(18).bytes(t.Data),t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize")&&n.uint32(24).uint64(t.filesize),t.blocksizes!=null&&t.blocksizes.length)for(var i=0;i<t.blocksizes.length;++i)n.uint32(32).uint64(t.blocksizes[i]);return t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType")&&n.uint32(40).uint64(t.hashType),t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout")&&n.uint32(48).uint64(t.fanout),t.mode!=null&&Object.hasOwnProperty.call(t,"mode")&&n.uint32(56).uint32(t.mode),t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime")&&Pe.UnixTime.encode(t.mtime,n.uint32(66).fork()).ldelim(),n},r.decode=function(t,n){t instanceof _i||(t=_i.create(t));for(var i=n===void 0?t.len:t.pos+n,u=new Pe.Data;t.pos<i;){var f=t.uint32();switch(f>>>3){case 1:u.Type=t.int32();break;case 2:u.Data=t.bytes();break;case 3:u.filesize=t.uint64();break;case 4:if(u.blocksizes&&u.blocksizes.length||(u.blocksizes=[]),(f&7)===2)for(var d=t.uint32()+t.pos;t.pos<d;)u.blocksizes.push(t.uint64());else u.blocksizes.push(t.uint64());break;case 5:u.hashType=t.uint64();break;case 6:u.fanout=t.uint64();break;case 7:u.mode=t.uint32();break;case 8:u.mtime=Pe.UnixTime.decode(t,t.uint32());break;default:t.skipType(f&7);break}}if(!u.hasOwnProperty("Type"))throw Q.ProtocolError("missing required 'Type'",{instance:u});return u},r.fromObject=function(t){if(t instanceof Pe.Data)return t;var n=new Pe.Data;switch(t.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(t.Data!=null&&(typeof t.Data=="string"?Q.base64.decode(t.Data,n.Data=Q.newBuffer(Q.base64.length(t.Data)),0):t.Data.length&&(n.Data=t.Data)),t.filesize!=null&&(Q.Long?(n.filesize=Q.Long.fromValue(t.filesize)).unsigned=!0:typeof t.filesize=="string"?n.filesize=parseInt(t.filesize,10):typeof t.filesize=="number"?n.filesize=t.filesize:typeof t.filesize=="object"&&(n.filesize=new Q.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)Q.Long?(n.blocksizes[i]=Q.Long.fromValue(t.blocksizes[i])).unsigned=!0:typeof t.blocksizes[i]=="string"?n.blocksizes[i]=parseInt(t.blocksizes[i],10):typeof t.blocksizes[i]=="number"?n.blocksizes[i]=t.blocksizes[i]:typeof t.blocksizes[i]=="object"&&(n.blocksizes[i]=new Q.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0))}if(t.hashType!=null&&(Q.Long?(n.hashType=Q.Long.fromValue(t.hashType)).unsigned=!0:typeof t.hashType=="string"?n.hashType=parseInt(t.hashType,10):typeof t.hashType=="number"?n.hashType=t.hashType:typeof t.hashType=="object"&&(n.hashType=new Q.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),t.fanout!=null&&(Q.Long?(n.fanout=Q.Long.fromValue(t.fanout)).unsigned=!0:typeof t.fanout=="string"?n.fanout=parseInt(t.fanout,10):typeof t.fanout=="number"?n.fanout=t.fanout:typeof t.fanout=="object"&&(n.fanout=new Q.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),t.mode!=null&&(n.mode=t.mode>>>0),t.mtime!=null){if(typeof t.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=Pe.UnixTime.fromObject(t.mtime)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.blocksizes=[]),n.defaults){if(i.Type=n.enums===String?"Raw":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=Q.newBuffer(i.Data))),Q.Long){var u=new Q.Long(0,0,!0);i.filesize=n.longs===String?u.toString():n.longs===Number?u.toNumber():u}else i.filesize=n.longs===String?"0":0;if(Q.Long){var u=new Q.Long(0,0,!0);i.hashType=n.longs===String?u.toString():n.longs===Number?u.toNumber():u}else i.hashType=n.longs===String?"0":0;if(Q.Long){var u=new Q.Long(0,0,!0);i.fanout=n.longs===String?u.toString():n.longs===Number?u.toNumber():u}else i.fanout=n.longs===String?"0":0;i.mode=0,i.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")&&(i.Type=n.enums===String?Pe.Data.DataType[t.Type]:t.Type),t.Data!=null&&t.hasOwnProperty("Data")&&(i.Data=n.bytes===String?Q.base64.encode(t.Data,0,t.Data.length):n.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),t.filesize!=null&&t.hasOwnProperty("filesize")&&(typeof t.filesize=="number"?i.filesize=n.longs===String?String(t.filesize):t.filesize:i.filesize=n.longs===String?Q.Long.prototype.toString.call(t.filesize):n.longs===Number?new Q.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){i.blocksizes=[];for(var f=0;f<t.blocksizes.length;++f)typeof t.blocksizes[f]=="number"?i.blocksizes[f]=n.longs===String?String(t.blocksizes[f]):t.blocksizes[f]:i.blocksizes[f]=n.longs===String?Q.Long.prototype.toString.call(t.blocksizes[f]):n.longs===Number?new Q.LongBits(t.blocksizes[f].low>>>0,t.blocksizes[f].high>>>0).toNumber(!0):t.blocksizes[f]}return t.hashType!=null&&t.hasOwnProperty("hashType")&&(typeof t.hashType=="number"?i.hashType=n.longs===String?String(t.hashType):t.hashType:i.hashType=n.longs===String?Q.Long.prototype.toString.call(t.hashType):n.longs===Number?new Q.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),t.fanout!=null&&t.hasOwnProperty("fanout")&&(typeof t.fanout=="number"?i.fanout=n.longs===String?String(t.fanout):t.fanout:i.fanout=n.longs===String?Q.Long.prototype.toString.call(t.fanout):n.longs===Number?new Q.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),t.mode!=null&&t.hasOwnProperty("mode")&&(i.mode=t.mode),t.mtime!=null&&t.hasOwnProperty("mtime")&&(i.mtime=Pe.UnixTime.toObject(t.mtime,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Or.default.util.toJSONOptions)},r.DataType=function(){let e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),r})(),Hx=Pe.UnixTime=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Seconds=Q.Long?Q.Long.fromBits(0,0,!1):0,r.prototype.FractionalNanoseconds=0,r.encode=function(t,n){return n||(n=Ec.create()),n.uint32(8).int64(t.Seconds),t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&n.uint32(21).fixed32(t.FractionalNanoseconds),n},r.decode=function(t,n){t instanceof _i||(t=_i.create(t));for(var i=n===void 0?t.len:t.pos+n,u=new Pe.UnixTime;t.pos<i;){var f=t.uint32();switch(f>>>3){case 1:u.Seconds=t.int64();break;case 2:u.FractionalNanoseconds=t.fixed32();break;default:t.skipType(f&7);break}}if(!u.hasOwnProperty("Seconds"))throw Q.ProtocolError("missing required 'Seconds'",{instance:u});return u},r.fromObject=function(t){if(t instanceof Pe.UnixTime)return t;var n=new Pe.UnixTime;return t.Seconds!=null&&(Q.Long?(n.Seconds=Q.Long.fromValue(t.Seconds)).unsigned=!1:typeof t.Seconds=="string"?n.Seconds=parseInt(t.Seconds,10):typeof t.Seconds=="number"?n.Seconds=t.Seconds:typeof t.Seconds=="object"&&(n.Seconds=new Q.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),t.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=t.FractionalNanoseconds>>>0),n},r.toObject=function(t,n){n||(n={});var i={};if(n.defaults){if(Q.Long){var u=new Q.Long(0,0,!1);i.Seconds=n.longs===String?u.toString():n.longs===Number?u.toNumber():u}else i.Seconds=n.longs===String?"0":0;i.FractionalNanoseconds=0}return t.Seconds!=null&&t.hasOwnProperty("Seconds")&&(typeof t.Seconds=="number"?i.Seconds=n.longs===String?String(t.Seconds):t.Seconds:i.Seconds=n.longs===String?Q.Long.prototype.toString.call(t.Seconds):n.longs===Number?new Q.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")&&(i.FractionalNanoseconds=t.FractionalNanoseconds),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Or.default.util.toJSONOptions)},r})(),Vx=Pe.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.MimeType="",r.encode=function(t,n){return n||(n=Ec.create()),t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType")&&n.uint32(10).string(t.MimeType),n},r.decode=function(t,n){t instanceof _i||(t=_i.create(t));for(var i=n===void 0?t.len:t.pos+n,u=new Pe.Metadata;t.pos<i;){var f=t.uint32();switch(f>>>3){case 1:u.MimeType=t.string();break;default:t.skipType(f&7);break}}return u},r.fromObject=function(t){if(t instanceof Pe.Metadata)return t;var n=new Pe.Metadata;return t.MimeType!=null&&(n.MimeType=String(t.MimeType)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.MimeType=""),t.MimeType!=null&&t.hasOwnProperty("MimeType")&&(i.MimeType=t.MimeType),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Or.default.util.toJSONOptions)},r})();var zr=gy,wy=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],Uv=["directory","hamt-sharded-directory"],_y=parseInt("0644",8),Sy=parseInt("0755",8);function lo(r){if(r!=null)return typeof r=="number"?r&4095:(r=r.toString(),r.substring(0,1)==="0"?parseInt(r,8)&4095:parseInt(r,10)&4095)}function Si(r){if(r==null)return;let e;if(r.secs!=null&&(e={secs:r.secs,nsecs:r.nsecs}),r.Seconds!=null&&(e={secs:r.Seconds,nsecs:r.FractionalNanoseconds}),Array.isArray(r)&&(e={secs:r[0],nsecs:r[1]}),r instanceof Date){let t=r.getTime(),n=Math.floor(t/1e3);e={secs:n,nsecs:(t-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,Cu.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}var Ue=class{static unmarshal(e){let t=zr.decode(e),n=zr.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),i=new Ue({type:wy[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return i._originalMode=n.mode||0,i}constructor(e={type:"file"}){let{type:t,data:n,blockSizes:i,hashType:u,fanout:f,mtime:d,mode:h}=e;if(t&&!wy.includes(t))throw(0,Cu.default)(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=n,this.hashType=u,this.fanout=f,this.blockSizes=i||[],this._originalMode=0,this.mode=lo(h),d&&(this.mtime=Si(d),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?Sy:_y;let t=lo(e);t!==void 0&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&Uv.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(t=>{e+=t}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=zr.DataType.Raw;break;case"directory":e=zr.DataType.Directory;break;case"file":e=zr.DataType.File;break;case"metadata":e=zr.DataType.Metadata;break;case"symlink":e=zr.DataType.Symlink;break;case"hamt-sharded-directory":e=zr.DataType.HAMTShard;break;default:throw(0,Cu.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;(!this.data||!this.data.length)&&(t=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(lo(this.mode)||0),n===_y&&!this.isDirectory()&&(n=void 0),n===Sy&&this.isDirectory()&&(n=void 0));let i;if(this.mtime!=null){let f=Si(this.mtime);f&&(i={Seconds:f.secs,FractionalNanoseconds:f.nsecs},i.FractionalNanoseconds===0&&delete i.FractionalNanoseconds)}let u={Type:e,Data:t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i};return zr.encode(u).finish()}};var qv=async(r,e,t)=>{t.codec||(t.codec=nr),t.hasher||(t.hasher=or),t.cidVersion===void 0&&(t.cidVersion=1),t.codec===nr&&t.hasher!==or&&(t.cidVersion=1);let n=await t.hasher.digest(r),i=V.create(t.cidVersion,t.codec.code,n);return t.onlyHash||await e.put(i,r,{signal:t.signal}),i},Dt=qv;var Nv=async(r,e,t)=>{let n=new Ue({type:"directory",mtime:r.mtime,mode:r.mode}),i=yt(mt({Data:n.marshal()})),u=await Dt(i,e,t),f=r.path;return{cid:u,path:f,unixfs:n,size:i.length}},vy=Nv;var Iy=M(ir(),1);var Dy=M(ic(),1);var Ry=M(xu(),1);async function Mv(r,e){return e(await(0,Ry.default)(r))}var Ty=Mv;var Ay=M(wu(),1);function jv(r,e,t){return Cy(r,e,t)}async function Cy(r,e,t){let n=[];for await(let i of(0,Ay.default)(r,t.maxChildrenPerNode))n.push(await e(i));return n.length>1?Cy(n,e,t):n[0]}var xy=jv;var ky=M(wu(),1);async function $v(r,e,t){let n=new Rc(t.layerRepeat),i=0,u=1,f=n;for await(let d of(0,ky.default)(r,t.maxChildrenPerNode))f.isFull()&&(f!==n&&n.addChild(await f.reduce(e)),i&&i%t.layerRepeat===0&&u++,f=new ku(u,t.layerRepeat,i),i++),f.append(d);return f&&f!==n&&n.addChild(await f.reduce(e)),n.reduce(e)}var By=$v,ku=class{constructor(e,t,n=0){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;let e=this._findParent(this.node,this.currentDepth);return e?(this._addNextNodeToParent(e),!1):!0}_addNextNodeToParent(e){this.parent=e;let t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let n=[];return e.children.length&&(n=await Promise.all(e.children.filter(i=>i.data).map(i=>this._reduce(i,t)))),t((e.data||[]).concat(n))}_findParent(e,t){let n=e.parent;if(!(!n||n.depth===0))return n.children.length===n.maxChildren||!n.maxChildren?this._findParent(n,t):n}},Rc=class extends ku{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}};async function*Hv(r,e,t){for await(let n of r.content)yield async()=>{t.progress(n.length,r.path);let i,u={codec:nr,cidVersion:t.cidVersion,hasher:t.hasher,onlyHash:t.onlyHash};return t.rawLeaves?(u.codec=dn,u.cidVersion=1):(i=new Ue({type:t.leafType,data:n}),n=yt({Data:i.marshal(),Links:[]})),{cid:await Dt(n,e,u),unixfs:i,size:n.length}}}var Py=Hv;var Vv={flat:Ty,balanced:xy,trickle:By};async function*Yv(r,e,t){let n=-1,i,u;typeof t.bufferImporter=="function"?u=t.bufferImporter:u=Py;for await(let f of(0,Dy.default)(u(r,e,t),t.blockWriteConcurrency)){if(n++,n===0){i=f;continue}else n===1&&i&&(yield i,i=null);yield f}i&&(i.single=!0,yield i)}var Gv=(r,e,t)=>{async function n(i){if(i.length===1&&i[0].single&&t.reduceSingleLeafToSelf){let b=i[0];if(r.mtime!==void 0||r.mode!==void 0){let S=await e.get(b.cid);b.unixfs=new Ue({type:"file",mtime:r.mtime,mode:r.mode,data:S}),S=yt(mt({Data:b.unixfs.marshal()})),b.cid=await Dt(S,e,{...t,codec:nr,hasher:t.hasher,cidVersion:t.cidVersion}),b.size=S.length}return{cid:b.cid,path:r.path,unixfs:b.unixfs,size:b.size}}let u=new Ue({type:"file",mtime:r.mtime,mode:r.mode}),f=i.filter(b=>b.cid.code===za&&b.size||b.unixfs&&!b.unixfs.data&&b.unixfs.fileSize()?!0:Boolean(b.unixfs&&b.unixfs.data&&b.unixfs.data.length)).map(b=>b.cid.code===za?(u.addBlockSize(b.size),{Name:"",Tsize:b.size,Hash:b.cid}):(!b.unixfs||!b.unixfs.data?u.addBlockSize(b.unixfs&&b.unixfs.fileSize()||0):u.addBlockSize(b.unixfs.data.length),{Name:"",Tsize:b.size,Hash:b.cid})),d={Data:u.marshal(),Links:f},h=yt(mt(d));return{cid:await Dt(h,e,t),path:r.path,unixfs:u,size:h.length+d.Links.reduce((b,S)=>b+S.Tsize,0)}}return n};function Qv(r,e,t){let n=Vv[t.strategy];if(!n)throw(0,Iy.default)(new Error(`Unknown importer build strategy name: ${t.strategy}`),"ERR_BAD_STRATEGY");return n(Yv(r,e,t),Gv(r,e,t),t)}var Oy=Qv;var Mc=M(ir(),1);var Ky=M(Tc(),1),Jy=M(Qy(),1),Bc=M(ir(),1);async function*rE(r,e){let t,n,i;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)i=e.avgChunkSize,t=e.minChunkSize,n=e.maxChunkSize;else if(e.avgChunkSize)i=e.avgChunkSize,t=i/3,n=i+i/2;else throw(0,Bc.default)(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(t<16)throw(0,Bc.default)(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");n<t&&(n=t),i<t&&(i=t);let u=Math.floor(Math.log2(i));for await(let f of nE(r,{min:t,max:n,bits:u,window:e.window,polynomial:e.polynomial}))yield f}var Xy=rE;async function*nE(r,e){let t=await(0,Jy.create)(e.bits,e.min,e.max,e.window),n=new Ky.default;for await(let i of r){n.append(i);let u=t.fingerprint(i);for(let f=0;f<u.length;f++){let d=u[f],h=n.slice(0,d);n.consume(d),yield h}}n.length&&(yield n.slice(0))}var Bu=M(Tc(),1);async function*oE(r,e){let t=new Bu.default,n=0,i=!1,u=e.maxChunkSize;for await(let f of r)for(t.append(f),n+=f.length;n>=u;)if(yield t.slice(0,u),i=!0,u===t.length)t=new Bu.default,n=0;else{let d=new Bu.default;d.append(t.shallowSlice(u)),t=d,n-=u}(!i||n)&&(yield t.slice(0,n))}var Zy=oE;var Wc=M(ir(),1);var Pc={};ke(Pc,{identity:()=>iE});var iE=Zs({prefix:"\0",name:"identity",encode:r=>If(r),decode:r=>Pf(r)});var Ic={};ke(Ic,{base2:()=>aE});var aE=he({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Dc={};ke(Dc,{base8:()=>sE});var sE=he({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Oc={};ke(Oc,{base10:()=>uE});var uE=sn({prefix:"9",name:"base10",alphabet:"0123456789"});var zc={};ke(zc,{base16:()=>lE,base16upper:()=>fE});var lE=he({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),fE=he({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Lc={};ke(Lc,{base36:()=>cE,base36upper:()=>dE});var cE=sn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dE=sn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Fc={};ke(Fc,{base64:()=>hE,base64pad:()=>pE,base64url:()=>mE,base64urlpad:()=>yE});var hE=he({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pE=he({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),mE=he({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yE=he({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Uc={};ke(Uc,{identity:()=>wE});var eb=0,bE="identity",tb=Fe,gE=r=>to(eb,tb(r)),wE={code:eb,name:bE,encode:tb,digest:gE};var Ik=new TextEncoder,Dk=new TextDecoder;var qc={...Pc,...Ic,...Dc,...Oc,...zc,...Uf,...Lc,...Ff,...Fc},zk={...uc,...Uc};function nb(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var rb=nb("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),Nc=nb("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),SE={utf8:rb,"utf-8":rb,hex:qc.base16,latin1:Nc,ascii:Nc,binary:Nc,...qc},ob=SE;function Pu(r,e="utf8"){let t=ob[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}async function*vE(r){for await(let e of r){if(e.length===void 0)throw(0,Wc.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof e=="string"||e instanceof String)yield Pu(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else if(e instanceof Uint8Array)yield e;else throw(0,Wc.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}var ib=vE;function EE(r){return Symbol.iterator in r}function RE(r){return Symbol.asyncIterator in r}function TE(r){try{if(r instanceof Uint8Array)return async function*(){yield r}();if(EE(r))return async function*(){yield*r}();if(RE(r))return r}catch{throw(0,Mc.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,Mc.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*AE(r,e,t){for await(let n of r)if(n.path&&(n.path.substring(0,2)==="./"&&(t.wrapWithDirectory=!0),n.path=n.path.split("/").filter(i=>i&&i!==".").join("/")),n.content){let i;typeof t.chunker=="function"?i=t.chunker:t.chunker==="rabin"?i=Xy:i=Zy;let u;typeof t.chunkValidator=="function"?u=t.chunkValidator:u=ib;let f={path:n.path,mtime:n.mtime,mode:n.mode,content:i(u(TE(n.content),t),t)};yield()=>Oy(f,e,t)}else if(n.path){let i={path:n.path,mtime:n.mtime,mode:n.mode};yield()=>vy(i,e,t)}else throw new Error("Import candidate must have content or path or both")}var ab=AE;var jc=class{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},yn=jc;var $c=class extends yn{constructor(e,t){super(e,t),this._children={}}async put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){let e=Object.keys(this._children);for(let t=0;t<e.length;t++){let n=e[t];yield{key:n,child:this._children[n]}}}async*flush(e){let t=Object.keys(this._children),n=[];for(let m=0;m<t.length;m++){let b=this._children[t[m]];if(b instanceof yn)for await(let S of b.flush(e))b=S,yield b;b.size!=null&&b.cid&&n.push({Name:t[m],Tsize:b.size,Hash:b.cid})}let i=new Ue({type:"directory",mtime:this.mtime,mode:this.mode}),u={Data:i.marshal(),Links:n},f=yt(mt(u)),d=await Dt(f,e,this.options),h=f.length+u.Links.reduce((m,b)=>m+(b.Tsize==null?0:b.Tsize),0);this.cid=d,this.size=h,yield{cid:d,unixfs:i,path:this.path,size:h}}},Ha=$c;var Vu=M(ag(),1),fd=class extends yn{constructor(e,t){super(e,t),this._bucket=(0,Vu.createHAMT)({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){for await(let t of ug(this._bucket,e,this,this.options))yield{...t,path:this.path}}},sg=fd;async function*ug(r,e,t,n){let i=r._children,u=[],f=0;for(let p=0;p<i.length;p++){let g=i.get(p);if(!g)continue;let v=p.toString(16).toUpperCase().padStart(2,"0");if(g instanceof Vu.Bucket){let P;for await(let R of await ug(g,e,null,n))P=R;if(!P)throw new Error("Could not flush sharded directory, no subshard found");u.push({Name:v,Tsize:P.size,Hash:P.cid}),f+=P.size}else if(typeof g.value.flush=="function"){let P=g.value,R;for await(let B of P.flush(e))R=B,yield R;let T=v+g.key;u.push({Name:T,Tsize:R.size,Hash:R.cid}),f+=R.size}else{let P=g.value;if(!P.cid)continue;let R=v+g.key,T=P.size;u.push({Name:R,Tsize:T,Hash:P.cid}),f+=T}}let d=Uint8Array.from(i.bitField().reverse()),h=new Ue({type:"hamt-sharded-directory",data:d,fanout:r.tableSize(),hashType:n.hamtHashCode,mtime:t&&t.mtime,mode:t&&t.mode}),m={Data:h.marshal(),Links:u},b=yt(mt(m)),S=await Dt(b,e,n),_=b.length+f;yield{cid:S,unixfs:h,size:_}}async function lg(r,e,t,n){let i=e;e instanceof Ha&&e.directChildrenCount()>=t&&(i=await uT(e,n));let u=i.parent;if(u){if(i!==e){if(r&&(r.parent=i),!i.parentKey)throw new Error("No parent key found");await u.put(i.parentKey,i)}return lg(i,u,t,n)}return i}async function uT(r,e){let t=new sg({root:r.root,dir:!0,parent:r.parent,parentKey:r.parentKey,path:r.path,dirty:r.dirty,flat:!1,mtime:r.mtime,mode:r.mode},e);for await(let{key:n,child:i}of r.eachChildSeries())await t.put(n,i);return t}var fg=lg;var lT=(r="")=>(r.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean),cg=lT;async function fT(r,e,t){let n=cg(r.path||""),i=n.length-1,u=e,f="";for(let d=0;d<n.length;d++){let h=n[d];f+=`${f?"/":""}${h}`;let m=d===i;if(u.dirty=!0,u.cid=void 0,u.size=void 0,m)await u.put(h,r),e=await fg(null,u,t.shardSplitThreshold,t);else{let b=await u.get(h);(!b||!(b instanceof yn))&&(b=new Ha({root:!1,dir:!0,parent:u,parentKey:h,path:f,dirty:!0,flat:!0,mtime:b&&b.unixfs&&b.unixfs.mtime,mode:b&&b.unixfs&&b.unixfs.mode},t)),await u.put(h,b),u=b}}return e}async function*dg(r,e){if(!(r instanceof yn)){r&&r.unixfs&&r.unixfs.isDirectory()&&(yield r);return}yield*r.flush(e)}async function*cT(r,e,t){let n=new Ha({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t);for await(let i of r)!i||(n=await fT(i,n,t),(!i.unixfs||!i.unixfs.isDirectory())&&(yield i));if(t.wrapWithDirectory)yield*dg(n,e);else for await(let i of n.eachChildSeries())!i||(yield*dg(i.child,e))}var hg=cT;async function*mg(r,e,t={}){let n=gm(t),i;typeof t.dagBuilder=="function"?i=t.dagBuilder:i=ab;let u;typeof t.treeBuilder=="function"?u=t.treeBuilder:u=hg;let f;Symbol.asyncIterator in r||Symbol.iterator in r?f=r:f=[r];for await(let d of u((0,pg.default)(i(f,e,n),n.fileImportConcurrency),e,n))yield{cid:d.cid,path:d.path,unixfs:d.unixfs,size:d.size}}var vg=M(ir(),1);var Eg=M(Xa(),1),Rg=M(wg(),1),Tg=M(Yu(),1),Ag=M(xu(),1),Cg=M(cd(),1);function Fr(r){return ArrayBuffer.isView(r)||r instanceof ArrayBuffer}function ho(r){return r.constructor&&(r.constructor.name==="Blob"||r.constructor.name==="File")&&typeof r.stream=="function"}function Za(r){return typeof r=="object"&&(r.path||r.content)}var po=r=>r&&typeof r.getReader=="function";async function*Gu(r){yield r}async function Qu(r){if(Fr(r))return Gu(dd(r));if(typeof r=="string"||r instanceof String)return Gu(dd(r.toString()));if(ho(r))return(0,Rg.default)(r);if(po(r)&&(r=(0,Eg.default)(r)),Symbol.iterator in r||Symbol.asyncIterator in r){let e=(0,Tg.default)(r),{value:t,done:n}=await e.peek();if(n)return Gu(new Uint8Array(0));if(e.push(t),Number.isInteger(t))return Gu(Uint8Array.from(await(0,Ag.default)(e)));if(Fr(t)||typeof t=="string"||t instanceof String)return(0,Cg.default)(e,dd)}throw(0,vg.default)(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT")}function dd(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new Uint8Array(r):Array.isArray(r)?Uint8Array.from(r):Pu(r.toString())}var Ju=M(ir(),1),xg=M(Xa(),1),kg=M(Yu(),1);async function*Bg(r,e){if(r==null)throw(0,Ju.default)(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT");if(typeof r=="string"||r instanceof String){yield Ku(r.toString(),e);return}if(Fr(r)||ho(r)){yield Ku(r,e);return}if(po(r)&&(r=(0,xg.default)(r)),Symbol.iterator in r||Symbol.asyncIterator in r){let t=(0,kg.default)(r),{value:n,done:i}=await t.peek();if(i){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||Fr(n)||typeof n=="string"||n instanceof String){yield Ku(t,e);return}throw(0,Ju.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Za(r)){yield Ku(r,e);return}throw(0,Ju.default)(new Error('Unexpected input: cannot convert "'+typeof r+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Ku(r,e){let{path:t,mode:n,mtime:i,content:u}=r,f={path:t||"",mode:lo(n),mtime:Si(i)};return u?f.content=await e(u):t||(f.content=await e(r)),f}function Pg(r){return Bg(r,Qu)}var es=M(ir(),1),Ig=M(Xa(),1),Dg=M(Yu(),1),pd=M(cd(),1);async function*Og(r,e){if(typeof r=="string"||r instanceof String||Fr(r)||ho(r)||r._readableState)throw(0,es.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(po(r)&&(r=(0,Ig.default)(r)),Symbol.iterator in r||Symbol.asyncIterator in r){let t=(0,Dg.default)(r),{value:n,done:i}=await t.peek();if(i){yield*[];return}if(t.push(n),Number.isInteger(n))throw(0,es.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*(0,pd.default)(t,u=>hd({content:u},e));return}if(Fr(n)){yield hd({content:t},e);return}if(Za(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||po(n)||ho(n)){yield*(0,pd.default)(t,u=>hd(u,e));return}}throw Za(r)?(0,es.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,es.default)(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}async function hd(r,e){let{path:t,mode:n,mtime:i,content:u}=r,f={path:t||"",mode:lo(n),mtime:Si(i)};return u?f.content=await e(u):t||(f.content=await e(r)),f}function zg(r){return Og(r,Qu)}function yT(r){return ArrayBuffer.isView(r)||r instanceof ArrayBuffer}function bT(r){return Boolean(r.constructor)&&(r.constructor.name==="Blob"||r.constructor.name==="File")&&typeof r.stream=="function"}function gT(r){return typeof r=="string"||r instanceof String||yT(r)||bT(r)||"_readableState"in r}function Lg(r){return gT(r)?Pg(r):zg(r)}var Xu={};ke(Xu,{abortedError:()=>wT,notFoundError:()=>Fg});var md=M(ir(),1);function Fg(r){return r=r||new Error("Not Found"),(0,md.default)(r,"ERR_NOT_FOUND")}function wT(r){return r=r||new Error("Aborted"),(0,md.default)(r,"ERR_ABORTED")}var yd=M(qg(),1),mo=M(Wg(),1),bd=M(jg(),1),Hg=M(xu(),1),$g=(r,e)=>async function*(){yield*(await(0,Hg.default)(r)).sort(e)}(),gn=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,yd.default)(this.putMany(e,n)),e=[],await(0,yd.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,mo.default)(n,i=>i.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,u)=>(0,mo.default)(i,u),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,u)=>$g(i,u),n)),e.offset!=null){let i=0;n=(0,mo.default)(n,()=>i++>=(e.offset||0))}return e.limit!=null&&(n=(0,bd.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,mo.default)(n,i=>i.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,u)=>(0,mo.default)(i,u),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,u)=>$g(i,u),n)),e.offset!=null){let i=0;n=(0,mo.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,bd.default)(n,e.limit)),n}};var BP={...Xu};var Zu=class extends gn{constructor(){super(),this.store=new Map}async*blocks(){for(let[e,t]of this.store.entries())yield{cid:V.parse(e),bytes:t}}put(e,t){return this.store.set(e.toString(),t),Promise.resolve()}get(e){let t=this.store.get(e.toString());if(!t)throw new Error(`block with cid ${e.toString()} no found`);return Promise.resolve(t)}has(e){return Promise.resolve(this.store.has(e.toString()))}close(){return this.store.clear(),Promise.resolve()}};var yo={cidVersion:1,chunker:"fixed",maxChunkSize:262144,hasher:or,rawLeaves:!0,wrapWithDirectory:!0,maxChildrenPerNode:174};async function ts({input:r,blockstore:e,hasher:t,maxChunkSize:n,maxChildrenPerNode:i,wrapWithDirectory:u,rawLeaves:f}){if(!r||Array.isArray(r)&&!r.length)throw new Error("missing input file(s)");let d=e||new Zu,h=await(0,Vg.default)((0,Yg.default)(Lg(r),P=>mg(P,d,{...yo,hasher:t||yo.hasher,maxChunkSize:n||yo.maxChunkSize,maxChildrenPerNode:i||yo.maxChildrenPerNode,wrapWithDirectory:u===!1?!1:yo.wrapWithDirectory,rawLeaves:f??yo.rawLeaves})));if(!h||!h.cid)throw new Error("given input could not be parsed correctly");let m=h.cid,{writer:b,out:S}=await Ir.create([m]),_=S[Symbol.asyncIterator](),p,g=async()=>{for await(let P of d.blocks())await b.put(P);await b.close(),e||await d.close()},v={[Symbol.asyncIterator](){if(p!=null)throw new Error("Multiple iterator not supported");return p=g(),{async next(){let P=await _.next();return P.done&&await p,P}}}};return{root:m,out:v}}var Qw=M(Kg(),1);var Nw=M(require("http"),1),Ww=M(require("https"),1),wo=M(require("zlib"),1),Mw=M(Xg(),1);var il=M(require("stream"),1),Bw=require("util");var rs=TextEncoder,el=TextDecoder;var rw=M(tw(),1),{ReadableStream:wt,ReadableStreamDefaultReader:GP,ReadableStreamBYOBReader:QP,ReadableStreamBYOBRequest:KP,ReadableByteStreamController:JP,ReadableStreamDefaultController:XP,TransformStream:ZP,TransformStreamDefaultController:eI,WritableStream:tI,WritableStreamDefaultWriter:rI,WritableStreamDefaultController:nI,ByteLengthQueuingStrategy:oI,CountQueuingStrategy:iI,TextEncoderStream:aI,TextDecoderStream:sI}=rw.default;var nw=class ow{constructor(e=[],t={}){let n=[],i=0;for(let u of e)if(typeof u=="string"){let f=new rs().encode(u);n.push(f),i+=f.byteLength}else if(u instanceof nw)i+=u.size,n.push(...u._parts);else if(u instanceof ArrayBuffer)n.push(new Uint8Array(u)),i+=u.byteLength;else if(u instanceof Uint8Array)n.push(u),i+=u.byteLength;else if(ArrayBuffer.isView(u)){let{buffer:f,byteOffset:d,byteLength:h}=u;n.push(new Uint8Array(f,d,h)),i+=h}else{let f=new rs().encode(String(u));n.push(f),i+=f.byteLength}this._size=i,this._type=RT(t.type),this._parts=n,Object.defineProperties(this,{_size:{enumerable:!1},_type:{enumerable:!1},_parts:{enumerable:!1}})}get type(){return this._type}get size(){return this._size}slice(e=0,t=this.size,n=""){let{size:i,_parts:u}=this,f=e<0?Math.max(i+e,0):Math.min(e,i),d=t<0?Math.max(i+t,0):Math.min(t,i),h=Math.max(d-f,0),m=new ow([],{type:n});if(h===0)return m;let b=0,S=[];for(let _ of u){let{byteLength:p}=_;if(f>0&&p<=f)f-=p,d-=p;else{let g=_.subarray(f,Math.min(p,d));if(S.push(g),b+=g.byteLength,f=0,b>=h)break}}return m._parts=S,m._size=b,m}async arrayBuffer(){let e=new ArrayBuffer(this.size),t=new Uint8Array(e),n=0;for(let i of this._parts)t.set(i,n),n+=i.byteLength;return e}async text(){let e=new el,t="";for(let n of this._parts)t+=e.decode(n);return t}stream(){return new _d(this._parts)}toString(){return"[object Blob]"}get[Symbol.toStringTag](){return"Blob"}},iw=nw,_d=class extends wt{constructor(e){super(new Sd(e.values()),{type:"bytes"}),this._chunks=e}async*[Symbol.asyncIterator](e){let t=this.getReader();yield*this._chunks,t.releaseLock()}},Sd=class{constructor(e){this.chunks=e}start(e){this.work(e),this.isWorking=!1,this.isCancelled=!1}async work(e){let{chunks:t}=this;for(this.isWorking=!0;!this.isCancelled&&(e.desiredSize||0)>0;){let n=null;try{n=t.next()}catch(i){e.error(i);break}n&&(!n.done&&!this.isCancelled?e.enqueue(n.value):e.close())}this.isWorking=!1}pull(e){this.isWorking||this.work(e)}cancel(){this.isCancelled=!0}},RT=(r="")=>{let e=String(r).toLowerCase();return/[^\u0020-\u007E]/.test(e)?"":e};var qe=globalThis.Blob||iw;var rl=class{constructor(e){if(e!==void 0)throw TT(e)?new TypeError("FormData constructor: HTMLFormElement parameter is not supported, if you need it submit an issue"):new TypeError("FormData constructor: Argument 1 does not implement interface HTMLFormElement.");this._entries=[],Object.defineProperty(this,"_entries",{enumerable:!1})}get[Symbol.toStringTag](){return"FormData"}append(e,t=xi(new TypeError("FormData.append: requires at least 2 arguments")),n){this._entries.push([e,aw(t,n)])}delete(e=xi(new TypeError("FormData.delete: requires string argument"))){let t=this._entries,n=0;for(;n<t.length;){let[i]=t[n];i===e?t.splice(n,1):n++}}get(e=xi(new TypeError("FormData.get: requires string argument"))){for(let[t,n]of this._entries)if(t===e)return n;return null}getAll(e=xi(new TypeError("FormData.getAll: requires string argument"))){let t=[];for(let[n,i]of this._entries)n===e&&t.push(i);return t}has(e=xi(new TypeError("FormData.has: requires string argument"))){for(let[t]of this._entries)if(t===e)return!0;return!1}set(e,t=xi(new TypeError("FormData.set: requires at least 2 arguments")),n){let i=0,{_entries:u}=this,f=aw(t,n),d=!1;for(;i<u.length;){let h=u[i];h[0]===e?d?u.splice(i,1):(d=!0,h[1]=f,i++):i++}d||u.push([e,f])}entries(){return this._entries.values()}*keys(){for(let[e]of this._entries)yield e}*values(){for(let[e,t]of this._entries)yield t}[Symbol.iterator](){return this._entries.values()}forEach(e,t){for(let[n,i]of this._entries)e.call(t,i,n,this)}},TT=r=>Object.prototype.toString.call(r)==="[object HTMLFormElement]",aw=(r,e)=>{if(AT(r))return e!=null?new sw([r],e,r):r;if(CT(r))return new sw([r],e??"blob");if(e!=null)throw new TypeError("filename is only supported when value is Blob or File");return`${r}`},AT=r=>Object.prototype.toString.call(r)==="[object File]"&&typeof r.name=="string",CT=r=>Object.prototype.toString.call(r)==="[object Blob]",sw=class{constructor([e],t,{lastModified:n=Date.now()}={}){this.blob=e,this.name=t,this.lastModified=n}get webkitRelativePath(){return""}get size(){return this.blob.size}get type(){return this.blob.type}slice(e,t,n){return this.blob.slice(e,t,n)}stream(){return this.blob.stream()}text(){return this.blob.text()}arrayBuffer(){return this.blob.arrayBuffer()}get[Symbol.toStringTag](){return"File"}},xi=r=>{throw r};var ns=typeof globalThis.FormData=="function"?globalThis.FormData:rl;var wn=class extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var Lt=class extends wn{constructor(e,t,n){super(e,t),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};var Sw=require("crypto");function ki(r){let e=unescape(encodeURIComponent(r));return Uint8Array.from(e,(t,n)=>e.charCodeAt(n))}function vd(r){let e=String.fromCharCode.apply(null,r);return decodeURIComponent(escape(e))}function bo(...r){let e=new Uint8Array(r.reduce((n,i)=>n+i.length,0)),t=0;for(let n of r)e.set(n,t),t+=n.length;return e}function uw(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function lw(r){return r instanceof Uint8Array?e=>r[e]:r}function Ed(r,e,t,n,i){let u=lw(r),f=lw(t);for(let d=0;d<i;++d)if(u(e+d)!==f(n+d))return!1;return!0}function kT(r){let e=new Array(256).fill(r.length);if(r.length>1)for(let t=0;t<r.length-1;t++)e[r[t]]=r.length-1-t;return e}var dr=Symbol("Match"),go=class{constructor(e){this._lookbehind=new Uint8Array,typeof e=="string"?this._needle=e=ki(e):this._needle=e,this._lastChar=e[e.length-1],this._occ=kT(e)}feed(e){let t=0,n,i=[];for(;t!==e.length;)[t,...n]=this._feed(e,t),i.push(...n);return i}end(){let e=this._lookbehind;return this._lookbehind=new Uint8Array,e}_feed(e,t){let n=[],i=-this._lookbehind.length;if(i<0){for(;i<0&&i<=e.length-this._needle.length;){let u=this._charAt(e,i+this._needle.length-1);if(u===this._lastChar&&this._memcmp(e,i,this._needle.length-1))return i>-this._lookbehind.length&&n.push(this._lookbehind.slice(0,this._lookbehind.length+i)),n.push(dr),this._lookbehind=new Uint8Array,[i+this._needle.length,...n];i+=this._occ[u]}if(i<0)for(;i<0&&!this._memcmp(e,i,e.length-i);)i++;if(i>=0)n.push(this._lookbehind),this._lookbehind=new Uint8Array;else{let u=this._lookbehind.length+i;return u>0&&(n.push(this._lookbehind.slice(0,u)),this._lookbehind=this._lookbehind.slice(u)),this._lookbehind=Uint8Array.from(new Array(this._lookbehind.length+e.length),(f,d)=>this._charAt(e,d-this._lookbehind.length)),[e.length,...n]}}for(i+=t;i<=e.length-this._needle.length;){let u=e[i+this._needle.length-1];if(u===this._lastChar&&e[i]===this._needle[0]&&Ed(this._needle,0,e,i,this._needle.length-1))return i>t&&n.push(e.slice(t,i)),n.push(dr),[i+this._needle.length,...n];i+=this._occ[u]}if(i<e.length){for(;i<e.length&&(e[i]!==this._needle[0]||!Ed(e,i,this._needle,0,e.length-i));)++i;i<e.length&&(this._lookbehind=e.slice(i))}return i>0&&n.push(e.slice(t,i<e.length?i:e.length)),[e.length,...n]}_charAt(e,t){return t<0?this._lookbehind[this._lookbehind.length+t]:e[t]}_memcmp(e,t,n){return Ed(this._charAt.bind(this,e),t,this._needle,0,n)}},nl=class{constructor(e,t){this._readableStream=t,this._search=new go(e)}async*[Symbol.asyncIterator](){let e=this._readableStream.getReader();try{for(;;){let n=await e.read();if(n.done)break;yield*this._search.feed(n.value)}let t=this._search.end();t.length&&(yield t)}finally{e.releaseLock()}}},fw=Symbol("End of Queue"),cw=class{constructor(e){this._chunksQueue=[],this._closed=!1,this._search=new go(e)}push(...e){if(this._closed)throw new Error("cannot call push after close");this._chunksQueue.push(...e),this._notify&&this._notify()}close(){if(this._closed)throw new Error("close was already called");this._closed=!0,this._chunksQueue.push(fw),this._notify&&this._notify()}async*[Symbol.asyncIterator](){for(;;){let t;for(;!(t=this._chunksQueue.shift());)await new Promise(n=>this._notify=n),this._notify=void 0;if(t===fw)break;yield*this._search.feed(t)}let e=this._search.end();e.length&&(yield e)}};var BT=Function.prototype.apply.bind(bo,void 0),dw=ki("--"),os=ki(`\r
`);function PT(r){let e=r.split(";").map(n=>n.trim());if(e.shift()!=="form-data")throw new Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(e)+"`");let t={};for(let n of e){let i=n.split("=",2);if(i.length!==2)throw new Error("malformed content-disposition header: key-value pair not found - "+n+" in `"+r+"`");let[u,f]=i;if(f[0]==='"'&&f[f.length-1]==='"')t[u]=f.slice(1,-1).replace(/\\"/g,'"');else if(f[0]!=='"'&&f[f.length-1]!=='"')t[u]=f;else if(f[0]==='"'&&f[f.length-1]!=='"'||f[0]!=='"'&&f[f.length-1]==='"')throw new Error("malformed content-disposition header: mismatched quotations in `"+r+"`")}if(!t.name)throw new Error("malformed content-disposition header: missing field name in `"+r+"`");return t}function IT(r){let e=[],t=!1,n;for(;typeof(n=r.shift())<"u";){let i=n.indexOf(":");if(i===-1)throw new Error("malformed multipart-form header: missing colon");let u=n.slice(0,i).trim().toLowerCase(),f=n.slice(i+1).trim();switch(u){case"content-disposition":t=!0,e.push(...Object.entries(PT(f)));break;case"content-type":e.push(["contentType",f])}}if(!t)throw new Error("malformed multipart-form header: missing content-disposition");return Object.fromEntries(e)}async function DT(r,e){let t=!0,n=!1,i=[[]],u=new go(os);for(;;){let f=await r.next();if(f.done)throw new Error("malformed multipart-form data: unexpected end of stream");if(t&&f.value!==dr&&uw(f.value.slice(0,2),dw))return[void 0,new Uint8Array];let d;if(f.value!==dr)d=f.value;else if(!n)d=e;else throw new Error("malformed multipart-form data: unexpected boundary");if(!d.length)continue;t&&(t=!1);let h=u.feed(d);for(let[m,b]of h.entries()){let S=b===dr;if(!(!S&&!b.length)){if(n&&S)return h.push(u.end()),[i.filter(_=>_.length).map(BT).map(vd),bo(...h.slice(m+1).map(_=>_===dr?os:_))];(n=S)?i.push([]):i[i.length-1].push(b)}}}}async function*OT(r,e){let t=bo(dw,ki(e)),n=new nl(t,r)[Symbol.asyncIterator]();for(;;){let u=await n.next();if(u.done)return;if(u.value===dr)break}let i=new go(os);for(;;){let m=function(p){let g=[];for(let v of i.feed(p))h&&g.push(os),(h=v===dr)||g.push(v);return bo(...g)},[u,f]=await DT(n,t);if(!u)return;async function d(){let p=await n.next();if(p.done)throw new Error("malformed multipart-form data: unexpected end of stream");return p}let h=!1,b=!1;async function S(){let p=await d(),g;if(p.value!==dr)g=p.value;else if(!h)g=os;else return b=!0,{value:i.end()};return{value:m(g)}}let _=[{value:m(f)}];for(yield{...IT(u),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){let p=_.shift();if(!p)break;if(p.value.length>0)return p}for(;;){if(b)return{done:b,value:void 0};let p=await S();if(p.value.length>0)return p}}}};!b;)_.push(await S())}}async function*hw(r,e){for await(let t of OT(r,e)){let n=[];for await(let i of t.data)n.push(i);yield{...t,data:bo(...n)}}}var pw=M(require("stream"),1),is=Symbol.toStringTag,mw=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[is]==="URLSearchParams",Bi=r=>typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[is]);function yw(r){return typeof r=="object"&&typeof r.append=="function"&&typeof r.set=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.delete=="function"&&typeof r.keys=="function"&&typeof r.values=="function"&&typeof r.entries=="function"&&typeof r.constructor=="function"&&r[is]==="FormData"}var bw=r=>r instanceof pw.default&&typeof r.getBoundary=="function"&&typeof r.hasKnownLength=="function"&&typeof r.getLengthSync=="function",gw=r=>typeof r=="object"&&(r[is]==="AbortSignal"||r[is]==="EventTarget"),ww=r=>typeof r=="object"&&typeof r.getReader=="function"&&typeof r.cancel=="function"&&typeof r.tee=="function",_w=r=>r&&Symbol.iterator in r;var Pi=`\r
`,Rd="-".repeat(2),zT=Buffer.byteLength(Pi),vw=r=>`${Rd}${r}${Rd}${Pi.repeat(2)}`;function Ew(r,e,t){let n="";if(n+=`${Rd}${r}${Pi}`,n+=`Content-Disposition: form-data; name="${e}"`,Bi(t)){let{name:i="blob",type:u}=t;n+=`; filename="${i}"${Pi}`,n+=`Content-Type: ${u||"application/octet-stream"}`}return`${n}${Pi.repeat(2)}`}var Rw=()=>(0,Sw.randomBytes)(8).toString("hex");async function*Tw(r,e){for(let[t,n]of r)yield Ew(e,t,n),Bi(n)?yield*n.stream():yield n,yield Pi;yield vw(e)}function Aw(r,e){let t=0;for(let[n,i]of r)t+=Buffer.byteLength(Ew(e,n,i)),Bi(i)?t+=i.size:t+=Buffer.byteLength(String(i)),t+=zT;return t+=Buffer.byteLength(vw(e)),t}var Cw=async({body:r,headers:e})=>{let t=e?.get("Content-Type")||"",[n,i]=t.split(/\s*;\s*boundary=/);if(n==="multipart/form-data"&&i!=null&&r!=null){let u=new FormData,f=hw(r,i);for await(let{name:d,data:h,filename:m,contentType:b}of f)m?u.append(d,new File([h],m,{type:b})):u.append(d,new TextDecoder().decode(h),m);return u}else throw new TypeError("Could not parse content as FormData.")};var ol=require("util"),LT=new ol.TextEncoder,FT=new ol.TextDecoder,Td=r=>LT.encode(r),xw=r=>FT.decode(r);var{readableHighWaterMark:qT}=new il.default.Readable,Ur=Symbol("Body internals"),_n=class{constructor(e,{size:t=0}={}){let n={body:null,type:null,size:null,boundary:null,disturbed:!1,error:null};if(this[Ur]=n,e===null)n.body=null,n.size=0;else if(mw(e)){let i=Td(e.toString());n.body=as(i),n.size=i.byteLength,n.type="application/x-www-form-urlencoded;charset=UTF-8"}else if(Bi(e))n.size=e.size,n.type=e.type||null,n.body=e.stream();else if(e instanceof Uint8Array)n.body=as(e),n.size=e.byteLength;else if(Bw.types.isAnyArrayBuffer(e)){let i=new Uint8Array(e);n.body=as(i),n.size=i.byteLength}else if(ArrayBuffer.isView(e)){let i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);n.body=as(i),n.size=i.byteLength}else if(ww(e))n.body=e;else if(yw(e)){let i=`NodeFetchFormDataBoundary${Rw()}`;n.type=`multipart/form-data; boundary=${i}`,n.size=Aw(e,i),n.body=Ii(Tw(e,i))}else if(bw(e))n.type=`multipart/form-data; boundary=${e.getBoundary()}`,n.size=e.hasKnownLength()?e.getLengthSync():null,n.body=kw(e);else if(e instanceof il.default)n.body=kw(e);else{let i=Td(String(e));n.type="text/plain;charset=UTF-8",n.size=i.byteLength,n.body=as(i)}this.size=t}get headers(){throw new TypeError("'get headers' called on an object that does not implements interface.")}get body(){return this[Ur].body}get bodyUsed(){return this[Ur].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:t,byteLength:n}=await Ad(this);return e.slice(t,t+n)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[Ur].body&&this[Ur].type||"",t=await Ad(this);return new qe([t],{type:e})}async json(){return JSON.parse(await this.text())}async text(){let e=await Ad(this);return xw(e)}async formData(){return Cw(this)}};Object.defineProperties(_n.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},formData:{enumerable:!0}});async function Ad(r){let e=r[Ur];if(e.disturbed)throw new TypeError(`body used already for: ${r.url}`);if(e.disturbed=!0,e.error)throw e.error;let{body:t}=e;if(t===null)return new Uint8Array(0);let[n,i,u]=r.size>0?[new Uint8Array(r.size),[],r.size]:[null,[],1/0],f=0,d=Dw(t);try{for await(let h of d){let m=h instanceof Uint8Array?h:Buffer.from(h);if(f+m.byteLength>u){let b=new Lt(`content size at ${r.url} over limit: ${u}`,"max-size");throw d.throw(b),b}else n?n.set(m,f):i.push(m);f+=m.byteLength}if(n){if(f<n.byteLength)throw new Lt(`Premature close of server response while trying to fetch ${r.url}`,"premature-close");return n}else return NT(new Uint8Array(f),i)}catch(h){if(h instanceof wn)throw h;if(h&&h.name==="AbortError")throw h;{let m=h;throw new Lt(`Invalid response body while trying to fetch ${r.url}: ${m.message}`,"system",m)}}}var al=r=>{let{body:e}=r;if(r.bodyUsed)throw new Error("cannot clone body after it is used");let[t,n]=e.tee();return r[Ur].body=t,n},sl=r=>r[Ur].type,Pw=r=>r[Ur].size,Iw=(r,{body:e})=>{e===null?r.end():il.default.Readable.from(Dw(e)).pipe(r)},Cd=class{constructor(e){this.stream=e,this.reader=null}[Symbol.asyncIterator](){return this}getReader(){if(this.reader)return this.reader;let e=this.stream.getReader();return this.reader=e,e}next(){return this.getReader().read()}async return(){return this.reader&&await this.reader.cancel(),{done:!0,value:void 0}}async throw(e){return await this.getReader().cancel(e),{done:!0,value:void 0}}},Dw=r=>new Cd(r),NT=(r,e)=>{let t=0;for(let n of e)r.set(n,t),t+=n.byteLength;return r},as=r=>new wt({start(e){e.enqueue(r),e.close()}}),Ii=r=>new wt(new xd(r)),xd=class{constructor(e){this.source=e[Symbol.asyncIterator]()}async pull(e){try{for(;e.desiredSize||0>0;){let t=await this.source.next();if(t.done){e.close();break}else e.enqueue(t.value)}}catch(t){e.error(t)}}cancel(e){e?typeof this.source.throw=="function"?this.source.throw(e):typeof this.source.return=="function"&&this.source.return():typeof this.source.return=="function"&&this.source.return()}},kw=r=>{let e=new kd(r);return new wt(e,e)},kd=class{constructor(e){this.highWaterMark=e.readableHighWaterMark||qT,this.accumalatedSize=0,this.stream=e,this.enqueue=this.enqueue.bind(this),this.error=this.error.bind(this),this.close=this.close.bind(this)}size(e){return e?.byteLength||0}start(e){this.controller=e,this.stream.on("data",this.enqueue),this.stream.once("error",this.error),this.stream.once("end",this.close),this.stream.once("close",this.close)}pull(){this.resume()}cancel(e){this.stream.destroy&&this.stream.destroy(e),this.stream.off("data",this.enqueue),this.stream.off("error",this.error),this.stream.off("end",this.close),this.stream.off("close",this.close)}enqueue(e){if(this.controller)try{let t=e instanceof Uint8Array?e:Buffer.from(e),n=(this.controller.desiredSize||0)-t.byteLength;this.controller.enqueue(t),n<=0&&this.pause()}catch{this.controller.error(new Error("Could not create Buffer, chunk must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object")),this.cancel()}}pause(){this.stream.pause&&this.stream.pause()}resume(){this.stream.readable&&this.stream.resume&&this.stream.resume()}close(){this.controller&&(this.controller.close(),delete this.controller)}error(e){this.controller&&(this.controller.error(e),delete this.controller)}};var Ow=require("util"),zw=M(require("http"),1);var ll=zw.default,ul=typeof ll.validateHeaderName=="function"?ll.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let e=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Bd=typeof ll.validateHeaderValue=="function"?ll.validateHeaderValue:(r,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let t=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}},Ne=class extends URLSearchParams{constructor(e){let t=[];if(e instanceof Ne){let n=e.raw();for(let[i,u]of Object.entries(n))t.push(...u.map(f=>[i,f]))}else if(e!=null)if(_w(e))t=[...e].map(n=>{if(typeof n!="object"||Ow.types.isBoxedPrimitive(n))throw new TypeError("Each header pair must be an iterable object");return[...n]}).map(n=>{if(n.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...n]});else if(typeof e=="object"&&e!==null)t.push(...Object.entries(e));else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return t=t.length>0?t.map(([n,i])=>(ul(n),Bd(n,String(i)),[String(n).toLowerCase(),String(i)])):[],super(t),new Proxy(this,{get(n,i,u){switch(i){case"append":case"set":return(f,d)=>(ul(f),Bd(f,String(d)),URLSearchParams.prototype[i].call(u,String(f).toLowerCase(),String(d)));case"delete":case"has":case"getAll":return f=>(ul(f),URLSearchParams.prototype[i].call(u,String(f).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let t=this.getAll(e);if(t.length===0)return null;let n=t.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,t=void 0){for(let n of this.keys())Reflect.apply(e,t,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>(e[t]=this.getAll(t),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{let n=this.getAll(t);return t==="host"?e[t]=n[0]:e[t]=n.length>1?n:n[0],e},{})}};Object.defineProperties(Ne.prototype,["get","entries","forEach","values"].reduce((r,e)=>(r[e]={enumerable:!0},r),{}));function Lw(r=[]){return new Ne(r.reduce((e,t,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,t])=>{try{return ul(e),Bd(e,String(t)),!0}catch{return!1}}))}var WT=new Set([301,302,303,307,308]),fl=r=>WT.has(r);var qr=Symbol("Response internals"),We=class extends _n{constructor(e=null,t={}){super(e,t);let n=t.status||200,i=new Ne(t.headers);if(e!==null&&!i.has("Content-Type")){let u=sl(this);u&&i.append("Content-Type",u)}this[qr]={url:t.url,status:n,statusText:t.statusText||"",headers:i,counter:t.counter||0,highWaterMark:t.highWaterMark}}get type(){return"default"}get url(){return this[qr].url||""}get status(){return this[qr].status}get ok(){return this[qr].status>=200&&this[qr].status<300}get redirected(){return this[qr].counter>0}get statusText(){return this[qr].statusText}get headers(){return this[qr].headers}get highWaterMark(){return this[qr].highWaterMark}clone(){return new We(al(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,size:this.size})}static redirect(e,t=302){if(!fl(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new We(null,{headers:{location:new URL(e).toString()},status:t})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(We.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Uw=require("url");var Fw=r=>{if(r.search)return r.search;let e=r.href.length-1,t=r.hash||(r.href[e]==="#"?"#":"");return r.href[e-t.length]==="?"?"?":""};var Nr=Symbol("Request internals"),Pd=r=>typeof r=="object"&&typeof r[Nr]=="object",hr=class extends _n{constructor(e,t={}){let n,i;Pd(e)?(n=new URL(e.url),i=e):(n=new URL(e),i={});let u=t.method||i.method||"GET";u=u.toUpperCase();let f=t.body!=null?t.body:Pd(e)&&e.body!==null?al(e):null;if(f!=null&&(u==="GET"||u==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");super(f,{size:t.size||i.size||0});let d=i,h=new Ne(t.headers||d.headers||{});if(f!==null&&!h.has("Content-Type")){let b=sl(this);b&&h.append("Content-Type",b)}let m="signal"in t?t.signal:Pd(d)?d.signal:null;if(m!=null&&!gw(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");this[Nr]={method:u,redirect:t.redirect||d.redirect||"follow",headers:h,parsedURL:n,signal:m||null},this.keepalive,this.follow=t.follow===void 0?d.follow===void 0?20:d.follow:t.follow,this.compress=t.compress===void 0?d.compress===void 0?!0:d.compress:t.compress,this.counter=t.counter||d.counter||0,this.agent=t.agent||d.agent,this.highWaterMark=t.highWaterMark||d.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||d.insecureHTTPParser||!1}get cache(){return"default"}get credentials(){return"same-origin"}get destination(){return""}get integrity(){return""}get mode(){return"cors"}get referrer(){return""}get referrerPolicy(){return""}get method(){return this[Nr].method}get url(){return(0,Uw.format)(this[Nr].parsedURL)}get headers(){return this[Nr].headers}get redirect(){return this[Nr].redirect}get signal(){return this[Nr].signal}clone(){return new hr(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(hr.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});var qw=r=>{let{parsedURL:e}=r[Nr],t=new Ne(r[Nr].headers);t.has("Accept")||t.set("Accept","*/*");let n=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(n="0"),r.body!==null){let d=Pw(r);typeof d=="number"&&!Number.isNaN(d)&&(n=String(d))}n&&t.set("Content-Length",n),t.has("User-Agent")||t.set("User-Agent","node-fetch"),r.compress&&!t.has("Accept-Encoding")&&t.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=r;typeof i=="function"&&(i=i(e)),!t.has("Connection")&&!i&&t.set("Connection","close");let u=Fw(e);return{path:e.pathname+u,pathname:e.pathname,hostname:e.hostname,protocol:e.protocol,port:e.port,hash:e.hash,search:e.search,query:e.query,href:e.href,method:r.method,headers:t[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i}};var cl=class extends wn{constructor(e,t="aborted"){super(e,t)}};var pr=require("stream"),jw=M(require("stream"),1);var MT=new Set(["data:","http:","https:"]);async function Sn(r,e={}){return new Promise((t,n)=>{let i=new hr(r,e),u=qw(i);if(!MT.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let g=(0,Mw.default)(i.url.toString()),v=new We(g,{headers:{"Content-Type":g.typeFull}});t(v);return}let f=(u.protocol==="https:"?Ww.default:Nw.default).request,{signal:d}=i,h=null,m=null,b=()=>{let g=new cl("The operation was aborted.");n(g),i.body&&i.body.cancel(g),m&&m.emit("error",g)};if(d&&d.aborted){b();return}let S=()=>{b(),p()},_=f(u);d&&d.addEventListener("abort",S);let p=()=>{_.abort(),d&&d.removeEventListener("abort",S)};_.on("error",g=>{n(new Lt(`request to ${i.url} failed, reason: ${g.message}`,"system",g)),p()}),jT(_,g=>{d&&d.aborted||m?.emit("error",g)}),parseInt(process.version.substring(1))<14&&_.on("socket",g=>{g.prependListener("close",v=>{let P=g.listenerCount("data")>0;if(h&&P&&!v&&!(d&&d.aborted)){let R=Object.assign(new Error("Premature close"),{code:"ERR_STREAM_PREMATURE_CLOSE"});m?.emit("error",R)}})}),_.on("response",g=>{m=g,_.setTimeout(0);let v=Lw(m.rawHeaders);if(fl(Number(m.statusCode))){let C=v.get("Location"),O=C===null?null:new URL(C,i.url);switch(i.redirect){case"error":n(new Lt(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),p();return;case"manual":O!==null&&v.set("Location",O.toString());break;case"follow":{if(O===null)break;if(i.counter>=i.follow){n(new Lt(`maximum redirect reached at: ${i.url}`,"max-redirect")),p();return}let A={headers:new Ne(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:e.body,signal:i.signal,size:i.size},x=A.body instanceof wt||A.body instanceof jw.Readable;if(m.statusCode!==303&&x){n(new Lt("Cannot follow redirect with body being a readable stream","unsupported-redirect")),p();return}(m.statusCode===303||(m.statusCode===301||m.statusCode===302)&&i.method==="POST")&&(A.method="GET",A.body=void 0,A.headers.delete("content-length")),Sn(new hr(O.href,A)).then(t,n),p();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}d&&m.once("end",()=>{d.removeEventListener("abort",S)});let P=(0,pr.pipeline)(m,new pr.PassThrough,n);process.version<"v12.10"&&m.on("aborted",S);let R={url:i.url,status:m.statusCode,statusText:m.statusMessage,headers:v,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},T=v.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||T===null||m.statusCode===204||m.statusCode===304){h=new We(P,R),t(h);return}let B={flush:wo.default.Z_SYNC_FLUSH,finishFlush:wo.default.Z_SYNC_FLUSH};if(T==="gzip"||T==="x-gzip"){P=(0,pr.pipeline)(P,wo.default.createGunzip(B),n),h=new We(Ii(P),R),t(h);return}if(T==="deflate"||T==="x-deflate"){(0,pr.pipeline)(m,new pr.PassThrough,n).once("data",O=>{(O[0]&15)===8?P=(0,pr.pipeline)(P,wo.default.createInflate(),n):P=(0,pr.pipeline)(P,wo.default.createInflateRaw(),n),h=new We(Ii(P),R),t(h)});return}if(T==="br"){P=(0,pr.pipeline)(P,wo.default.createBrotliDecompress(),n),h=new We(Ii(P),R),t(h);return}h=new We(Ii(P),R),t(h)}),Iw(_,i)})}function jT(r,e){let t;r.on("socket",n=>{t=n}),r.on("response",n=>{let{headers:i}=n;i["transfer-encoding"]==="chunked"&&!i["content-length"]&&t.prependListener("close",u=>{if(t.listenerCount("data")>0&&!u){let d=Object.assign(new Error("Premature close"),{code:"ERR_STREAM_PREMATURE_CLOSE"});e(d)}})})}var dl=class extends qe{constructor(e,t=$T(new TypeError("File constructor requires name argument")),n={}){super(e,n),this._name=t,this._lastModified=n.lastModified||Date.now()}get name(){return this._name}get webkitRelativePath(){return""}get lastModified(){return this._lastModified}get[Symbol.toStringTag](){return"File"}},$T=r=>{throw r};var hl=typeof globalThis.File=="function"?globalThis.File:dl;var vn=M(require("fs"),1),$w=M(require("os"),1);var Wr=class extends gn{constructor(){super(),this.path=`${$w.default.tmpdir()}/${parseInt(String(Math.random()*1e9),10).toString()+Date.now()}`,this._opened=!1}async _open(){this._opening?await this._opening:(this._opening=vn.default.promises.mkdir(this.path),await this._opening,this._opened=!0)}async put(e,t){this._opened||await this._open();let n=e.toString(),i=`${this.path}/${n}`;await vn.default.promises.writeFile(i,t)}async get(e){this._opened||await this._open();let t=e.toString(),n=`${this.path}/${t}`;return await vn.default.promises.readFile(n)}async has(e){this._opened||await this._open();let t=e.toString(),n=`${this.path}/${t}`;try{return await vn.default.promises.access(n),!0}catch{return!1}}async*blocks(){this._opened||await this._open();let e=await vn.default.promises.readdir(this.path);for(let t of e){let n=`${this.path}/${t}`,i=await vn.default.promises.readFile(n);yield{cid:V.parse(t),bytes:i}}}async close(){this._opened&&await vn.default.promises.rm(this.path,{recursive:!0}),this._opened=!1}};var Id=new URL("https://nftstorage.link/"),Dd=(r,e={})=>{let t=e.gateway||Id;return r=new URL(String(r)),r.protocol==="ipfs:"?new URL(`/ipfs/${r.href.slice(7)}`,t):r};var Di=class{constructor(e,t,n){this._version=e,this._roots=t,this._blockstore=n}get version(){return this._version}get blockstore(){return this._blockstore}async getRoots(){return this._roots}has(e){return this._blockstore.has(e)}async get(e){let t=await this._blockstore.get(e);return{cid:e,bytes:t}}blocks(){return this._blockstore.blocks()}async*cids(){for await(let e of this.blocks())yield e.cid}};var _o=class{constructor(e,t,n){this.ipnft=e,this.url=t,this.data=n,Object.defineProperties(this,{ipnft:{enumerable:!0,writable:!1},url:{enumerable:!0,writable:!1},data:{enumerable:!1,writable:!1}})}embed(){return _o.embed(this)}static embed({data:e}){return HT(e,{gateway:Id})}static async encode(e){let t=new Wr,[n,i]=JT(e),u=JSON.parse(JSON.stringify(i)),f=JSON.parse(JSON.stringify(i));for(let[m,b]of n.entries()){let S=b.name||"blob",_=b.stream(),{root:p}=await ts({input:[{path:S,content:_}],blockstore:t,wrapWithDirectory:!0}),g=new URL(`ipfs://${p}/${S}`),v=m.split(".");Hw(u,v,g),Hw(f,v,p)}let{root:d}=await ts({input:[{path:"metadata.json",content:JSON.stringify(u)}],blockstore:t,wrapWithDirectory:!1}),h=await Up({value:{...f,"metadata.json":d,type:"nft"},codec:La,hasher:or});return await t.put(h.cid,h.bytes),{cid:h.cid,token:new _o(h.cid.toString(),`ipfs://${h.cid}/metadata.json`,u),car:new Di(1,[h.cid],t)}}},HT=(r,e)=>XT(r,VT,YT,e);var VT=r=>r instanceof URL;var YT=(r,e)=>[r,Dd(e,r)],GT=r=>typeof r=="object"&&r!=null;var QT=(r,e,t)=>(r.set(t.join("."),e),[r,void 0]),KT=r=>r instanceof qe,JT=r=>pl(r,KT,QT,new Map,[]),XT=(r,e,t,n)=>{let[,i]=pl(r,e,t,n,[]);return i},pl=(r,e,t,n,i)=>e(r,n,i)?t(n,r,i):Array.isArray(r)?eA(r,e,t,n,i):GT(r)?ZT(r,e,t,n,i):[n,r],ZT=(r,e,t,n,i)=>{let u=n,f={};for(let[d,h]of Object.entries(r)){let[m,b]=pl(h,e,t,u,[...i,d]);f[d]=b,u=m}return[u,f]},eA=(r,e,t,n,i)=>{let u=[],f=n;for(let[d,h]of r.entries()){let[m,b]=pl(h,e,t,f,[...i,d]);u[d]=b,f=m}return[f,u]},Hw=(r,e,t)=>{let n=e.length-1,i=r;for(let[u,f]of e.entries())u===n?i[f]=t:i=i[f]};var rA=5,nA=3,oA=1024*1024*10,iA=30,aA=10*1e3;function Kw(){let r=(0,Qw.default)(iA,aA);return()=>r(()=>{})}var ml=Kw(),me=class{constructor({token:e,endpoint:t=new URL("https://api.nft.storage"),rateLimiter:n}){this.token=e,this.endpoint=t,this.rateLimiter=n||Kw()}static auth(e){if(!e)throw new Error("missing token");return{Authorization:`Bearer ${e}`,"X-Client":"nft.storage/js"}}static async storeBlob(e,t){let n=new Wr,i;try{let{cid:u,car:f}=await me.encodeBlob(t,{blockstore:n});await me.storeCar(e,f),i=u.toString()}finally{await n.close()}return i}static async storeCar({endpoint:e,token:t,rateLimiter:n=ml},i,{onStoredChunk:u,maxRetries:f,decoders:d}={}){let h=new URL("upload/",e),m=me.auth(t),b=oA,S=i instanceof qe?await Dr.fromBlob(i,b,{decoders:d}):new Dr(i,b,{decoders:d}),_=ga(nA,async function(g){let v=[];for await(let T of g)v.push(T);let P=new qe(v,{type:"application/car"}),R=await(0,yl.default)(async()=>{await n();let T=await Sn(h.toString(),{method:"POST",headers:m,body:P});if(T.status===429)throw new Error("rate limited");let B=await T.json();if(!B.ok)throw T.status===401?new yl.AbortError(B.error.message):new Error(B.error.message);return B.value.cid},{retries:f??rA});return u&&u(P.size),R}),p;for await(let g of _(S.cars()))p=g;return p}static async storeDirectory(e,t){let n=new Wr,i;try{let{cid:u,car:f}=await me.encodeDirectory(t,{blockstore:n});await me.storeCar(e,f),i=u.toString()}finally{await n.close()}return i}static async store(e,t){let{token:n,car:i}=await me.encodeNFT(t);return await me.storeCar(e,i),n}static async status({endpoint:e,token:t,rateLimiter:n=ml},i){let u=new URL(`${i}/`,e);await n();let f=await Sn(u.toString(),{method:"GET",headers:me.auth(t)});if(f.status===429)throw new Error("rate limited");let d=await f.json();if(d.ok)return{cid:d.value.cid,deals:Yw(d.value.deals),size:d.value.size,pin:uA(d.value.pin),created:new Date(d.value.created)};throw new Error(d.error.message)}static async check({endpoint:e,rateLimiter:t=ml},n){let i=new URL(`check/${n}/`,e);await t();let u=await Sn(i.toString());if(u.status===429)throw new Error("rate limited");let f=await u.json();if(f.ok)return{cid:f.value.cid,deals:Yw(f.value.deals),pin:f.value.pin};throw new Error(f.error.message)}static async delete({endpoint:e,token:t,rateLimiter:n=ml},i){let u=new URL(`${i}/`,e);await n();let f=await Sn(u.toString(),{method:"DELETE",headers:me.auth(t)});if(f.status===429)throw new Error("rate limited");let d=await f.json();if(!d.ok)throw new Error(d.error.message)}static async encodeNFT(e){return sA(e),_o.encode(e)}static async encodeBlob(e,{blockstore:t}={}){if(e.size===0)throw new Error("Content size is 0, make sure to provide some content");return Vw([Gw("blob",e)],{blockstore:t,wrapWithDirectory:!1})}static async encodeDirectory(e,{blockstore:t}={}){let n=[],i=0;for(let u of e)n.push(Gw(u.name,u)),i+=u.size;if(i===0)throw new Error("Total size of files should exceed 0, make sure to provide some content");return Vw(n,{blockstore:t,wrapWithDirectory:!0})}storeBlob(e){return me.storeBlob(this,e)}storeCar(e,t){return me.storeCar(this,e,t)}storeDirectory(e){return me.storeDirectory(this,e)}status(e){return me.status(this,e)}delete(e){return me.delete(this,e)}check(e){return me.check(this,e)}store(e){return me.store(this,e)}},sA=({name:r,description:e,image:t,decimals:n})=>{if(typeof r!="string")throw new TypeError("string property `name` identifying the asset is required");if(typeof e!="string")throw new TypeError("string property `description` describing asset is required");if(t instanceof qe)t.type.startsWith("image/")||console.warn(`According to ERC721 Metadata JSON Schema 'image' must have 'image/*' mime type.

For better interoperability we would highly recommend storing content with different mime type under 'properties' namespace e.g. \`properties: { video: file }\` and using 'image' field for storing a preview image for it instead.

For more context please see ERC-721 specification https://eips.ethereum.org/EIPS/eip-721`);else throw new TypeError("property `image` must be a Blob or File object");if(typeof n<"u"&&typeof n!="number")throw new TypeError("property `decimals` must be an integer value")},Vw=async(r,{blockstore:e,wrapWithDirectory:t}={})=>{e=e||new Wr;let{root:n}=await ts({input:r,blockstore:e,wrapWithDirectory:t}),i=new Di(1,[n],e);return{cid:n,car:i}},Yw=r=>r.map(e=>{let{dealActivation:t,dealExpiration:n,lastChanged:i}={dealExpiration:null,dealActivation:null,...e};return{...e,lastChanged:new Date(i),...t&&{dealActivation:new Date(t)},...n&&{dealExpiration:new Date(n)}}}),uA=r=>({...r,created:new Date(r.created)});function Gw(r,e){let t;return{path:r,get content(){return t=t||e.stream(),t}}}var I_=M(require("fs")),D_=M(Xw());var B_=M(require("node:http"),1),P_=M(require("node:https"),1),Ro=M(require("node:zlib"),1),it=M(require("node:stream"),1),hs=require("node:buffer");function mA(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let e=r.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let t=r.substring(5,e).split(";"),n="",i=!1,u=t[0]||"text/plain",f=u;for(let b=1;b<t.length;b++)t[b]==="base64"?i=!0:(f+=`;${t[b]}`,t[b].indexOf("charset=")===0&&(n=t[b].substring(8)));!t[0]&&!n.length&&(f+=";charset=US-ASCII",n="US-ASCII");let d=i?"base64":"ascii",h=unescape(r.substring(e+1)),m=Buffer.from(h,d);return m.type=u,m.typeFull=f,m.charset=n,m}var Zw=mA;var _t=M(require("node:stream"),1),$r=require("node:util"),ot=require("node:buffer");ss();_l();var jr=class extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var He=class extends jr{constructor(e,t,n){super(e,t),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};var Sl=Symbol.toStringTag,qd=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Sl]==="URLSearchParams",ls=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Sl]),u_=r=>typeof r=="object"&&(r[Sl]==="AbortSignal"||r[Sl]==="EventTarget"),l_=(r,e)=>{let t=new URL(e).hostname,n=new URL(r).hostname;return t===n||t.endsWith(`.${n}`)};var BA=(0,$r.promisify)(_t.default.pipeline),Ve=Symbol("Body internals"),yr=class{constructor(e,{size:t=0}={}){let n=null;e===null?e=null:qd(e)?e=ot.Buffer.from(e.toString()):ls(e)||ot.Buffer.isBuffer(e)||($r.types.isAnyArrayBuffer(e)?e=ot.Buffer.from(e):ArrayBuffer.isView(e)?e=ot.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof _t.default||(e instanceof vo?(e=s_(e),n=e.type.split("=")[1]):e=ot.Buffer.from(String(e))));let i=e;ot.Buffer.isBuffer(e)?i=_t.default.Readable.from(e):ls(e)&&(i=_t.default.Readable.from(e.stream())),this[Ve]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=t,e instanceof _t.default&&e.on("error",u=>{let f=u instanceof jr?u:new He(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[Ve].error=f})}get body(){return this[Ve].stream}get bodyUsed(){return this[Ve].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:t,byteLength:n}=await Md(this);return e.slice(t,t+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new vo,i=new URLSearchParams(await this.text());for(let[u,f]of i)n.append(u,f);return n}let{toFormData:t}=await Promise.resolve().then(()=>(m_(),p_));return t(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[Ve].body&&this[Ve].body.type||"",t=await this.arrayBuffer();return new Mr([t],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await Md(this);return new TextDecoder().decode(e)}buffer(){return Md(this)}};yr.prototype.buffer=(0,$r.deprecate)(yr.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(yr.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,$r.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Md(r){if(r[Ve].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[Ve].disturbed=!0,r[Ve].error)throw r[Ve].error;let{body:e}=r;if(e===null)return ot.Buffer.alloc(0);if(!(e instanceof _t.default))return ot.Buffer.alloc(0);let t=[],n=0;try{for await(let i of e){if(r.size>0&&n+i.length>r.size){let u=new He(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw e.destroy(u),u}n+=i.length,t.push(i)}}catch(i){throw i instanceof jr?i:new He(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return t.every(i=>typeof i=="string")?ot.Buffer.from(t.join("")):ot.Buffer.concat(t,n)}catch(i){throw new He(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new He(`Premature close of server response while trying to fetch ${r.url}`)}var zi=(r,e)=>{let t,n,{body:i}=r[Ve];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof _t.default&&typeof i.getBoundary!="function"&&(t=new _t.PassThrough({highWaterMark:e}),n=new _t.PassThrough({highWaterMark:e}),i.pipe(t),i.pipe(n),r[Ve].stream=t,i=n),i},PA=(0,$r.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Tl=(r,e)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":qd(r)?"application/x-www-form-urlencoded;charset=UTF-8":ls(r)?r.type||null:ot.Buffer.isBuffer(r)||$r.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof vo?`multipart/form-data; boundary=${e[Ve].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${PA(r)}`:r instanceof _t.default?null:"text/plain;charset=UTF-8",y_=r=>{let{body:e}=r[Ve];return e===null?0:ls(e)?e.size:ot.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},b_=async(r,{body:e})=>{e===null?r.end():await BA(e,r)};var jd=require("node:util"),ds=M(require("node:http"),1),Al=typeof ds.default.validateHeaderName=="function"?ds.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let e=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},$d=typeof ds.default.validateHeaderValue=="function"?ds.default.validateHeaderValue:(r,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let t=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}},Ye=class extends URLSearchParams{constructor(e){let t=[];if(e instanceof Ye){let n=e.raw();for(let[i,u]of Object.entries(n))t.push(...u.map(f=>[i,f]))}else if(e!=null)if(typeof e=="object"&&!jd.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)t.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");t=[...e].map(i=>{if(typeof i!="object"||jd.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return t=t.length>0?t.map(([n,i])=>(Al(n),$d(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(t),new Proxy(this,{get(n,i,u){switch(i){case"append":case"set":return(f,d)=>(Al(f),$d(f,String(d)),URLSearchParams.prototype[i].call(n,String(f).toLowerCase(),String(d)));case"delete":case"has":case"getAll":return f=>(Al(f),URLSearchParams.prototype[i].call(n,String(f).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let t=this.getAll(e);if(t.length===0)return null;let n=t.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,t=void 0){for(let n of this.keys())Reflect.apply(e,t,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>(e[t]=this.getAll(t),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{let n=this.getAll(t);return t==="host"?e[t]=n[0]:e[t]=n.length>1?n:n[0],e},{})}};Object.defineProperties(Ye.prototype,["get","entries","forEach","values"].reduce((r,e)=>(r[e]={enumerable:!0},r),{}));function g_(r=[]){return new Ye(r.reduce((e,t,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,t])=>{try{return Al(e),$d(e,String(t)),!0}catch{return!1}}))}var IA=new Set([301,302,303,307,308]),Cl=r=>IA.has(r);var Ft=Symbol("Response internals"),De=class extends yr{constructor(e=null,t={}){super(e,t);let n=t.status!=null?t.status:200,i=new Ye(t.headers);if(e!==null&&!i.has("Content-Type")){let u=Tl(e,this);u&&i.append("Content-Type",u)}this[Ft]={type:"default",url:t.url,status:n,statusText:t.statusText||"",headers:i,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[Ft].type}get url(){return this[Ft].url||""}get status(){return this[Ft].status}get ok(){return this[Ft].status>=200&&this[Ft].status<300}get redirected(){return this[Ft].counter>0}get statusText(){return this[Ft].statusText}get headers(){return this[Ft].headers}get highWaterMark(){return this[Ft].highWaterMark}clone(){return new De(zi(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!Cl(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new De(null,{headers:{location:new URL(e).toString()},status:t})}static error(){let e=new De(null,{status:0,statusText:""});return e[Ft].type="error",e}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(De.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var C_=require("node:url"),x_=require("node:util");var w_=r=>{if(r.search)return r.search;let e=r.href.length-1,t=r.hash||(r.href[e]==="#"?"#":"");return r.href[e-t.length]==="?"?"?":""};var S_=require("node:net");function __(r,e=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",e&&(r.pathname="",r.search=""),r)}var v_=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),E_="strict-origin-when-cross-origin";function R_(r){if(!v_.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function DA(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let e=r.host.replace(/(^\[)|(]$)/g,""),t=(0,S_.isIP)(e);return t===4&&/^127\./.test(e)||t===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function Li(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:DA(r)}function T_(r,{referrerURLCallback:e,referrerOriginCallback:t}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let n=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,u=__(i),f=__(i,!0);u.toString().length>4096&&(u=f),e&&(u=e(u)),t&&(f=t(f));let d=new URL(r.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return Li(u)&&!Li(d)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===d.origin?u:Li(u)&&!Li(d)?"no-referrer":f;case"same-origin":return u.origin===d.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===d.origin?u:f;case"no-referrer-when-downgrade":return Li(u)&&!Li(d)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function A_(r){let e=(r.get("referrer-policy")||"").split(/[,\s]+/),t="";for(let n of e)n&&v_.has(n)&&(t=n);return t}var Re=Symbol("Request internals"),xl=r=>typeof r=="object"&&typeof r[Re]=="object",OA=(0,x_.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Hr=class extends yr{constructor(e,t={}){let n;if(xl(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let i=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),"data"in t&&OA(),(t.body!=null||xl(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=t.body?t.body:xl(e)&&e.body!==null?zi(e):null;super(u,{size:t.size||e.size||0});let f=new Ye(t.headers||e.headers||{});if(u!==null&&!f.has("Content-Type")){let m=Tl(u,this);m&&f.set("Content-Type",m)}let d=xl(e)?e.signal:null;if("signal"in t&&(d=t.signal),d!=null&&!u_(d))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let h=t.referrer==null?e.referrer:t.referrer;if(h==="")h="no-referrer";else if(h){let m=new URL(h);h=/^about:(\/\/)?client$/.test(m)?"client":m}else h=void 0;this[Re]={method:i,redirect:t.redirect||e.redirect||"follow",headers:f,parsedURL:n,signal:d,referrer:h},this.follow=t.follow===void 0?e.follow===void 0?20:e.follow:t.follow,this.compress=t.compress===void 0?e.compress===void 0?!0:e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[Re].method}get url(){return(0,C_.format)(this[Re].parsedURL)}get headers(){return this[Re].headers}get redirect(){return this[Re].redirect}get signal(){return this[Re].signal}get referrer(){if(this[Re].referrer==="no-referrer")return"";if(this[Re].referrer==="client")return"about:client";if(this[Re].referrer)return this[Re].referrer.toString()}get referrerPolicy(){return this[Re].referrerPolicy}set referrerPolicy(e){this[Re].referrerPolicy=R_(e)}clone(){return new Hr(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Hr.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var k_=r=>{let{parsedURL:e}=r[Re],t=new Ye(r[Re].headers);t.has("Accept")||t.set("Accept","*/*");let n=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(n="0"),r.body!==null){let d=y_(r);typeof d=="number"&&!Number.isNaN(d)&&(n=String(d))}n&&t.set("Content-Length",n),r.referrerPolicy===""&&(r.referrerPolicy=E_),r.referrer&&r.referrer!=="no-referrer"?r[Re].referrer=T_(r):r[Re].referrer="no-referrer",r[Re].referrer instanceof URL&&t.set("Referer",r.referrer),t.has("User-Agent")||t.set("User-Agent","node-fetch"),r.compress&&!t.has("Accept-Encoding")&&t.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=r;typeof i=="function"&&(i=i(e)),!t.has("Connection")&&!i&&t.set("Connection","close");let u=w_(e),f={path:e.pathname+u,method:r.method,headers:t[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:e,options:f}};var kl=class extends jr{constructor(e,t="aborted"){super(e,t)}};_l();Nd();var zA=new Set(["data:","http:","https:"]);async function Bl(r,e){return new Promise((t,n)=>{let i=new Hr(r,e),{parsedURL:u,options:f}=k_(i);if(!zA.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let g=Zw(i.url),v=new De(g,{headers:{"Content-Type":g.typeFull}});t(v);return}let d=(u.protocol==="https:"?P_.default:B_.default).request,{signal:h}=i,m=null,b=()=>{let g=new kl("The operation was aborted.");n(g),i.body&&i.body instanceof it.default.Readable&&i.body.destroy(g),!(!m||!m.body)&&m.body.emit("error",g)};if(h&&h.aborted){b();return}let S=()=>{b(),p()},_=d(u.toString(),f);h&&h.addEventListener("abort",S);let p=()=>{_.abort(),h&&h.removeEventListener("abort",S)};_.on("error",g=>{n(new He(`request to ${i.url} failed, reason: ${g.message}`,"system",g)),p()}),LA(_,g=>{m.body.destroy(g)}),process.version<"v14"&&_.on("socket",g=>{let v;g.prependListener("end",()=>{v=g._eventsCount}),g.prependListener("close",P=>{if(m&&v<g._eventsCount&&!P){let R=new Error("Premature close");R.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",R)}})}),_.on("response",g=>{_.setTimeout(0);let v=g_(g.rawHeaders);if(Cl(g.statusCode)){let C=v.get("Location"),O=null;try{O=C===null?null:new URL(C,i.url)}catch{if(i.redirect!=="manual"){n(new He(`uri requested responds with an invalid redirect URL: ${C}`,"invalid-redirect")),p();return}}switch(i.redirect){case"error":n(new He(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),p();return;case"manual":break;case"follow":{if(O===null)break;if(i.counter>=i.follow){n(new He(`maximum redirect reached at: ${i.url}`,"max-redirect")),p();return}let A={headers:new Ye(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:zi(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!l_(i.url,O))for(let D of["authorization","www-authenticate","cookie","cookie2"])A.headers.delete(D);if(g.statusCode!==303&&i.body&&e.body instanceof it.default.Readable){n(new He("Cannot follow redirect with body being a readable stream","unsupported-redirect")),p();return}(g.statusCode===303||(g.statusCode===301||g.statusCode===302)&&i.method==="POST")&&(A.method="GET",A.body=void 0,A.headers.delete("content-length"));let x=A_(v);x&&(A.referrerPolicy=x),t(Bl(new Hr(O,A))),p();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}h&&g.once("end",()=>{h.removeEventListener("abort",S)});let P=(0,it.pipeline)(g,new it.PassThrough,C=>{C&&n(C)});process.version<"v12.10"&&g.on("aborted",S);let R={url:i.url,status:g.statusCode,statusText:g.statusMessage,headers:v,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},T=v.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||T===null||g.statusCode===204||g.statusCode===304){m=new De(P,R),t(m);return}let B={flush:Ro.default.Z_SYNC_FLUSH,finishFlush:Ro.default.Z_SYNC_FLUSH};if(T==="gzip"||T==="x-gzip"){P=(0,it.pipeline)(P,Ro.default.createGunzip(B),C=>{C&&n(C)}),m=new De(P,R),t(m);return}if(T==="deflate"||T==="x-deflate"){let C=(0,it.pipeline)(g,new it.PassThrough,O=>{O&&n(O)});C.once("data",O=>{(O[0]&15)===8?P=(0,it.pipeline)(P,Ro.default.createInflate(),A=>{A&&n(A)}):P=(0,it.pipeline)(P,Ro.default.createInflateRaw(),A=>{A&&n(A)}),m=new De(P,R),t(m)}),C.once("end",()=>{m||(m=new De(P,R),t(m))});return}if(T==="br"){P=(0,it.pipeline)(P,Ro.default.createBrotliDecompress(),C=>{C&&n(C)}),m=new De(P,R),t(m);return}m=new De(P,R),t(m)}),b_(_,i).catch(n)})}function LA(r,e){let t=hs.Buffer.from(`0\r
\r
`),n=!1,i=!1,u;r.on("response",f=>{let{headers:d}=f;n=d["transfer-encoding"]==="chunked"&&!d["content-length"]}),r.on("socket",f=>{let d=()=>{if(n&&!i){let h=new Error("Premature close");h.code="ERR_STREAM_PREMATURE_CLOSE",e(h)}};f.prependListener("close",d),r.on("abort",()=>{f.removeListener("close",d)}),f.on("data",h=>{i=hs.Buffer.compare(h.slice(-5),t)===0,!i&&u&&(i=hs.Buffer.compare(u.slice(-3),t.slice(0,3))===0&&hs.Buffer.compare(h.slice(-2),t.slice(3))===0),u=h})})}D_.default.config();var{NFT_STORE_API_KEY:FA}=process.env,O_=async()=>(await new me({token:FA}).store({name:"Example NFT",description:"Testing IPFS network",image:new hl([await I_.default.promises.readFile("test.jpeg")],"test.jpeg",{type:"image/jpeg"})})).url,Hd=r=>r.replace("ipfs://","https://cloudflare-ipfs.com/ipfs/"),z_=async r=>Bl(r).then(t=>t.json()).then(t=>t);var UA=async()=>{let r=await O_(),e=Hd(r),t=await z_(e),n=Hd(t.image);console.log(n)};UA();
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
